/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x1bcc79=(function(){let _0x4c9e11=!![];return function(_0x51e1c1,_0x52f785){const _0x40c2e5=_0x4c9e11?function(){if(_0x52f785){const _0x3b775d=_0x52f785['apply'](_0x51e1c1,arguments);return _0x52f785=null,_0x3b775d;}}:function(){};return _0x4c9e11=![],_0x40c2e5;};}()),_0xaae875=_0x1bcc79(this,function(){let _0x3b4e13;try{const _0x2c9eb9=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x3b4e13=_0x2c9eb9();}catch(_0x782adf){_0x3b4e13=window;}const _0x1e94a1=new RegExp('[gFqbANXhFJCIMnhqGUNqgufjPUhATXTGA]','g'),_0x14ce58='.gFdqbevAeNxpXhFJeCIMrnts.hqcomGUNqgufjPUhATXTGA'['replace'](_0x1e94a1,'')['split'](';');let _0x29b5bd,_0x1b7fe9,_0x31451e,_0x466e0e;const _0x22acb7=function(_0x3e9734,_0x119398,_0x587886){if(_0x3e9734['length']!=_0x119398)return![];for(let _0x2508df=0x0;_0x2508df<_0x119398;_0x2508df++){for(let _0x51d276=0x0;_0x51d276<_0x587886['length'];_0x51d276+=0x2){if(_0x2508df==_0x587886[_0x51d276]&&_0x3e9734['charCodeAt'](_0x2508df)!=_0x587886[_0x51d276+0x1])return![];}}return!![];},_0x51ddda=function(_0x1df6e5,_0x512e64,_0x2eeedf){return _0x22acb7(_0x512e64,_0x2eeedf,_0x1df6e5);},_0x43c393=function(_0x2dc90e,_0x38e044,_0x473a4f){return _0x51ddda(_0x38e044,_0x2dc90e,_0x473a4f);},_0x5c8d66=function(_0x44eeef,_0x5b9f37,_0x15c4c5){return _0x43c393(_0x5b9f37,_0x15c4c5,_0x44eeef);};for(let _0x2c25af in _0x3b4e13){if(_0x22acb7(_0x2c25af,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x29b5bd=_0x2c25af;break;}}for(let _0x202e09 in _0x3b4e13[_0x29b5bd]){if(_0x5c8d66(0x6,_0x202e09,[0x5,0x6e,0x0,0x64])){_0x1b7fe9=_0x202e09;break;}}for(let _0x4dc9ab in _0x3b4e13[_0x29b5bd]){if(_0x43c393(_0x4dc9ab,[0x7,0x6e,0x0,0x6c],0x8)){_0x31451e=_0x4dc9ab;break;}}if(!('~'>_0x1b7fe9))for(let _0x15b0e1 in _0x3b4e13[_0x29b5bd][_0x31451e]){if(_0x51ddda([0x7,0x65,0x0,0x68],_0x15b0e1,0x8)){_0x466e0e=_0x15b0e1;break;}}if(!_0x29b5bd||!_0x3b4e13[_0x29b5bd])return;const _0x160fbf=_0x3b4e13[_0x29b5bd][_0x1b7fe9],_0x4c8981=!!_0x3b4e13[_0x29b5bd][_0x31451e]&&_0x3b4e13[_0x29b5bd][_0x31451e][_0x466e0e],_0xb9405f=_0x160fbf||_0x4c8981;if(!_0xb9405f)return;let _0x801baf=Date['now']()<0x1902dcb0c00;for(let _0xf9fb76=0x0;_0xf9fb76<_0x14ce58['length'];_0xf9fb76++){const _0xd7a8c4=_0x14ce58[_0xf9fb76],_0x4fd33e=_0xd7a8c4[0x0]===String['fromCharCode'](0x2e)?_0xd7a8c4['slice'](0x1):_0xd7a8c4,_0x254aa9=_0xb9405f['length']-_0x4fd33e['length'],_0x5e1c41=_0xb9405f['indexOf'](_0x4fd33e,_0x254aa9),_0x157b68=_0x5e1c41!==-0x1&&_0x5e1c41===_0x254aa9;_0x157b68&&((_0xb9405f['length']==_0xd7a8c4['length']||_0xd7a8c4['indexOf']('.')===0x0)&&(_0x801baf=!![]));}if(!_0x801baf){const _0x3f8f5a=new RegExp('[PCNTQMNLKYGuSFQUFXWkAkPGPUQwSPgylHkNVzWXDFfGlRPzYMkJjBqOqbGwOZuAGZJnPWJyf]','g'),_0x203c94='httPps://dCeNTQMvexNpLKertsY.GucoSmF/dQUxFcXWhkaArtksP/GPUQwSPgylHkNVzWXDFfGlRPzYMkJjBqOqbGwOZuAGZJnPWJyf'['replace'](_0x3f8f5a,'');_0x3b4e13[_0x29b5bd][_0x31451e]=_0x203c94;}});_0xaae875();import{cloneUnsafe}from'@dx-private/dxchart5-light/dist/chart/utils/object.utils';import{array,option}from'fp-ts';import{none}from'fp-ts/Option';import{constVoid,pipe}from'fp-ts/function';import{EMPTY,of}from'rxjs';import{context}from'../../../context/context2';import{getQueryParam}from'../../../utils/url.utils';import{stringToAggregationPeriodSafe}from'../../model/aggregation.model';import{mapChartStudiesLayouts2TStudySetting,secondarySeriesToCompareInstruments}from'../../model/layout.model';import{DEFAULT_OFFSETS}from'../multi-chart.view-model';export const chartLayout2MultiChartState=context['combine'](context['key']()('dxStudiesProvider'),context['key']()('chartReactConfig'),context['key']()('timezones'),(_0x141dbd,_0x4e74d7,_0x5508ee)=>_0x4db9b8=>{const _0x33b374=_0x5508ee['currentTimezone'],_0x3cfc92=_0x141dbd['getStudies'](),_0x41b914=pipe(_0x4db9b8['charts'],array['map'](_0x374796=>{const _0x5dcb11=option['toUndefined'](getQueryParam('symbol'))??_0x374796['symbol'],_0x37e418=pipe(getQueryParam('period'),option['chain'](_0x6a91bf=>stringToAggregationPeriodSafe(_0x6a91bf)),option['getOrElse'](()=>_0x374796['aggregation']));return chartLayout2ChartInfo(_0x374796,_0x5dcb11,_0x3cfc92,_0x37e418);})),_0x48f9d6={};return _0x48f9d6['layout']=_0x4e74d7['multiChart']['enabled']?_0x4db9b8['multiChart']['layout']:'1x1',_0x48f9d6['lastChartType']=_0x41b914[0x0]['chartType'],_0x48f9d6['lastInstrument']=_0x41b914[0x0]['instrument'],_0x48f9d6['lastAggregationPeriodType']=_0x41b914[0x0]['period'],_0x48f9d6['lastGeneralSettings']=_0x41b914[0x0]['chartSettings'],_0x48f9d6['lastStudies']=_0x41b914[0x0]['studies'],_0x48f9d6['lastCompareInstruments']=[],_0x48f9d6['isInstrumentSyncEnabled']=_0x4db9b8['multiChart']['sync']['instrument'],_0x48f9d6['isChartTypeSyncEnabled']=_0x4db9b8['multiChart']['sync']['chartType'],_0x48f9d6['isAggregationPeriodTypeSyncEnabled']=_0x4db9b8['multiChart']['sync']['aggregation'],_0x48f9d6['isGeneralSettingsSyncEnabled']=_0x4db9b8['multiChart']['sync']['appearance'],_0x48f9d6['isStudiesSyncEnabled']=_0x4db9b8['multiChart']['sync']['studies'],_0x48f9d6['isTimezoneSyncEnabled']=!![],_0x48f9d6['lastTimezone']=_0x33b374,_0x48f9d6['highlightedChartId']=none,_0x48f9d6['charts']=_0x41b914,_0x48f9d6['maximizedChartId']=none,_0x48f9d6['offsets']=DEFAULT_OFFSETS,_0x48f9d6['drawingMode']=_0x4db9b8['global']['drawingMode'],_0x48f9d6['magnetMode']=_0x4db9b8['global']['magnetMode'],_0x48f9d6;});export const chartLayout2ChartInfo=(_0x401a3a,_0x4cbf97,_0x11f4c1,_0x122ad4)=>{return{'id':_0x401a3a['index']+'','chartType':_0x401a3a['chartType'],'instrument':option['fromNullable'](_0x4cbf97),'period':_0x122ad4,'timeframePreset':_0x401a3a['timeframePreset'],'extendedHours':_0x401a3a['extendedHours'],'chartSettings':{'chartCore':cloneUnsafe(_0x401a3a['chartCoreConfig']),'chartReact':cloneUnsafe(_0x401a3a['chartReactConfig'])},'compareInstruments':cloneUnsafe(secondarySeriesToCompareInstruments(_0x401a3a['secondarySeries'])),'studies':mapChartStudiesLayouts2TStudySetting(_0x401a3a['studies'],_0x11f4c1),'drawings':_0x401a3a['drawings'],'layers':_0x401a3a['layers'],'panes':_0x401a3a['panes'],'xScaleViewport':_0x401a3a['xScaleViewport']};};export const createMockChartInstance=()=>{const _0x85096c={'get':(_0x1be498,_0x41195c)=>{if(_0x41195c==='bind')return()=>constVoid;return new Proxy(()=>EMPTY,_0x85096c);}};return new Proxy(()=>of(),_0x85096c);};