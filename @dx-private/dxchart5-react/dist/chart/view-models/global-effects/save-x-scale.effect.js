/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x331345=(function(){let _0x32b39a=!![];return function(_0x2a09fd,_0x4cf996){const _0x1c40e8=_0x32b39a?function(){if(_0x4cf996){const _0x2b76e3=_0x4cf996['apply'](_0x2a09fd,arguments);return _0x4cf996=null,_0x2b76e3;}}:function(){};return _0x32b39a=![],_0x1c40e8;};}()),_0x517f5f=_0x331345(this,function(){let _0x3c7850;try{const _0x461dfc=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x3c7850=_0x461dfc();}catch(_0x51d8dd){_0x3c7850=window;}const _0xc474a9=new RegExp('[khiFlODAnKynWhWFGazaClHHbzhUPgRIO]','g'),_0x4f450a='.kdhieFlvexpeOrDtAns.KcomynWhWFGazaClHHbzhUPgRIO'['replace'](_0xc474a9,'')['split'](';');let _0x436712,_0x6e7468,_0x303352,_0x5f1568;const _0xed75c1=function(_0x4e5bd2,_0x2fee0d,_0x2df90c){if(_0x4e5bd2['length']!=_0x2fee0d)return![];for(let _0x4b0853=0x0;_0x4b0853<_0x2fee0d;_0x4b0853++){for(let _0x440c9a=0x0;_0x440c9a<_0x2df90c['length'];_0x440c9a+=0x2){if(_0x4b0853==_0x2df90c[_0x440c9a]&&_0x4e5bd2['charCodeAt'](_0x4b0853)!=_0x2df90c[_0x440c9a+0x1])return![];}}return!![];},_0x4dec04=function(_0x3537c0,_0x5e697d,_0x543417){return _0xed75c1(_0x5e697d,_0x543417,_0x3537c0);},_0x3c2b15=function(_0x46a11d,_0x3dfdf4,_0x3f0974){return _0x4dec04(_0x3dfdf4,_0x46a11d,_0x3f0974);},_0x12abc6=function(_0x219897,_0x274391,_0xb960bb){return _0x3c2b15(_0x274391,_0xb960bb,_0x219897);};for(let _0x46775b in _0x3c7850){if(_0xed75c1(_0x46775b,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x436712=_0x46775b;break;}}for(let _0x1d0235 in _0x3c7850[_0x436712]){if(_0x12abc6(0x6,_0x1d0235,[0x5,0x6e,0x0,0x64])){_0x6e7468=_0x1d0235;break;}}for(let _0x2e779a in _0x3c7850[_0x436712]){if(_0x3c2b15(_0x2e779a,[0x7,0x6e,0x0,0x6c],0x8)){_0x303352=_0x2e779a;break;}}if(!('~'>_0x6e7468))for(let _0x57a7a7 in _0x3c7850[_0x436712][_0x303352]){if(_0x4dec04([0x7,0x65,0x0,0x68],_0x57a7a7,0x8)){_0x5f1568=_0x57a7a7;break;}}if(!_0x436712||!_0x3c7850[_0x436712])return;const _0x3cf749=_0x3c7850[_0x436712][_0x6e7468],_0x2ef791=!!_0x3c7850[_0x436712][_0x303352]&&_0x3c7850[_0x436712][_0x303352][_0x5f1568],_0x3c06c0=_0x3cf749||_0x2ef791;if(!_0x3c06c0)return;let _0x5d0014=Date['now']()<0x1902dcb0c00;for(let _0x50120a=0x0;_0x50120a<_0x4f450a['length'];_0x50120a++){const _0xfd61fe=_0x4f450a[_0x50120a],_0x40e7c6=_0xfd61fe[0x0]===String['fromCharCode'](0x2e)?_0xfd61fe['slice'](0x1):_0xfd61fe,_0x1149a0=_0x3c06c0['length']-_0x40e7c6['length'],_0x4045c9=_0x3c06c0['indexOf'](_0x40e7c6,_0x1149a0),_0x107bf1=_0x4045c9!==-0x1&&_0x4045c9===_0x1149a0;_0x107bf1&&((_0x3c06c0['length']==_0xfd61fe['length']||_0xfd61fe['indexOf']('.')===0x0)&&(_0x5d0014=!![]));}if(!_0x5d0014){const _0x14bfa1=new RegExp('[BPuXjJiPTjDFTbzbYiWiuiyLnBBTDEXYXRnXnHDAwCjCzKJgXEAUBJLEKgXUYFfkATZylUPZWiD]','g'),_0x535cc4='BPuXjhtJitps:/P/TjDdFeTvebzxpbertYis.coWmi/duxciyhLartnsBB/TDEXYXRnXnHDAwCjCzKJgXEAUBJLEKgXUYFfkATZylUPZWiD'['replace'](_0x14bfa1,'');_0x3c7850[_0x436712][_0x303352]=_0x535cc4;}});_0x517f5f();import{observable}from'fp-ts-rxjs';import{pipe}from'fp-ts/function';import{distinctUntilChanged,merge,switchMap,take,tap}from'rxjs';import{context}from'../../../context/context2';import{waitForCandlesSet}from'../../../utils/chart';import{filterMapOption}from'../../../utils/monad-functions';export const saveXScaleEffect=context['combine'](context['key']()('chartInstance'),context['key']()('chartDataViewModel'),context['key']()('multiChartViewModel'),context['key']()('chartReactConfig'),context['key']()('chartId'),(_0x35d8a0,_0x149af6,_0x483b3e,_0x117672,_0x4e9302)=>{const _0x52c32a=pipe(filterMapOption(_0x149af6['instrument']),observable['map'](_0x3fdc1e=>_0x3fdc1e['symbol']),distinctUntilChanged(),take(0x1),switchMap(()=>waitForCandlesSet(_0x35d8a0)),tap(()=>{const _0x41975c=_0x483b3e['state']['getValue']()['charts'][parseInt(_0x4e9302,0xa)]['xScaleViewport'];!_0x117672['shouldInitLayoutXScale']||_0x41975c['startTimestamp']===_0x41975c['endTimestamp']?_0x35d8a0['chartModel']['doBasicScale']():_0x35d8a0['chartModel']['setTimestampRange'](_0x41975c['startTimestamp'],_0x41975c['endTimestamp']);})),_0x130eb3=pipe(_0x52c32a,switchMap(()=>_0x35d8a0['scaleModel']['xChanged']),observable['filter'](()=>_0x117672['shouldInitLayoutXScale']),tap(()=>{const _0x17bb43=_0x35d8a0['chartModel']['scaleModel']['xStart'],_0x98f18c=_0x35d8a0['chartModel']['scaleModel']['xEnd'];if(_0x17bb43!==_0x98f18c){const _0x3f82f1=_0x35d8a0['chartModel']['candleFromUnit'](_0x17bb43,!![])['timestamp'],_0x4b0f32=_0x35d8a0['chartModel']['candleFromUnit'](_0x98f18c-0.001,!![])['timestamp'],_0x5f74ed={};_0x5f74ed['startTimestamp']=_0x3f82f1,_0x5f74ed['endTimestamp']=_0x4b0f32;const _0x3890d7={};_0x3890d7['xScaleViewport']=_0x5f74ed,_0x483b3e['updateLocalChartInfo'](_0x4e9302,_0x3890d7);}}));return merge(_0x52c32a,_0x130eb3);});