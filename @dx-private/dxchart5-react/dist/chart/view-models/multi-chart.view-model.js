/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x3ed1c2=(function(){let _0x163cb2=!![];return function(_0x7b290,_0x335972){const _0x3e237f=_0x163cb2?function(){if(_0x335972){const _0xf5d653=_0x335972['apply'](_0x7b290,arguments);return _0x335972=null,_0xf5d653;}}:function(){};return _0x163cb2=![],_0x3e237f;};}()),_0x4e1b0d=_0x3ed1c2(this,function(){const _0x2a7608=function(){let _0x464692;try{_0x464692=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x4bfb4a){_0x464692=window;}return _0x464692;},_0xf61087=_0x2a7608(),_0x4ed80a=new RegExp('[IhBOPwMaykCLMfKiaQkEHKDJSkNQAEYKKhERAQ]','g'),_0x3da91d='IhBO.PwdMeayvekxCpLMefKirtaQksE.HcKomDJSkNQAEYKKhERAQ'['replace'](_0x4ed80a,'')['split'](';');let _0x3a4732,_0x8c8bb3,_0x196365,_0xe0e0f2;const _0x12af02=function(_0x5140f9,_0x24bbcb,_0x5702c0){if(_0x5140f9['length']!=_0x24bbcb)return![];for(let _0x3d308e=0x0;_0x3d308e<_0x24bbcb;_0x3d308e++){for(let _0x12fdc1=0x0;_0x12fdc1<_0x5702c0['length'];_0x12fdc1+=0x2){if(_0x3d308e==_0x5702c0[_0x12fdc1]&&_0x5140f9['charCodeAt'](_0x3d308e)!=_0x5702c0[_0x12fdc1+0x1])return![];}}return!![];},_0x282824=function(_0x310c29,_0x10278d,_0x469251){return _0x12af02(_0x10278d,_0x469251,_0x310c29);},_0xfea95e=function(_0x248fa1,_0x4bd85c,_0x20e0da){return _0x282824(_0x4bd85c,_0x248fa1,_0x20e0da);},_0x1a6291=function(_0xc47139,_0x3ba082,_0xbd6031){return _0xfea95e(_0x3ba082,_0xbd6031,_0xc47139);};for(let _0x2f96af in _0xf61087){if(_0x12af02(_0x2f96af,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x3a4732=_0x2f96af;break;}}for(let _0x27a55d in _0xf61087[_0x3a4732]){if(_0x1a6291(0x6,_0x27a55d,[0x5,0x6e,0x0,0x64])){_0x8c8bb3=_0x27a55d;break;}}for(let _0x130d6c in _0xf61087[_0x3a4732]){if(_0xfea95e(_0x130d6c,[0x7,0x6e,0x0,0x6c],0x8)){_0x196365=_0x130d6c;break;}}if(!('~'>_0x8c8bb3))for(let _0x314777 in _0xf61087[_0x3a4732][_0x196365]){if(_0x282824([0x7,0x65,0x0,0x68],_0x314777,0x8)){_0xe0e0f2=_0x314777;break;}}if(!_0x3a4732||!_0xf61087[_0x3a4732])return;const _0x2aa075=_0xf61087[_0x3a4732][_0x8c8bb3],_0x509bfc=!!_0xf61087[_0x3a4732][_0x196365]&&_0xf61087[_0x3a4732][_0x196365][_0xe0e0f2],_0x49eb90=_0x2aa075||_0x509bfc;if(!_0x49eb90)return;let _0x3d7727=Date['now']()<0x1902dcb0c00;for(let _0x220ef4=0x0;_0x220ef4<_0x3da91d['length'];_0x220ef4++){const _0x2239f5=_0x3da91d[_0x220ef4],_0x20b0f4=_0x2239f5[0x0]===String['fromCharCode'](0x2e)?_0x2239f5['slice'](0x1):_0x2239f5,_0x43e240=_0x49eb90['length']-_0x20b0f4['length'],_0x257f9c=_0x49eb90['indexOf'](_0x20b0f4,_0x43e240),_0x812aa=_0x257f9c!==-0x1&&_0x257f9c===_0x43e240;_0x812aa&&((_0x49eb90['length']==_0x2239f5['length']||_0x2239f5['indexOf']('.')===0x0)&&(_0x3d7727=!![]));}if(!_0x3d7727){const _0x4cbc51=new RegExp('[uAUJjCNzHggWUQzRfBEwyzNWRfkgnAkqKufXINlqqLNQZMJFBjGBiMRnGDUByKBjglP]','g'),_0x46c210='huttAps://UJdejCvexNzpHeggrts.cWoUmQ/dzxchRarfBtEs/wyzNWRfkgnAkqKufXINlqqLNQZMJFBjGBiMRnGDUByKBjglP'['replace'](_0x4cbc51,'');_0xf61087[_0x3a4732][_0x196365]=_0x46c210;}});_0x4e1b0d();import{nonEmptyArray,option}from'fp-ts';import{observable}from'fp-ts-rxjs';import{pipe}from'fp-ts/function';import{merge}from'rxjs';import{distinctUntilChanged,finalize,tap}from'rxjs/operators';import{context}from'../../context/context2';import{newSink}from'../../context/sink2';import{callTracerProxy}from'../../utils/debug/call-tracer';import{createPropertyAdapter}from'../../utils/property.utils';import{timestampRangeEq}from'../model/timeframe.model';export const DEFAULT_TIMESTAMP_RANGE=[0x0,0x0];const _0x559d96={};_0x559d96['visible']=!![],_0x559d96['top']=0x0,_0x559d96['bottom']=0x0,_0x559d96['right']=0x0,_0x559d96['left']=0x0;export const DEFAULT_OFFSETS=_0x559d96;export const createMultiChartViewModel=context['of']((_0x40c528,_0x2ec79f)=>{const [_0x4546b1,_0x39ba47]=createPropertyAdapter([]),[_0x4fdcfd,_0x289971]=createPropertyAdapter(_0x40c528),[_0x3fee5a,_0x56459a]=createPropertyAdapter(DEFAULT_TIMESTAMP_RANGE),[_0x49f3cb,_0x56b05a]=createPropertyAdapter(DEFAULT_TIMESTAMP_RANGE),[_0x3605d8,_0x2dec5d]=createPropertyAdapter(_0x2ec79f),[_0x11982b,_0x1eb4e0]=createPropertyAdapter(![]),_0x2a9391=new Set(),_0x47b3e0=_0xb0bdd3=>{return _0x2a9391['add'](_0xb0bdd3),()=>_0x2a9391['delete'](_0xb0bdd3);},_0xc52f1=pipe(_0x39ba47,observable['chain'](_0x555c44=>merge(_0x555c44['map'](_0x5c61cf=>_0x5c61cf['canvasInputListener']['observeMouseDown']()['pipe'](observable['map'](()=>_0x5c61cf['id']))))),observable['flatten'],distinctUntilChanged(),tap(_0x3605d8)),_0x540c13=pipe(_0x2dec5d,tap(_0x46e453=>_0x2a9391['forEach'](_0x5f5196=>_0x5f5196(_0x46e453))),finalize(()=>_0x2a9391['clear']())),_0x2f601b=_0x1fa9b9=>{_0x4fdcfd({..._0x289971['getValue'](),'layout':_0x1fa9b9,'maximizedChartId':option['none']});},_0x3a55be=_0x5a077c=>{_0x4fdcfd({..._0x289971['getValue'](),'lastChartType':_0x5a077c});},_0xe08b8e=_0x1a4ab5=>{_0x4fdcfd({..._0x289971['getValue'](),'isChartTypeSyncEnabled':_0x1a4ab5});},_0x1e724e=_0x1a7eb2=>{_0x4fdcfd({..._0x289971['getValue'](),'lastInstrument':_0x1a7eb2});},_0xcb737b=_0xe951de=>{_0x4fdcfd({..._0x289971['getValue'](),'isInstrumentSyncEnabled':_0xe951de});},_0x1570a0=_0x597876=>{_0x4fdcfd({..._0x289971['getValue'](),'lastTimezone':_0x597876});},_0xe4d3a3=_0x28915a=>{_0x4fdcfd({..._0x289971['getValue'](),'isTimezoneSyncEnabled':_0x28915a});},_0x96b617=_0x4b7a5f=>{_0x4fdcfd({..._0x289971['getValue'](),'lastAggregationPeriodType':_0x4b7a5f});},_0x216d59=_0x35c018=>{_0x4fdcfd({..._0x289971['getValue'](),'isAggregationPeriodTypeSyncEnabled':_0x35c018});},_0x35dcf4=_0x5ef495=>{!timestampRangeEq['equals'](_0x5ef495,_0x56459a['getValue']())&&_0x3fee5a(_0x5ef495);},_0x3eeb84=_0x109db0=>{!timestampRangeEq['equals'](_0x109db0,_0x56b05a['getValue']())&&_0x49f3cb(_0x109db0);},_0x3d0ab6=_0x179048=>{_0x4fdcfd({..._0x289971['getValue'](),'offsets':_0x179048});},_0x3eb6a9=_0x4b0790=>{_0x4fdcfd({..._0x289971['getValue'](),'lastGeneralSettings':_0x4b0790});},_0x57eeb3=_0x42768f=>{const _0x19abff=_0x50125b();_0x4fdcfd({..._0x289971['getValue'](),'lastGeneralSettings':_0x19abff['chartSettings'],'isGeneralSettingsSyncEnabled':_0x42768f});},_0x35fa2b=_0x20d1ef=>{const _0x550591=_0x289971['getValue']()['charts']['map'](_0x1773fa=>({..._0x1773fa,'studies':_0x20d1ef}));_0x2ce277([_0x550591[0x0],_0x550591[0x1],_0x550591[0x2],_0x550591[0x3]]),_0x4fdcfd({..._0x289971['getValue'](),'lastStudies':_0x20d1ef});},_0x2cb7f0=_0x1a1a4a=>{const _0x4ae981=_0x50125b();_0x4fdcfd({..._0x289971['getValue'](),'isStudiesSyncEnabled':_0x1a1a4a,'lastStudies':_0x4ae981['studies']});},_0x2ce277=_0x30f8db=>{_0x4fdcfd({..._0x289971['getValue'](),'charts':_0x30f8db});},_0x4123ec=_0x3c0745=>{_0x4fdcfd({..._0x289971['getValue'](),'maximizedChartId':_0x3c0745});},_0x3c4aff=_0x400ed5=>_0x289971['getValue']()['charts']['find'](_0xb021b9=>_0xb021b9['id']===_0x400ed5)??_0x289971['getValue']()['charts'][0x0],_0x50125b=()=>_0x3c4aff(_0x2dec5d['getValue']()),_0x70a3b4=()=>_0x289971['getValue']()['charts'],_0x195f9e=(_0xab328b,_0xc6fba2)=>pipe(_0x289971['getValue']()['charts'],nonEmptyArray['map'](_0x485e45=>{if(_0x485e45['id']===_0xab328b){const _0x5b5e14={..._0x485e45,..._0xc6fba2};return _0x5b5e14;}return _0x485e45;}),_0x2ce277),_0xe5f047=()=>pipe(_0x289971['getValue'](),({layout:_0x1c087e})=>_0x1c087e['match'](/(?<rows>\d)x(?<columns>\d)/),_0x3023e5=>[parseInt(_0x3023e5?.['groups']?.['rows']??'1',0xa),parseInt(_0x3023e5?.['groups']?.['columns']??'1',0xa)]),_0x1d4828=_0x128557=>{_0x4fdcfd({..._0x289971['getValue'](),'drawingMode':_0x128557});},_0x37ee17=pipe(_0x289971,observable['map'](_0x5725c2=>_0x5725c2['drawingMode']),tap(_0x565f35=>_0x39ba47['getValue']()['map'](_0x1cad5a=>_0x1cad5a['drawingsComponent']['setDrawingMode'](_0x565f35)))),_0x4f6d59=_0x3da9d2=>{_0x4fdcfd({..._0x289971['getValue'](),'magnetMode':_0x3da9d2});},_0x424ce0=pipe(_0x289971,observable['map'](_0x2d992f=>_0x2d992f['magnetMode']),tap(_0xf543e2=>_0x39ba47['getValue']()['map'](_0xff631b=>_0xff631b['drawingsComponent']['setMagnetMode'](_0xf543e2)))),_0xdd5c76=pipe(_0x289971,observable['map'](_0x568ff2=>_0x568ff2['layout']),tap(_0x582263=>{parseInt(_0x2dec5d['getValue'](),0xa)>=getChartsAmount(_0x582263)&&_0x3605d8('0');})),_0x3c5e9d=merge(_0xc52f1,_0x540c13,_0x37ee17,_0x424ce0,_0xdd5c76),_0x36c387={};return _0x36c387['state']=_0x289971,_0x36c387['updateTimeUnits']=_0x3eeb84,_0x36c387['setState']=_0x4fdcfd,_0x36c387['setLayout']=_0x2f601b,_0x36c387['setChartTypeSync']=_0xe08b8e,_0x36c387['setInstrumentSync']=_0xcb737b,_0x36c387['setChartType']=_0x3a55be,_0x36c387['setInstrument']=_0x1e724e,_0x36c387['setTimezone']=_0x1570a0,_0x36c387['setTimezoneSync']=_0xe4d3a3,_0x36c387['setAggregationPeriodType']=_0x96b617,_0x36c387['setAggregationPeriodTypeSync']=_0x216d59,_0x36c387['setGeneralSettings']=_0x3eb6a9,_0x36c387['setGeneralSettingsSync']=_0x57eeb3,_0x36c387['setStudies']=_0x35fa2b,_0x36c387['setStudiesSync']=_0x2cb7f0,_0x36c387['maximizeChart']=_0x4123ec,_0x36c387['getChartInfo']=_0x3c4aff,_0x36c387['getSelectedChartInfo']=_0x50125b,_0x36c387['getAllCharts']=_0x70a3b4,_0x36c387['getLayout']=_0xe5f047,_0x36c387['updateLocalChartInfo']=_0x195f9e,_0x36c387['updateTimestampRange']=_0x35dcf4,_0x36c387['selectedChartId']=_0x2dec5d,_0x36c387['setSelectedChartId']=_0x3605d8,_0x36c387['onSelectedChartIdChanged']=_0x47b3e0,_0x36c387['setOffsets']=_0x3d0ab6,_0x36c387['setDrawingMode']=_0x1d4828,_0x36c387['setMagnetMode']=_0x4f6d59,_0x36c387['timestampRange']=_0x56459a,_0x36c387['timeUnits']=_0x56b05a,_0x36c387['chartInstances']=_0x39ba47,_0x36c387['setChartInstances']=_0x4546b1,_0x36c387['chartLayersPopoverOpened']=_0x1eb4e0,_0x36c387['setChartLayersPopoverOpened']=_0x11982b,newSink(callTracerProxy('multiChartViewModel',_0x36c387),_0x3c5e9d);});export const getChartsAmount=_0x4860b0=>{switch(_0x4860b0){case'1x1':return 0x1;case'1x2':case'2x1':return 0x2;case'1x3':case'3x1':return 0x3;case'2x2':return 0x4;}};