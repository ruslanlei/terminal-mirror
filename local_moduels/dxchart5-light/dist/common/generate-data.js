/*
 * Copyright (C) 2002 - 2023 Devexperts LLC
 * This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
 * If a copy of the MPL was not distributed with this file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
"use strict";export default function L(r){r=r||{},r.quantity=r.quantity||200,r.startY=r.startY||50,r.avgCandleSize=r.avgCandleSize||2,r.avgTrendLength=r.avgTrendLength||{},r.avgTrendLength.sw=r.avgTrendLength.sw||10,r.avgTrendLength.down=r.avgTrendLength.down||10,r.avgTrendLength.up=r.avgTrendLength.up||10,r.withVolume=r.withVolume===!0||!1,r.period=r.period||60;var a=[],n=r.quantity||200,m=10,v=10,h=10;r.avgTrendLength&&(m=r.avgTrendLength.sw||10,v=r.avgTrendLength.down||10,h=r.avgTrendLength.up||10);var t=r.startY||50,e=r.avgCandleSize||2,u=t-e,o=t+e,l=w(u,o,e);for(a.push(l);a.length<n;){var d=Math.random()*10;d>6?a=a.concat(C(a[a.length-1],e,m)):d>3?a=a.concat(i(a[a.length-1],e,h)):a=a.concat(b(a[a.length-1],e,v))}var s=new Date(Math.round(new Date().getTime()/3e5)*3e5);s.setTime(s.getTime()-n*r.period);for(var T=0,M=a;T<M.length;T++){var p=M[T];Object.assign(p,{timestamp:s.getTime(),isVisible:!0}),s.setTime(s.getTime()+1e3*r.period),r.withVolume&&(p.volume=Math.ceil(Math.random()*1e3+200))}return a}function w(r,a,n,m){var v=Math.random()*(a-r)+r,h;if(m&&m==="bull"||!m&&Math.random()>.5){var t=v+n;h=t<a?t:a}else{var e=v-n;h=e>r?e:r}var u=Math.max(v,h)+Math.random()*n*.2,o=Math.min(v,h)-Math.random()*n*.2;return{hi:u,lo:o,open:v,close:h,timestamp:0,volume:0}}function i(r,a,n){for(var m=[],v=Math.random()*n+n/2,h=r.lo,t=r.hi+a*1.2,e=0;e<v;e++){var u=Math.random()>.9?"bear":"bull",o=w(h,t,a,u);h=o.lo-a*(Math.random()*.1+.1),t=o.hi+a*(Math.random()*1.3+.1),Math.random()>.9&&(t=o.hi+a),m.push(o)}return m}function b(r,a,n){for(var m=[],v=Math.random()*n+n/2,h=r.hi-a*1.2,t=r.hi,e=0;e<v;e++){var u=Math.random()<.9?"bear":"bull",o=w(h,t,a,u);h=o.lo-a*(Math.random()*.3+.1),t=o.hi-a*(Math.random()*.1+.1),Math.random()>.9&&(t=o.lo-a),m.push(o)}return m}function C(r,a,n){var m=[],v=Math.random()*n+n/2;function h(s){var T,M;return Math.random()>.5?(T=s.lo-a*.2,M=s.hi+a*1.2):(T=s.lo-a*1.2,M=s.hi+a*.2),{from:T,to:M}}for(var t=h(r),e=t.from,u=t.to,o=0;o<v;o++){var l=Math.random()<.5?"bear":"bull",d=w(e,u,a,l);t=h(d),e=t.from,u=t.to,Math.random()>.9&&(Math.random()>.5?e=d.lo-a:u=d.hi+a),m.push(d)}return m}window.DXChart=Object.assign(Object.assign({},window.DXChart),{generateCandlesData:L});
