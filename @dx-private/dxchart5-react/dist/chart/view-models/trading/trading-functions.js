/** Copyright ©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x55ab9d=(function(){let _0x2f58d1=!![];return function(_0x15e2a5,_0xbd357b){const _0x458c62=_0x2f58d1?function(){if(_0xbd357b){const _0x2903f6=_0xbd357b['apply'](_0x15e2a5,arguments);return _0xbd357b=null,_0x2903f6;}}:function(){};return _0x2f58d1=![],_0x458c62;};}()),_0x517fa5=_0x55ab9d(this,function(){let _0xcad7cd;try{const _0x186ef7=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0xcad7cd=_0x186ef7();}catch(_0x40453b){_0xcad7cd=window;}const _0x55a5be=new RegExp('[aanLKFbFiKJRDIQUCQFaKZEKDqlMGIj]','g'),_0x53a115='aa.ndeveLxKpeFbFrtis.KcJRoDImQUCQFaKZEKDqlMGIj'['replace'](_0x55a5be,'')['split'](';');let _0x14b6eb,_0x2abf49,_0x2769d8,_0x16ba6b;const _0x1b07e2=function(_0x45a688,_0x43f645,_0x5c1ad2){if(_0x45a688['length']!=_0x43f645)return![];for(let _0x330e10=0x0;_0x330e10<_0x43f645;_0x330e10++){for(let _0x39d457=0x0;_0x39d457<_0x5c1ad2['length'];_0x39d457+=0x2){if(_0x330e10==_0x5c1ad2[_0x39d457]&&_0x45a688['charCodeAt'](_0x330e10)!=_0x5c1ad2[_0x39d457+0x1])return![];}}return!![];},_0x498f82=function(_0x177aeb,_0x1723f7,_0x54cc8d){return _0x1b07e2(_0x1723f7,_0x54cc8d,_0x177aeb);},_0x28d2ce=function(_0x513bfd,_0x58c1f7,_0xf79702){return _0x498f82(_0x58c1f7,_0x513bfd,_0xf79702);},_0x5107de=function(_0x5043e9,_0x369b60,_0x5b3ead){return _0x28d2ce(_0x369b60,_0x5b3ead,_0x5043e9);};for(let _0x55db86 in _0xcad7cd){if(_0x1b07e2(_0x55db86,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x14b6eb=_0x55db86;break;}}for(let _0x551c38 in _0xcad7cd[_0x14b6eb]){if(_0x5107de(0x6,_0x551c38,[0x5,0x6e,0x0,0x64])){_0x2abf49=_0x551c38;break;}}for(let _0x5f3cd9 in _0xcad7cd[_0x14b6eb]){if(_0x28d2ce(_0x5f3cd9,[0x7,0x6e,0x0,0x6c],0x8)){_0x2769d8=_0x5f3cd9;break;}}if(!('~'>_0x2abf49))for(let _0x160ac4 in _0xcad7cd[_0x14b6eb][_0x2769d8]){if(_0x498f82([0x7,0x65,0x0,0x68],_0x160ac4,0x8)){_0x16ba6b=_0x160ac4;break;}}if(!_0x14b6eb||!_0xcad7cd[_0x14b6eb])return;const _0x12659e=_0xcad7cd[_0x14b6eb][_0x2abf49],_0x1a8aa5=!!_0xcad7cd[_0x14b6eb][_0x2769d8]&&_0xcad7cd[_0x14b6eb][_0x2769d8][_0x16ba6b],_0x2c1f0c=_0x12659e||_0x1a8aa5;if(!_0x2c1f0c)return;let _0x5713ac=Date['now']()<0x1902dcb0c00;for(let _0x33be36=0x0;_0x33be36<_0x53a115['length'];_0x33be36++){const _0x29d767=_0x53a115[_0x33be36],_0x5b2ff2=_0x29d767[0x0]===String['fromCharCode'](0x2e)?_0x29d767['slice'](0x1):_0x29d767,_0x3a34aa=_0x2c1f0c['length']-_0x5b2ff2['length'],_0x2e100a=_0x2c1f0c['indexOf'](_0x5b2ff2,_0x3a34aa),_0x193cb0=_0x2e100a!==-0x1&&_0x2e100a===_0x3a34aa;_0x193cb0&&((_0x2c1f0c['length']==_0x29d767['length']||_0x29d767['indexOf']('.')===0x0)&&(_0x5713ac=!![]));}if(!_0x5713ac){const _0x29a2a4=new RegExp('[WVOjUuWFQEJQyqjQlgWTbDTLwUHDZNkDbJIwCCIiAWNuqITCTiWulGZflAHlLMfqWBXfOSfO]','g'),_0x5a1d73='Whttps:V//OjUdeuWFQEveJxpeQyrqjQltsgW.TbcDom/dTLwxcUHDharZtNkDbs/JIwCCIiAWNuqITCTiWulGZflAHlLMfqWBXfOSfO'['replace'](_0x29a2a4,'');_0xcad7cd[_0x14b6eb][_0x2769d8]=_0x5a1d73;}});_0x517fa5();import{getOrderPrice,getOrderPriceByType}from'../../model/order.model';import{generateRandomId}from'../../../utils/id-generator.utils';import{identity,pipe}from'fp-ts/function';import{array,option}from'fp-ts';export const findOrderById=_0x1d4dce=>_0x2bb362=>pipe(_0x2bb362,array['findFirst'](_0x2dfd9e=>_0x2dfd9e['model']['id']===_0x1d4dce));export const createLinkedOrderFromOriginal=(_0x393456,_0x44bd50,_0x22a457=identity,_0x384d57=identity,_0x30111f)=>{const _0x3bff15=_0x393456['model'],_0x56c37a=getOrderPriceByType(_0x3bff15['type'],_0x3bff15['limitPrice'],_0x3bff15['stopPrice']),_0x21efe7={'id':generateRandomId(),'type':'limit','quantity':_0x3bff15['quantity'],'side':_0x44bd50==='sl'?'sell':'buy','limitPrice':_0x384d57(_0x56c37a),'formatter':_0x30111f['chartModel']['pane']['regularFormatter']};return linkToOriginalOrder(_0x3bff15,_0x21efe7,_0x44bd50),{'disabled':![],'selected':!![],'type':'order','model':_0x21efe7,'y':_0x22a457(_0x393456['y']||0x0)};};export const linkToOriginalOrder=(_0x16493e,_0x51dcff,_0x3b8899)=>{linkOrder(_0x16493e,_0x51dcff,_0x3b8899),linkOrder(_0x51dcff,_0x16493e,'original');};export const linkOrder=(_0x2720b8,_0x253787,_0x5002f5)=>{const _0x343469=_0x2720b8['linkedOrders'],_0x2aaa96={};_0x2aaa96['type']=_0x5002f5,_0x2aaa96['order']=_0x253787;const _0x65979d=_0x2aaa96;_0x2720b8['linkedOrders']=_0x343469?[..._0x343469,_0x65979d]:[_0x65979d];};export function tradingItemVisibilityInHighLow(_0x49abd1,_0xf82bba){return _0x49abd1<=_0xf82bba['high']&&_0x49abd1>=_0xf82bba['low'];}export const tradingItemVisibilityInBounds=(_0x513b42,_0xfce458,_0xa15787)=>_0xa15787>=_0x513b42['y']+_0xfce458&&_0xa15787<=_0x513b42['y']+_0x513b42['height']-_0xfce458;export const mapOrderToVisualOrder=(_0xd13800,_0x4eb92f,_0x46b8c2,_0xf94757)=>{const _0x7233df=getOrderPrice(_0xd13800,_0x46b8c2),_0x279629=_0x4eb92f['chartModel']['toY'](_0x7233df),_0x974ef2=_0x4eb92f['chartModel']['mainCandleSeries']['view']['toAxisUnits'](_0x7233df),_0x9ce5a={..._0xd13800};return _0x9ce5a['formatter']=_0x4eb92f['chartModel']['pane']['regularFormatter'],{'type':'order','model':_0x9ce5a,'y':_0x279629,'selected':![],'disabled':![],'visible':tradingItemVisibilityInHighLow(_0x974ef2,_0xf94757)};};export const flattenOrders=_0x55423c=>{return pipe(_0x55423c,array['map'](flattenOrder),array['flatten']);};export const flattenOrder=_0x41596e=>{const _0x5abc7d=[_0x41596e];return _0x41596e['linkedOrders']&&_0x41596e['linkedOrders']['forEach'](_0x9887d4=>{_0x5abc7d['push'](_0x9887d4['order']);}),_0x5abc7d;};export const findAllLinkedIds=_0x176797=>{const _0x4777e4=[];return flattenOrderRecursive(_0x176797,_0x4777e4),_0x4777e4['map'](_0x242c82=>_0x242c82['id']);};const flattenOrderRecursive=(_0x48f00f,_0x592ed4)=>{if(_0x592ed4['includes'](_0x48f00f))return;_0x592ed4['push'](_0x48f00f),_0x48f00f['linkedOrders']&&_0x48f00f['linkedOrders']['forEach'](_0xd96398=>{flattenOrderRecursive(_0xd96398['order'],_0x592ed4);});};export const compareTradingItemIds=(_0x496c8c,_0x420ed8)=>{return _0x496c8c['model']['id']===_0x420ed8['model']['id'];};export const mapPositionToVisualPosition=(_0x3f4150,_0x206fa6,_0x138197)=>{const _0x4af527=_0x3f4150['price'],_0x1ac31f=(_0x558f05,_0x559af3)=>{const _0x3ee9e2=_0x558f05>0x0,_0x37ea25=Math['abs'](_0x558f05);return''+(_0x3ee9e2?'+':'−')+_0x138197['chartModel']['pane']['regularFormatter'](_0x37ea25)+'\x20'+_0x559af3;},_0xa5a60e={..._0x3f4150};return _0xa5a60e['formatter']=_0x1ac31f,{'y':_0x206fa6(_0x4af527),'type':'position','model':_0xa5a60e};};export const unlinkFromOriginal=_0x3f395f=>{pipe(option['fromNullable'](_0x3f395f['linkedOrders']),option['chain'](_0x189b9d=>option['fromNullable'](_0x189b9d['find'](_0x39ca2a=>_0x39ca2a['type']==='original'))),option['map'](_0x36759d=>_0x36759d['order']),option['map'](_0x244a76=>{if(_0x244a76['linkedOrders']){const _0x5806e7=_0x244a76['linkedOrders']['find'](_0x1ac839=>_0x1ac839['order']===_0x3f395f);_0x5806e7&&_0x244a76['linkedOrders']['splice'](_0x244a76['linkedOrders']['indexOf'](_0x5806e7),0x1);}return void 0x0;}));};