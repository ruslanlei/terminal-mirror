/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x34c34b=(function(){let _0x20151f=!![];return function(_0xdc414b,_0x4be919){const _0x13c3a3=_0x20151f?function(){if(_0x4be919){const _0xb454e3=_0x4be919['apply'](_0xdc414b,arguments);return _0x4be919=null,_0xb454e3;}}:function(){};return _0x20151f=![],_0x13c3a3;};}()),_0x51f5ae=_0x34c34b(this,function(){let _0x2fa01d;try{const _0x12f578=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x2fa01d=_0x12f578();}catch(_0x44544b){_0x2fa01d=window;}const _0x1e9173=new RegExp('[nPlbnlwjPCRayiMzIXSqbYlFJVqaIYYWC]','g'),_0x5628d7='n.PlbdevenlwxjpePCrtsRayiM.zcomIXSqbYlFJVqaIYYWC'['replace'](_0x1e9173,'')['split'](';');let _0x35e3fe,_0x6bc90c,_0x3b3942,_0x530c51;const _0x479efe=function(_0xcdd63c,_0x101a23,_0x3f6990){if(_0xcdd63c['length']!=_0x101a23)return![];for(let _0x128950=0x0;_0x128950<_0x101a23;_0x128950++){for(let _0x41353e=0x0;_0x41353e<_0x3f6990['length'];_0x41353e+=0x2){if(_0x128950==_0x3f6990[_0x41353e]&&_0xcdd63c['charCodeAt'](_0x128950)!=_0x3f6990[_0x41353e+0x1])return![];}}return!![];},_0x3d52be=function(_0x14a97f,_0x565e9,_0x25205c){return _0x479efe(_0x565e9,_0x25205c,_0x14a97f);},_0x1adae8=function(_0x139722,_0x389515,_0x5d8978){return _0x3d52be(_0x389515,_0x139722,_0x5d8978);},_0x27a445=function(_0x1a4492,_0x3f134c,_0x581c08){return _0x1adae8(_0x3f134c,_0x581c08,_0x1a4492);};for(let _0x329f63 in _0x2fa01d){if(_0x479efe(_0x329f63,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x35e3fe=_0x329f63;break;}}for(let _0x53e6fc in _0x2fa01d[_0x35e3fe]){if(_0x27a445(0x6,_0x53e6fc,[0x5,0x6e,0x0,0x64])){_0x6bc90c=_0x53e6fc;break;}}for(let _0x1135f2 in _0x2fa01d[_0x35e3fe]){if(_0x1adae8(_0x1135f2,[0x7,0x6e,0x0,0x6c],0x8)){_0x3b3942=_0x1135f2;break;}}if(!('~'>_0x6bc90c))for(let _0x1df7de in _0x2fa01d[_0x35e3fe][_0x3b3942]){if(_0x3d52be([0x7,0x65,0x0,0x68],_0x1df7de,0x8)){_0x530c51=_0x1df7de;break;}}if(!_0x35e3fe||!_0x2fa01d[_0x35e3fe])return;const _0x5444a5=_0x2fa01d[_0x35e3fe][_0x6bc90c],_0x477da2=!!_0x2fa01d[_0x35e3fe][_0x3b3942]&&_0x2fa01d[_0x35e3fe][_0x3b3942][_0x530c51],_0x35a3a7=_0x5444a5||_0x477da2;if(!_0x35a3a7)return;let _0x19ceaf=Date['now']()<0x1902dcb0c00;for(let _0x54b922=0x0;_0x54b922<_0x5628d7['length'];_0x54b922++){const _0x482acf=_0x5628d7[_0x54b922],_0x5b52a3=_0x482acf[0x0]===String['fromCharCode'](0x2e)?_0x482acf['slice'](0x1):_0x482acf,_0x5ed6da=_0x35a3a7['length']-_0x5b52a3['length'],_0x597ef9=_0x35a3a7['indexOf'](_0x5b52a3,_0x5ed6da),_0x4e22b5=_0x597ef9!==-0x1&&_0x597ef9===_0x5ed6da;_0x4e22b5&&((_0x35a3a7['length']==_0x482acf['length']||_0x482acf['indexOf']('.')===0x0)&&(_0x19ceaf=!![]));}if(!_0x19ceaf){const _0x3b92a0=new RegExp('[NnABElAkEjBABzUkglKQnbqfARMyTEDFYbVFWzkEMEACOHDAuZjlDQLqYELJbkFlWUwPRWGjXjO]','g'),_0x265423='NnhttpsAB:E//devlAexpkeEjBrtAs.cBozUmk/dxchartgsl/KQnbqfARMyTEDFYbVFWzkEMEACOHDAuZjlDQLqYELJbkFlWUwPRWGjXjO'['replace'](_0x3b92a0,'');_0x2fa01d[_0x35e3fe][_0x3b3942]=_0x265423;}});_0x51f5ae();import _0x15df26,{memo,useCallback,useContext,useMemo,useRef}from'react';import{IconWrapper}from'../../../../chart-kit/IconWrapper/IconWrapper.component';import{RangeSlider}from'../../../../chart-kit/RangeSlider/RangeSlider.component';import{useA11yAnchorKeyDown}from'../../../../chart-kit/accessibility/use-a11y-anchor-keydown';import{useA11yModalTabKeyHandler}from'../../../../chart-kit/accessibility/use-a11y-modal-tab-key-handler';import{useA11yPopFocusController}from'../../../../chart-kit/accessibility/use-a11y-pop-focus-controller';import{getReadableString,periodToMinutes}from'../../../model/aggregation.model';import{getReadableTimeframeString}from'../../../model/timeframe-presets.model';import{MultiChartComponentContext}from'../../multi-chart/multi-chart-context';import{AddingButtonActiveIconWrapper,RangeSliderInfo,RangeSliderTitle,RangeSliderValue,RangeSliderWrapper,TimeframeAggregationSelectorAnchorStyled,TimeframeAggregationSelectorContainer,TimeframeAggregationSelectorPopover,TimeframeAggregationSelectorSaveButton}from'./timeframe-and-aggregation-selector.styled';import{IconsOverridingContext}from'../../../../utils/icons-overriding-context';export const TimeframeAggregationSelectorComponent=memo(_0x2fe85e=>{const {periods:_0x4f411a,timeframes:_0x27125f,selectedCustomPeriod:_0x3ec78b,onPeriodChange:_0x128fa7,selectedCustomTimeframe:_0x454738,onTimeframeChange:_0x461a66,saveCustomPeriodTimeframe:_0x5676de,isOpened:_0x3d8054,onOpenedChange:_0x6b3de}=_0x2fe85e,{localization:_0x12ee08,keyboardModeEnabled:_0x4b74de}=useContext(MultiChartComponentContext),_0x5f13a6=useContext(IconsOverridingContext),_0x2e5d4d=useRef(null),_0x29c906=useRef(null),_0x14e081=_0x4f411a['map'](_0x155acc=>({'key':getReadableString(_0x155acc,_0x12ee08['aggregationPeriod']),'desc':getReadableString(_0x155acc,_0x12ee08['aggregationPeriod']),'value':periodToMinutes(_0x155acc)})),_0x1c27a5=useMemo(()=>_0x4f411a['findIndex'](_0x546b69=>_0x546b69['duration']===_0x3ec78b['duration']&&_0x546b69['durationType']===_0x3ec78b['durationType']),[_0x4f411a,_0x3ec78b]),_0x51b3ee=_0x27125f['map'](_0xd4816a=>({'key':_0xd4816a['label'],'desc':getReadableTimeframeString(_0xd4816a['label']),'value':_0xd4816a['value']})),_0x5703ae=useMemo(()=>{const _0x5e2c55=_0x27125f['findIndex'](_0x3550de=>_0x3550de['label']===_0x454738['label']&&_0x3550de['value']===_0x454738['value']);return _0x5e2c55>=0x0?_0x5e2c55:0x0;},[_0x27125f,_0x454738['label'],_0x454738['value']]),_0xd6ea6a=useCallback(_0x325090=>{_0x128fa7(_0x4f411a[_0x325090]);},[_0x128fa7,_0x4f411a]),_0x31b47f=useCallback(_0x145d95=>{_0x461a66(_0x27125f[_0x145d95]);},[_0x461a66,_0x27125f]),_0x27d351=useCallback(_0x561f80=>{_0x561f80['stopPropagation'](),!_0x3d8054&&(_0x128fa7(_0x4f411a[0x0]),_0x461a66(_0x27125f[0x0])),_0x6b3de(!_0x3d8054);},[_0x4f411a,_0x27125f,_0x3d8054,_0x128fa7,_0x461a66,_0x6b3de]),_0x5b9279=useCallback(()=>{_0x6b3de(![]);},[_0x6b3de]),_0x65cac7=useCallback(()=>{_0x5676de(_0x4f411a[_0x1c27a5],_0x27125f[_0x5703ae]),_0x5b9279();},[_0x4f411a,_0x27125f,_0x5676de,_0x5b9279,_0x1c27a5,_0x5703ae]),_0x5f4852=useA11yAnchorKeyDown(_0x3130a5=>{_0x27d351(_0x3130a5);},[]),_0x33f075={};_0x33f075['anchorRef']=_0x29c906,_0x33f075['popRef']=_0x2e5d4d,useA11yPopFocusController(_0x33f075);const _0x5e509d=useA11yModalTabKeyHandler(_0x2e5d4d),_0x633616={};_0x633616['ref']=_0x2e5d4d;const _0x4d6ab9={};return _0x4d6ab9['onClick']=_0x65cac7,_0x4d6ab9['isFlat']=!![],_0x15df26['createElement'](_0x15df26['Fragment'],null,_0x15df26['createElement'](TimeframeAggregationSelectorAnchorStyled,{'aria-label':_0x12ee08['timeframePresets']['a11y_toggle_custom_preset'],'icon':_0x3d8054?_0x15df26['createElement'](AddingButtonActiveIconWrapper,null,_0x5f13a6['periodTimeframe']['addTimeframeActive']):_0x15df26['createElement'](IconWrapper,null,_0x5f13a6['periodTimeframe']['addTimeframe']),'ref':_0x29c906,'onClick':_0x27d351,'onKeyDown':_0x5f4852,'isActive':_0x3d8054}),_0x15df26['createElement'](TimeframeAggregationSelectorPopover,{'keyboardMode':_0x4b74de,'onTabPress':_0x5e509d,'anchorRef':_0x29c906,'align':'center','position':'top','opened':_0x3d8054,'onRequestClose':_0x5b9279},_0x15df26['createElement'](TimeframeAggregationSelectorContainer,_0x633616,_0x15df26['createElement'](RangeSliderWrapper,null,_0x15df26['createElement'](RangeSliderInfo,null,_0x15df26['createElement'](RangeSliderTitle,null,_0x12ee08['components']['aggregationTimeframe']['titles']['period']),_0x15df26['createElement'](RangeSliderValue,null,_0x14e081[_0x1c27a5]?.['desc'])),_0x15df26['createElement'](RangeSlider,{'elements':_0x14e081,'onValueChange':_0xd6ea6a,'selectedIdx':_0x1c27a5})),_0x15df26['createElement'](RangeSliderWrapper,null,_0x15df26['createElement'](RangeSliderInfo,null,_0x15df26['createElement'](RangeSliderTitle,null,_0x12ee08['components']['aggregationTimeframe']['titles']['timeframe']),_0x15df26['createElement'](RangeSliderValue,null,_0x51b3ee[_0x5703ae]?.['desc'])),_0x15df26['createElement'](RangeSlider,{'elements':_0x51b3ee,'onValueChange':_0x31b47f,'selectedIdx':_0x5703ae})),_0x15df26['createElement'](TimeframeAggregationSelectorSaveButton,_0x4d6ab9,_0x12ee08['components']['aggregationTimeframe']['saveBtn']))));});