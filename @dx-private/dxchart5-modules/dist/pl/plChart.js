/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0xfebae4=(function(){let _0x40e8c8=!![];return function(_0x113071,_0x404195){const _0x1bf8c6=_0x40e8c8?function(){if(_0x404195){const _0x49205a=_0x404195['apply'](_0x113071,arguments);return _0x404195=null,_0x49205a;}}:function(){};return _0x40e8c8=![],_0x1bf8c6;};}()),_0x4e04f2=_0xfebae4(this,function(){let _0x5f27fd;try{const _0x34f9d6=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x5f27fd=_0x34f9d6();}catch(_0x51eb63){_0x5f27fd=window;}const _0xd6af74=new RegExp('[MCQBCHMlOIVHBRgGNOaMfHgIKfHLCUBBOhH]','g'),_0x52cd1a='.deMCQvexpBeCrtHMlOsI.VcomHBRgGNOaMfHgIKfHLCUBBOhH'['replace'](_0xd6af74,'')['split'](';');let _0xb1c4af,_0x175114,_0x51a849,_0x2ec28e;const _0x3a3f9b=function(_0x4feccc,_0x2f75f0,_0x422c8e){if(_0x4feccc['length']!=_0x2f75f0)return![];for(let _0x2999c8=0x0;_0x2999c8<_0x2f75f0;_0x2999c8++){for(let _0x3ec34c=0x0;_0x3ec34c<_0x422c8e['length'];_0x3ec34c+=0x2){if(_0x2999c8==_0x422c8e[_0x3ec34c]&&_0x4feccc['charCodeAt'](_0x2999c8)!=_0x422c8e[_0x3ec34c+0x1])return![];}}return!![];},_0x2c4caf=function(_0x21f905,_0x42dfef,_0x54c64e){return _0x3a3f9b(_0x42dfef,_0x54c64e,_0x21f905);},_0x14420e=function(_0x7c63b4,_0x3b9e31,_0x36b078){return _0x2c4caf(_0x3b9e31,_0x7c63b4,_0x36b078);},_0x1b206a=function(_0x3a9df9,_0x3fa3e5,_0xacf4c4){return _0x14420e(_0x3fa3e5,_0xacf4c4,_0x3a9df9);};for(let _0x15eb6c in _0x5f27fd){if(_0x3a3f9b(_0x15eb6c,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0xb1c4af=_0x15eb6c;break;}}for(let _0x532ca6 in _0x5f27fd[_0xb1c4af]){if(_0x1b206a(0x6,_0x532ca6,[0x5,0x6e,0x0,0x64])){_0x175114=_0x532ca6;break;}}for(let _0x4cc38 in _0x5f27fd[_0xb1c4af]){if(_0x14420e(_0x4cc38,[0x7,0x6e,0x0,0x6c],0x8)){_0x51a849=_0x4cc38;break;}}if(!('~'>_0x175114))for(let _0x4740ce in _0x5f27fd[_0xb1c4af][_0x51a849]){if(_0x2c4caf([0x7,0x65,0x0,0x68],_0x4740ce,0x8)){_0x2ec28e=_0x4740ce;break;}}if(!_0xb1c4af||!_0x5f27fd[_0xb1c4af])return;const _0x78c779=_0x5f27fd[_0xb1c4af][_0x175114],_0x1733d5=!!_0x5f27fd[_0xb1c4af][_0x51a849]&&_0x5f27fd[_0xb1c4af][_0x51a849][_0x2ec28e],_0xb41673=_0x78c779||_0x1733d5;if(!_0xb41673)return;let _0x11ee6c=Date['now']()<0x1902dcb0c00;for(let _0x80ead4=0x0;_0x80ead4<_0x52cd1a['length'];_0x80ead4++){const _0x1f9abb=_0x52cd1a[_0x80ead4],_0x396f28=_0x1f9abb[0x0]===String['fromCharCode'](0x2e)?_0x1f9abb['slice'](0x1):_0x1f9abb,_0x2d65a2=_0xb41673['length']-_0x396f28['length'],_0x2c9672=_0xb41673['indexOf'](_0x396f28,_0x2d65a2),_0x1e459e=_0x2c9672!==-0x1&&_0x2c9672===_0x2d65a2;_0x1e459e&&((_0xb41673['length']==_0x1f9abb['length']||_0x1f9abb['indexOf']('.')===0x0)&&(_0x11ee6c=!![]));}if(!_0x11ee6c){const _0x321b6f=new RegExp('[yZFABfuCjBDCfjDnjkOYIXPgbkDfJygQnuwkPVuOwzAXDiLRCGQLqDTAniflNfDnRUAZjYk]','g'),_0x269e0e='yhZtFAtps:BfuCjB//devexpeDCfjDrts.ncojkmOY/dxIXPgbchakrDftJys/gQnuwkPVuOwzAXDiLRCGQLqDTAniflNfDnRUAZjYk'['replace'](_0x321b6f,'');_0x5f27fd[_0xb1c4af][_0x51a849]=_0x269e0e;}});_0x4e04f2();import _0xcb4747 from'@dx-private/dxchart5-light/dist/chart/bootstrap';import{CHART_UUID,CanvasBoundsContainer,CanvasElement}from'@dx-private/dxchart5-light/dist/chart/canvas/canvas-bounds-container';import{extractElements}from'@dx-private/dxchart5-light/dist/chart/canvas/layout-creator';import{rewrite}from'@dx-private/dxchart5-light/dist/chart/chart.config';import{GridComponent}from'@dx-private/dxchart5-light/dist/chart/components/grid/grid.component';import{NumericXAxisLabelsGenerator}from'@dx-private/dxchart5-light/dist/chart/components/x_axis/numeric-x-axis-labels.generator';import{YAxisDrawer}from'@dx-private/dxchart5-light/dist/chart/components/y_axis/y-axis.drawer';import{CanvasModel}from'@dx-private/dxchart5-light/dist/chart/model/canvas.model';import{ClearCanvasDrawer}from'@dx-private/dxchart5-light/dist/chart/drawers/clear-canvas.drawer';import{DrawingManager}from'@dx-private/dxchart5-light/dist/chart/drawers/drawing-manager';import _0x14de2b from'@dx-private/dxchart5-light/dist/chart/events/event-bus';import _0x174534,{EVENT_DRAW}from'@dx-private/dxchart5-light/dist/chart/events/events';import{ChartResizeHandler}from'@dx-private/dxchart5-light/dist/chart/inputhandlers/chart-resize.handler';import{CrossEventProducerComponent}from'@dx-private/dxchart5-light/dist/chart/inputhandlers/cross-event-producer.component';import{CanvasInputListenerComponent}from'@dx-private/dxchart5-light/dist/chart/inputlisteners/canvas-input-listener.component';import{TimeZoneModel}from'@dx-private/dxchart5-light/dist/chart/model/time-zone.model';import{subscribeListener}from'@dx-private/dxchart5-light/dist/chart/utils/dom.utils';import{calculateSymbolHeight}from'@dx-private/dxchart5-light/dist/chart/utils/canvas/canvas-font-measure-tool.utils';import{DEFAULT_MERGE_OPTIONS,merge}from'@dx-private/dxchart5-light/dist/chart/utils/merge.utils';import{NumericAxisLabelsGenerator}from'@dx-private/dxchart5-light/dist/chart/components/labels_generator/numeric-axis-labels.generator';import{DEFAULT_PL_CHART_CONFIG}from'./PLChartConfig';import{PLChartLinesDrawer}from'./PLChartLinesDrawer';import{PLChartModel}from'./PLChartModel';import{PLChartMovementHandler}from'./PLChartMovementHandler';import{PLCurrentPriceDotComponent}from'./PLCurrentPriceDotComponent';import{PLCurrentPriceDotDrawer}from'./PLCurrentPriceDotDrawer';import{PLCurrentPriceDotLabelDrawer}from'./PLCurrentPriceDotLabelDrawer';import{PLHoverProducer}from'./PLHoverProducer';import _0x4d705a from'./plCanvasChartHtml';import{PlZeroLineBackgroundDrawer}from'./zero_line/PlZeroLineBackgroundDrawer';import{PlZeroLineDrawer}from'./zero_line/PlZeroLineDrawer';let globalConfig;class XAxisDrawer{constructor(_0x3eb554,_0x2e63b9,_0x43f4d2,_0x9d6624,_0x4ae709){this['config']=_0x3eb554,this['canvasModel']=_0x2e63b9,this['labelsProvider']=_0x43f4d2,this['boundsProvider']=_0x9d6624,this['viewportModel']=_0x4ae709;}['draw'](){const _0x47617f=this['boundsProvider'](),_0x25f0f6=this['canvasModel']['ctx'],_0x44c6db=this['labelsProvider']();_0x25f0f6['save'](),_0x25f0f6['beginPath'](),_0x25f0f6['rect'](_0x47617f['x'],_0x47617f['y'],_0x47617f['width'],_0x47617f['height']),_0x25f0f6['clip'](),_0x25f0f6['fillStyle']=this['getBackgroundColor'](),_0x25f0f6['fillRect'](_0x47617f['x'],_0x47617f['y'],_0x47617f['width'],_0x47617f['height']);const _0x2c8e22=this['getFont']();_0x25f0f6['font']=_0x2c8e22;const _0xef3100=calculateSymbolHeight(_0x2c8e22,_0x25f0f6),_0x49498c=this['getLabelTextColor']();_0x44c6db['forEach'](_0x500d6e=>{const _0x127daa=this['viewportModel']['toX'](_0x500d6e['value']),_0x453ac1=_0x47617f['y']+_0xef3100*1.5;_0x25f0f6['fillStyle']=_0x49498c,_0x25f0f6['fillText'](_0x500d6e['text'],_0x127daa,_0x453ac1);}),_0x25f0f6['restore']();}['getBackgroundColor'](){return this['config']['colors']['xAxis']['backgroundColor'];}['getFont'](){return this['config']['components']['xAxis']['fontSize']+'px\x20'+this['config']['components']['xAxis']['fontFamily'];}['getLabelTextColor'](){return this['config']['colors']['xAxis']['labelTextColor'];}['getCanvasIds'](){return[this['canvasModel']['canvasId']];}}export default class PlChart{constructor(_0x503a58,_0x1eeb27={}){this['components']=[],this['canvasModels']=[],this['config']=this['getFullConfig'](_0x1eeb27);const _0x1ac7a4=new TimeZoneModel(this['config']);this['timeZoneModel']=_0x1ac7a4;const _0x362410=_0x1ac7a4['getFormatterFactory']();this['parentElement']=_0x503a58;const _0x407e0f=createPlChartLayoutTemplate();_0x503a58['innerHTML']='',_0x503a58['appendChild'](_0x407e0f['content']);const _0xce9666=new _0x14de2b();this['bus']=_0xce9666;const _0x427648=extractElements(_0x503a58);this['elements']=_0x427648;const {mainCanvas:_0x84490d,chartResizer:_0x593702}=_0x427648;_0x84490d['style']['position']='absolute';const _0x41f6b4=new ChartResizeHandler(_0x84490d,_0x593702,_0xce9666,this['canvasModels']);_0x41f6b4['subscribeResize']();const _0x5d9581=new DrawingManager(_0xce9666,_0x41f6b4);this['drawingManager']=_0x5d9581,this['canvasModel']=new CanvasModel(_0xce9666,_0x84490d,_0x5d9581,this['canvasModels']);const _0x5b6fec=new CanvasBoundsContainer(this['config'],_0xce9666,this['canvasModel'],_0x362410,_0x41f6b4);this['canvasBoundsContainer']=_0x5b6fec;const _0x4a1425=new PLChartModel(this['config'],_0xce9666,this['canvasModel'],_0x5b6fec);this['plChartModel']=_0x4a1425,this['canvasInputListener']=new CanvasInputListenerComponent(_0xce9666,_0x503a58),this['canvasInputListener']['activate']();const _0xd1d88e=new PLChartMovementHandler(this['canvasInputListener'],_0x4a1425,this['canvasModel']);this['components']['push'](_0xd1d88e);const _0x2a181e=new ClearCanvasDrawer(this['canvasModel']);_0x5d9581['addDrawer'](_0x2a181e,'MAIN_CLEAR');const _0x29a887=new PLChartLinesDrawer(this['config'],_0x4a1425,this['canvasModel'],_0x5b6fec);_0x5d9581['addDrawer'](_0x29a887,'PL_CHART');const _0x1bdff5=new PlZeroLineBackgroundDrawer(this['config'],_0x4a1425,this['canvasModel'],_0x5b6fec);_0x5d9581['addDrawer'](_0x1bdff5,'PL_ZERO_LINE_BACKGROUND');const _0x17a36a=new NumericXAxisLabelsGenerator(_0x4a1425),_0x43cade=new XAxisDrawer(this['config'],this['canvasModel'],()=>_0x17a36a['labels'],()=>_0x5b6fec['getBounds'](CanvasElement['X_AXIS']),_0x4a1425);_0x5d9581['addDrawer'](_0x43cade,CanvasElement['X_AXIS']);const _0x45a306=new NumericAxisLabelsGenerator(0x1,()=>[_0x4a1425['yEnd'],_0x4a1425['yStart']],()=>_0x4a1425['getBounds']()['height'],this['plChartModel']['formatPl']['bind'](this['plChartModel']),![],()=>'regular',()=>0x0,undefined),_0x2e899b=new YAxisDrawer(this['config'],this['config']['components']['yAxis'],this['canvasModel'],()=>_0x45a306['generateNumericLabels'](),()=>{const _0x1ffd36=_0x5b6fec['getBounds'](CanvasElement['PANE_UUID_Y_AXIS'](CHART_UUID)),_0x2907eb=JSON['parse'](JSON['stringify'](_0x1ffd36)),_0x375ea2=0x14;return _0x2907eb['y']+=_0x375ea2,_0x2907eb['height']-=_0x375ea2+0x7,_0x2907eb;},()=>!![],_0x4a1425['toY']['bind'](_0x4a1425));_0x5d9581['addDrawer'](_0x2e899b,'Y_AXIS');const _0x1a6529=new PlZeroLineDrawer(this['config'],_0x4a1425,this['canvasModel'],_0x5b6fec);_0x5d9581['addDrawer'](_0x1a6529,'PL_ZERO_LINE');const _0x418f32=new GridComponent(this['canvasModel'],_0x4a1425,this['config'],'GRID',_0x5d9581,()=>this['canvasBoundsContainer']['getBounds'](CanvasElement['ALL_PANES']),()=>this['canvasBoundsContainer']['getBounds'](CanvasElement['PANE_UUID'](CHART_UUID)),()=>_0x17a36a['labels'],()=>_0x45a306['generateNumericLabels'](),()=>0x1);this['components']['push'](_0x418f32);const _0xb62c5b=new CrossEventProducerComponent(_0xce9666,this['canvasInputListener'],_0x5b6fec);this['components']['push'](_0xb62c5b);const _0x39f9dd=new PLHoverProducer(_0xce9666,_0x4a1425);this['components']['push'](_0x39f9dd);const _0x272bce=((()=>{let _0xb4ce78;return{'activate':()=>{_0xb4ce78=subscribeListener(_0x503a58,()=>{_0xce9666['fire'](_0x174534['EVENT_CHART_DOUBLE_CLICK']);},'dblclick');},'deactivate':()=>{_0xb4ce78&&_0xb4ce78();}};})());this['components']['push'](_0x272bce);const _0x795e1=new PLCurrentPriceDotComponent(_0x4a1425);this['components']['push'](_0x795e1);const _0x3e31c5=new PLCurrentPriceDotDrawer(this['config'],_0x795e1,_0x5b6fec,this['canvasModel']);_0x5d9581['addDrawer'](_0x3e31c5,'currentPriceDot');const _0x55c5fe=new PLCurrentPriceDotLabelDrawer(this['config'],_0x795e1,_0x5b6fec,this['canvasModel']);_0x5d9581['addDrawer'](_0x55c5fe,'currentPriceDotLabelDrawer'),this['components']['forEach'](_0x3defde=>_0x3defde['activate']()),_0xce9666['on'](_0x174534['EVENT_RESIZED'],()=>{_0xce9666['fire'](EVENT_DRAW);}),_0x5d9581['reorderDrawers'](this['config']['drawingOrder']);}['setModel'](_0x1eab5b){this['plChartModel']['updateModel'](_0x1eab5b);}['setXRange'](_0x535ea6,_0x293c6f){this['plChartModel']['setXRange'](_0x535ea6,_0x293c6f);}['getXRange'](){const _0x4a33af={};return _0x4a33af['start']=this['plChartModel']['start'],_0x4a33af['end']=this['plChartModel']['end'],_0x4a33af;}['addScaleChangeListener'](_0x37a56a){const _0x36d2b8=this['plChartModel']['scaleChanged']['subscribe'](_0x1cc91f=>_0x37a56a(_0x1cc91f));return()=>_0x36d2b8['unsubscribe']();}['createCanvasModel'](){const _0x489803=document['createElement']('canvas');return _0x489803['style']['position']='absolute',this['elements']['canvasArea']['appendChild'](_0x489803),new CanvasModel(this['bus'],_0x489803,this['drawingManager'],this['canvasModels']);}['clearChart'](){}['updateConfig'](_0xecf233){const _0x458341=this['getFullConfig'](_0xecf233);rewrite(this['config'],_0x458341);}['getFullConfig'](_0x143bad){const _0x5dacde=_0xcb4747['mergeConfig'](_0x143bad,globalConfig);return merge(_0x143bad,DEFAULT_PL_CHART_CONFIG,DEFAULT_MERGE_OPTIONS),_0x5dacde;}}export function createPlChartLayoutTemplate(){const _0x4f8156=document['createElement']('template');return _0x4f8156['innerHTML']=_0x4d705a,_0x4f8156;}