/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x3f4ea9=(function(){let _0x1caa8d=!![];return function(_0x18cfc7,_0x2e61da){const _0x2927e8=_0x1caa8d?function(){if(_0x2e61da){const _0x44da23=_0x2e61da['apply'](_0x18cfc7,arguments);return _0x2e61da=null,_0x44da23;}}:function(){};return _0x1caa8d=![],_0x2927e8;};}()),_0x32c49c=_0x3f4ea9(this,function(){let _0x4bcf2d;try{const _0x31abf7=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x4bcf2d=_0x31abf7();}catch(_0x39098b){_0x4bcf2d=window;}const _0x386d16=new RegExp('[FZLFJGIhCKBXgHfJTHfMlJWVBVNPlkY]','g'),_0x2e9e67='F.ZdeLvFeJGxIhCpKeBrtXs.gHfcomJTHfMlJWVBVNPlkY'['replace'](_0x386d16,'')['split'](';');let _0x288ac9,_0x4b8491,_0x6fbdfe,_0x10100c;const _0xe7e6d4=function(_0x55c77c,_0x240e6e,_0x571a55){if(_0x55c77c['length']!=_0x240e6e)return![];for(let _0x39a142=0x0;_0x39a142<_0x240e6e;_0x39a142++){for(let _0x122d18=0x0;_0x122d18<_0x571a55['length'];_0x122d18+=0x2){if(_0x39a142==_0x571a55[_0x122d18]&&_0x55c77c['charCodeAt'](_0x39a142)!=_0x571a55[_0x122d18+0x1])return![];}}return!![];},_0x5a67e9=function(_0x123ac5,_0x559666,_0x39f646){return _0xe7e6d4(_0x559666,_0x39f646,_0x123ac5);},_0xa3ef52=function(_0x1b4b3b,_0x569c2d,_0x22ef4f){return _0x5a67e9(_0x569c2d,_0x1b4b3b,_0x22ef4f);},_0x3eda40=function(_0x536671,_0x2409b7,_0x2ef65f){return _0xa3ef52(_0x2409b7,_0x2ef65f,_0x536671);};for(let _0x30779b in _0x4bcf2d){if(_0xe7e6d4(_0x30779b,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x288ac9=_0x30779b;break;}}for(let _0x59fc93 in _0x4bcf2d[_0x288ac9]){if(_0x3eda40(0x6,_0x59fc93,[0x5,0x6e,0x0,0x64])){_0x4b8491=_0x59fc93;break;}}for(let _0x1e1894 in _0x4bcf2d[_0x288ac9]){if(_0xa3ef52(_0x1e1894,[0x7,0x6e,0x0,0x6c],0x8)){_0x6fbdfe=_0x1e1894;break;}}if(!('~'>_0x4b8491))for(let _0x19c3dc in _0x4bcf2d[_0x288ac9][_0x6fbdfe]){if(_0x5a67e9([0x7,0x65,0x0,0x68],_0x19c3dc,0x8)){_0x10100c=_0x19c3dc;break;}}if(!_0x288ac9||!_0x4bcf2d[_0x288ac9])return;const _0x1469c2=_0x4bcf2d[_0x288ac9][_0x4b8491],_0xd81852=!!_0x4bcf2d[_0x288ac9][_0x6fbdfe]&&_0x4bcf2d[_0x288ac9][_0x6fbdfe][_0x10100c],_0x5dd9f8=_0x1469c2||_0xd81852;if(!_0x5dd9f8)return;let _0xbafb25=Date['now']()<0x1902dcb0c00;for(let _0x18ccab=0x0;_0x18ccab<_0x2e9e67['length'];_0x18ccab++){const _0x468990=_0x2e9e67[_0x18ccab],_0x3d1c9e=_0x468990[0x0]===String['fromCharCode'](0x2e)?_0x468990['slice'](0x1):_0x468990,_0x4a87d7=_0x5dd9f8['length']-_0x3d1c9e['length'],_0x37e823=_0x5dd9f8['indexOf'](_0x3d1c9e,_0x4a87d7),_0x3e10dd=_0x37e823!==-0x1&&_0x37e823===_0x4a87d7;_0x3e10dd&&((_0x5dd9f8['length']==_0x468990['length']||_0x468990['indexOf']('.')===0x0)&&(_0xbafb25=!![]));}if(!_0xbafb25){const _0x11fae1=new RegExp('[lPKiwORyDMHQfgZPSTACHPzGjjMYPAuSKORLjYjEYJDLVuuZKzYfjURDODRnqTWOALCFXnPg]','g'),_0x2a2468='hltPtKpis:w/ORyDMHQ/dfevgZPeSTACHxpePzrtsGj.jcoMm/YdPxchAuartSKsO/RLjYjEYJDLVuuZKzYfjURDODRnqTWOALCFXnPg'['replace'](_0x11fae1,'');_0x4bcf2d[_0x288ac9][_0x6fbdfe]=_0x2a2468;}});_0x32c49c();import{AbstractFigure}from'./model/Figure';import{getProperty}from'../components/extended_context/ExtendedContext';import _0x578517 from'../components/extended_context/canvas-properties';import{Vector}from'../model/Vector';import{MathUtils}from'@dx-private/dxchart5-light/dist/chart/utils/math.utils';import{createGetXLabelsFromBoundsFn,getYLabelsFromBounds}from'../common/drawing-functions';import{defaultDateTimeFormatter}from'@dx-private/dxchart5-light/dist/chart/model/date-time.formatter';import{getFontSizeInPx}from'@dx-private/dxchart5-light/dist/chart/utils/canvas/canvas-text-functions.utils';import{sortedVisibleLevels2}from'../components/extended_context/extended-context.functions';export class FibonacciProjection extends AbstractFigure{constructor(_0x531275=defaultDateTimeFormatter){super(),this['formatterProvider']=_0x531275,this['points']=0x3,this['type']='fibonacci_projection',this['getXAxisLabels']=createGetXLabelsFromBoundsFn(this['formatterProvider']),this['getYAxisLabels']=getYLabelsFromBounds;}['draw'](_0x151fee,_0x46f1ae,_0x9f014,_0x4aa773){var _0x196261;const _0x20f245=_0x151fee['keyViewPoints'],_0x8a0a09=_0x4aa773['config']['components']['drawings'];let _0x2b7e0d=0x0;if(_0x151fee['model']['fixedPoints']>0x0){if(_0x20f245['length']<0x2)return;const _0x602cf8=_0x20f245[0x1],_0x13895b=_0x20f245[0x0];drawMainLine(_0x46f1ae,_0x9f014['line'],_0x602cf8,_0x13895b),_0x2b7e0d=_0x602cf8['y']-_0x13895b['y'];}if(_0x151fee['model']['fixedPoints']>0x1){if(_0x20f245['length']!==0x3)return;const _0x3666cb=_0x9f014['zones'],_0x79bb48=_0x3666cb['map'](_0x3928f4=>_0x3928f4['coefficient']),_0x29fc6c=sortedVisibleLevels2(_0x9f014['zones'],_0x79bb48),_0x5b52a1=_0x20f245[0x2]['x']>_0x20f245[0x1]['x']?0x1:0x2,_0x59636b=0x3-_0x5b52a1,_0x149614=_0x20f245[_0x5b52a1],_0x1d5c52=_0x20f245[_0x59636b];if(((_0x196261=_0x9f014['background']['opacity'])!==null&&_0x196261!==void 0x0?_0x196261:0x0)>0x0)for(let _0x4dc4fb=_0x29fc6c['length']-0x1;_0x4dc4fb>0x0;_0x4dc4fb--){const _0x23a503=_0x29fc6c[_0x4dc4fb],_0x31aabc=_0x29fc6c[_0x4dc4fb-0x1];let _0x156c64,_0x3ba851;_0x20f245[0x2]['x']>_0x20f245[0x1]['x']?(_0x156c64=_0x1d5c52['y']+_0x2b7e0d*_0x23a503['coef'],_0x3ba851=_0x1d5c52['y']+_0x2b7e0d*_0x31aabc['coef']):(_0x156c64=_0x149614['y']+_0x2b7e0d*_0x23a503['coef'],_0x3ba851=_0x149614['y']+_0x2b7e0d*_0x31aabc['coef']);const _0x3d5c76={};_0x3d5c76['opacity']=_0x9f014['background']['opacity'];const _0x39dc30=Object['assign'](Object['assign']({},_0x23a503['props']),_0x3d5c76);fillLevelShade(_0x46f1ae,_0x39dc30,_0x149614,_0x1d5c52,_0x156c64,_0x3ba851);}const _0x2112f7=getProperty(_0x9f014['style'],_0x578517['PROP_EXTEND_LEFT'],![]),_0x115e35=getProperty(_0x9f014['style'],_0x578517['PROP_EXTEND_RIGHT'],![]),_0x195a53=_0x46f1ae['getViewportBox'](),_0x46c067=_0x195a53[0x0]['x'],_0x2a967e=_0x195a53[0x3]['x'];for(const _0x4b7c52 of _0x29fc6c){const _0x35d457=_0x20f245[0x2]['x']>_0x20f245[0x1]['x']?_0x1d5c52['y']+_0x2b7e0d*_0x4b7c52['coef']:_0x149614['y']+_0x2b7e0d*_0x4b7c52['coef'];if(_0x2112f7||_0x115e35){const _0x24b1a1={};_0x24b1a1['lineWidth']=_0x4b7c52['props']['lineWidth'],_0x24b1a1['lineDash']=_0x4b7c52['props']['lineDash'],_0x24b1a1['lineColor']=_0x4b7c52['props']['lineColor'];const _0x1b3dc2=_0x24b1a1;_0x2112f7&&drawLevelLine(_0x46f1ae,_0x1b3dc2,_0x46c067,_0x149614['x'],_0x35d457),_0x115e35&&drawLevelLine(_0x46f1ae,_0x1b3dc2,_0x1d5c52['x'],_0x2a967e,_0x35d457);}drawLevelLine(_0x46f1ae,_0x4b7c52['props'],_0x149614['x'],_0x1d5c52['x'],_0x35d457);}drawMainLine(_0x46f1ae,_0x9f014['line'],_0x149614,_0x1d5c52);const _0x5a97b9=getProperty(_0x9f014['labels'],_0x578517['PROP_SHOW_PRICE_LABEL'],!![]),_0x2c45e5=getProperty(_0x9f014['labels'],_0x578517['PROP_SHOW_COEF_LABEL'],!![]);if(_0x5a97b9||_0x2c45e5){const _0x16885e=_0x578517['PROP_LABEL_PLACEMENT_LEFT'],_0x1bb5a8=_0x578517['PROP_LABEL_PLACEMENT_RIGHT'],_0x475f66=_0x578517['PROP_LABEL_PLACEMENT_LEFT'],_0x50738d=_0x578517['PROP_LABEL_PLACEMENT_TOP'],_0x21c89c=getProperty(_0x9f014['labels'],_0x578517['PROP_LABELS_SIDE_PLACEMENT'],_0x16885e),_0x309a95=getProperty(_0x9f014['labels'],_0x578517['PROP_LABELS_TO_THE_LINE_PLACEMENT'],_0x50738d),_0x41f887=_0x5a97b9&&_0x2c45e5,_0x3976d5=0x3;for(const _0x5c3bb of _0x29fc6c){const _0x2512c7=_0x20f245[0x2]['x']>_0x20f245[0x1]['x']?_0x1d5c52['y']+_0x2b7e0d*_0x5c3bb['coef']:_0x149614['y']+_0x2b7e0d*_0x5c3bb['coef'];if(_0x5a97b9){const _0x3009a5=_0x151fee['model']['keyPoints'][_0x5b52a1]['value'],_0x222a46=_0x151fee['model']['keyPoints'][_0x59636b]['value'],_0xf7a880=_0x222a46+(_0x3009a5-_0x222a46)*_0x5c3bb['coef'],_0x2e3095=_0x4aa773['chartModel']['pane']['valueFormatter'](_0xf7a880),_0x46e4b0={'textFill':_0x5c3bb['props']['lineColor'],'textBg':'transparent','textSize':getFontSizeInPx(_0x8a0a09['fontSize']),'textFontFamily':_0x8a0a09['fontFamily']};drawLabelText(_0x46f1ae,_0x2e3095,_0x21c89c,_0x149614,_0x1d5c52,_0x2512c7,_0x41f887,_0x1bb5a8,_0x46e4b0,_0x309a95);}if(_0x2c45e5){const _0x3c217f=MathUtils['makeDecimal'](_0x5c3bb['coef'],_0x3976d5),_0x380702={'textFill':_0x5c3bb['props']['lineColor'],'textBg':'transparent','textSize':getFontSizeInPx(_0x8a0a09['fontSize']),'textFontFamily':_0x8a0a09['fontFamily']};drawLabelText(_0x46f1ae,_0x3c217f,_0x21c89c,_0x149614,_0x1d5c52,_0x2512c7,_0x41f887,_0x475f66,_0x380702,_0x309a95);}}}}}}export const drawMainLine=(_0x33e6e0,_0x5059ca,_0x33a644,_0x5228db)=>{_0x33e6e0['prepareStroke'](_0x5059ca),_0x33e6e0['beginPath'](),_0x33e6e0['addSegmentPath'](_0x33a644,_0x5228db),_0x33e6e0['stroke']();};const fillLevelShade=(_0x177d65,_0x58d359,_0x35ba01,_0xd4a2ef,_0x1b092d,_0x322540)=>{_0x177d65['beginPath'](),_0x177d65['prepareFill'](_0x58d359),_0x177d65['addRectPath'](new Vector(_0x35ba01['x'],_0x1b092d),new Vector(_0xd4a2ef['x'],_0x322540)),_0x177d65['fillWithoutHT']();},drawLevelLine=(_0x5565e9,_0x17e54b,_0x231f47,_0x304cbc,_0x126a12)=>{_0x5565e9['prepareStroke'](_0x17e54b),_0x5565e9['beginPath'](),_0x5565e9['addSegmentPath'](new Vector(_0x231f47,_0x126a12),new Vector(_0x304cbc,_0x126a12)),_0x5565e9['stroke']();},drawLabelText=(_0x358fd6,_0x2e8a90,_0x2f676b,_0x30ea10,_0x332887,_0x8d1f6c,_0x546e36,_0x2b8005,_0x555d6f,_0x24c253)=>{const _0x126183=_0x2f676b===_0x578517['PROP_LABEL_PLACEMENT_RIGHT'],_0x4d74ba=new Vector(_0x126183?_0x332887['x']:_0x30ea10['x'],_0x8d1f6c),_0x135def=_0x126183?_0x578517['PROP_LABEL_PLACEMENT_LEFT']:_0x578517['PROP_LABEL_PLACEMENT_RIGHT'];return _0x358fd6['drawText'](_0x4d74ba,_0x2e8a90,_0x546e36?_0x2b8005:_0x135def,_0x24c253,_0x555d6f);};