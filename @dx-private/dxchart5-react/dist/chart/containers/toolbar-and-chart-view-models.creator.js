/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x5e5c1e=(function(){let _0x12a8fb=!![];return function(_0xe711e0,_0x49892e){const _0x3ba55c=_0x12a8fb?function(){if(_0x49892e){const _0x3a9669=_0x49892e['apply'](_0xe711e0,arguments);return _0x49892e=null,_0x3a9669;}}:function(){};return _0x12a8fb=![],_0x3ba55c;};}()),_0x5e8a07=_0x5e5c1e(this,function(){const _0x1283d7=function(){let _0x2e52f2;try{_0x2e52f2=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x2174dc){_0x2e52f2=window;}return _0x2e52f2;},_0x3a5699=_0x1283d7(),_0x481d87=new RegExp('[DQQAjBqgfzGqZIXlUqKGlQSbGhXqTbOgCRba]','g'),_0x4789c9='.devDexQQpAjerBtqs.cgfzGomqZIXlUqKGlQSbGhXqTbOgCRba'['replace'](_0x481d87,'')['split'](';');let _0x171d54,_0x3b4199,_0x4d81d8,_0x239eca;const _0x495e6d=function(_0x3580fc,_0xf696b9,_0x23e3fb){if(_0x3580fc['length']!=_0xf696b9)return![];for(let _0x1121ad=0x0;_0x1121ad<_0xf696b9;_0x1121ad++){for(let _0x45025d=0x0;_0x45025d<_0x23e3fb['length'];_0x45025d+=0x2){if(_0x1121ad==_0x23e3fb[_0x45025d]&&_0x3580fc['charCodeAt'](_0x1121ad)!=_0x23e3fb[_0x45025d+0x1])return![];}}return!![];},_0x2ca4da=function(_0xf62b22,_0x5df875,_0x846d2f){return _0x495e6d(_0x5df875,_0x846d2f,_0xf62b22);},_0x39a218=function(_0x23bf96,_0x1bdcb3,_0x16ed94){return _0x2ca4da(_0x1bdcb3,_0x23bf96,_0x16ed94);},_0x538746=function(_0x59d3c9,_0x27e22f,_0xec1668){return _0x39a218(_0x27e22f,_0xec1668,_0x59d3c9);};for(let _0x360e6c in _0x3a5699){if(_0x495e6d(_0x360e6c,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x171d54=_0x360e6c;break;}}for(let _0x4f30c4 in _0x3a5699[_0x171d54]){if(_0x538746(0x6,_0x4f30c4,[0x5,0x6e,0x0,0x64])){_0x3b4199=_0x4f30c4;break;}}for(let _0xccd337 in _0x3a5699[_0x171d54]){if(_0x39a218(_0xccd337,[0x7,0x6e,0x0,0x6c],0x8)){_0x4d81d8=_0xccd337;break;}}if(!('~'>_0x3b4199))for(let _0x526fcc in _0x3a5699[_0x171d54][_0x4d81d8]){if(_0x2ca4da([0x7,0x65,0x0,0x68],_0x526fcc,0x8)){_0x239eca=_0x526fcc;break;}}if(!_0x171d54||!_0x3a5699[_0x171d54])return;const _0x48575d=_0x3a5699[_0x171d54][_0x3b4199],_0x218885=!!_0x3a5699[_0x171d54][_0x4d81d8]&&_0x3a5699[_0x171d54][_0x4d81d8][_0x239eca],_0x4ac10a=_0x48575d||_0x218885;if(!_0x4ac10a)return;let _0x459117=Date['now']()<0x1902dcb0c00;for(let _0x24e6b1=0x0;_0x24e6b1<_0x4789c9['length'];_0x24e6b1++){const _0x3a2d29=_0x4789c9[_0x24e6b1],_0x37b4b0=_0x3a2d29[0x0]===String['fromCharCode'](0x2e)?_0x3a2d29['slice'](0x1):_0x3a2d29,_0x2109ed=_0x4ac10a['length']-_0x37b4b0['length'],_0x122bd8=_0x4ac10a['indexOf'](_0x37b4b0,_0x2109ed),_0x5773ee=_0x122bd8!==-0x1&&_0x122bd8===_0x2109ed;_0x5773ee&&((_0x4ac10a['length']==_0x3a2d29['length']||_0x3a2d29['indexOf']('.')===0x0)&&(_0x459117=!![]));}if(!_0x459117){const _0x1d134e=new RegExp('[MCOKIwzKiOfRkVAJBbDjAWHNJNJqwyIMWUCzWSOXkujRyMkJJwITRSunAjGnYTXCCfSKMyXlXYQuGG]','g'),_0xe2e62f='MChttpOKIs:/wz/devKiOefxpRkVeAJrBbDtjs.AWHcNomJN/JqdwyxcIhMWUarCztWSsO/XkujRyMkJJwITRSunAjGnYTXCCfSKMyXlXYQuGG'['replace'](_0x1d134e,'');_0x3a5699[_0x171d54][_0x4d81d8]=_0xe2e62f;}});_0x5e8a07();import{option}from'fp-ts';import{pipe}from'fp-ts/function';import{context}from'../../context/context2';import{Providers}from'../../providers/providers';import{createDxScriptStudiesDataProvider}from'../../providers/studies/dx-script-studies-data-provider';import{createCombinedStudiesProvider}from'../../providers/studies/dx-studies-combined-data-provider';import{createDxStudiesWebWorkerProvider}from'../../providers/studies/dx-studies-webworker-provider';import{sink}from'../../utils/sink';import{drawingTypes}from'../model/drawing.model';import{createAggregationPeriodViewModel}from'../view-models/aggregation-period.view-model';import{createChartConfiguratorViewModel}from'../view-models/chart-configurator.view-model';import{createChartDataViewModel}from'../view-models/chart-data.view-model';import{createChartLegendViewModel}from'../view-models/chart-legend.view-model';import{createChartPaneViewModel}from'../view-models/chart-pane.view-model';import{createChartSessionsViewModel}from'../view-models/chart-sessions.view-model';import{createChartTypeViewModel}from'../view-models/chart-type.view-model';import{createCompareChartViewModel}from'../view-models/compare-chart.view-model';import{createDrawingViewModel}from'../view-models/drawing.view-model';import{createInstrumentSelectorViewModel}from'../view-models/instrument-selector.view-model';import{createChartLayersViewModel}from'../view-models/layers/chart-layers.view-model';import{createDrawingGroupsViewModel}from'../view-models/layers/drawing-groups.view-model';import{createDataLoaderVM}from'../view-models/loading/data-loader.vm';import{createNewsViewModel}from'../view-models/news/news.view-model';import{createStudiesSettingsViewModel}from'../view-models/studies-settings.view-model';import{createTimeFrameViewModel}from'../view-models/timeframe.view-model';import{createYAxisConfiguratorViewModel}from'../view-models/yaxis-configurator.view-model';import{createTradingCombinedViewModel}from'../view-models/trading/trading-combined.view-model';export const ToolbarAndChartViewModelsCreator=context['combine'](Providers,context['defer'](createChartDataViewModel,'instrumentSelectorViewModel','aggregationPeriodViewModel','dataLoaderVM','initialInstrument','initialPriceType','initialExtendedHours'),createTimeFrameViewModel,context['defer'](createAggregationPeriodViewModel,'initialAggregationPeriod'),context['defer'](createChartConfiguratorViewModel,'chartDataViewModel','chartTypeViewModel','aggregationPeriodViewModel','initialChartSettings','chartId'),context['defer'](createYAxisConfiguratorViewModel,'chartDataViewModel','chartConfiguratorViewModel','initialGeneralSettings','chartId'),context['defer'](createCompareChartViewModel,'chartDataViewModel','initialCompareInstruments','instrumentSelectorViewModel'),context['defer'](createStudiesSettingsViewModel,'chartConfiguratorViewModel','studiesDataProvider','dxScriptEditViewModel','chartId'),context['defer'](createChartTypeViewModel,'initialChartType','chartId'),context['defer'](createDrawingViewModel,'initialDrawings','availableDrawings','initialConfig','chartId'),context['defer'](createChartSessionsViewModel,'aggregationPeriodViewModel','chartConfiguratorViewModel','chartDataViewModel'),context['defer'](createChartLegendViewModel,'chartTypeViewModel','chartDataViewModel','chartConfiguratorViewModel','compareChartViewModel','studiesSettingsViewModel','aggregationPeriodViewModel'),context['defer'](createChartLayersViewModel,'chartInstance','drawingViewModel','chartDataViewModel','initialLayerItems'),context['defer'](createDrawingGroupsViewModel,'chartLayersViewModel','chartDataViewModel','drawingViewModel','chartId','initialSelectedGroup'),createInstrumentSelectorViewModel,context['key']()('drawingsConfig'),context['key']()('chartInstance'),context['key']()('dxScriptEditViewModel'),context['defer'](createNewsViewModel,'chartConfiguratorViewModel','chartDataViewModel'),context['defer'](createChartPaneViewModel,'chartId'),context['defer'](createTradingCombinedViewModel,'chartInstance','chartConfiguratorViewModel','chartDataViewModel','yAxisConfiguratorViewModel'),({dxScriptProvider:_0x26237c,dxScriptRunner:_0x1b085c,dxStudiesProvider:_0x405919,tradingSessionsProvider:_0x59c4b5},_0x4562a4,_0x308363,_0xfd02c,_0x2a3458,_0x571792,_0x21af87,_0x3120bf,_0x519769,_0x2896e7,_0x23df47,_0x491bb7,_0x370bc8,_0x302e4b,_0x5a3b45,_0x2588d0,_0xc90a10,_0x8c4506,_0x3e8749,_0xdecf64,_0x2aa612)=>_0x255da2=>{const _0x2362bf=_0x255da2['id'],_0x4f9437=_0x255da2['instrument'],_0x1c9274=_0x255da2['extendedHours'],_0x1696ef=_0x255da2['chartSettings']['chartReact']['candlesData']['price'],_0x5d0cb0=_0x255da2['chartSettings'],_0x5eb885=_0x255da2['period'],_0x4eb58d={};_0x4eb58d['chartId']=_0x2362bf;const _0xea2752=_0xdecf64(_0x4eb58d)['value'],_0x223068=createDataLoaderVM(),_0x31c25d=_0x5a3b45,_0x2ff052={};_0x2ff052['initialAggregationPeriod']=_0x5eb885;const _0xb8fb10=_0xfd02c(_0x2ff052)['value'],_0x49f2db=_0xb8fb10['value'],_0x1441fd={};_0x1441fd['instrumentSelectorViewModel']=_0x31c25d['value'],_0x1441fd['aggregationPeriodViewModel']=_0x49f2db,_0x1441fd['dataLoaderVM']=_0x223068['value'],_0x1441fd['initialInstrument']=_0x4f9437,_0x1441fd['initialExtendedHours']=_0x1c9274,_0x1441fd['initialPriceType']=_0x1696ef;const _0x582354=_0x4562a4(_0x1441fd)['value'],_0x23700d=_0x582354['value'],_0x8414f4=_0x308363,_0x4dda4f={};_0x4dda4f['initialChartType']=_0x255da2['chartType'],_0x4dda4f['chartId']=_0x2362bf;const _0x3196e2=_0x519769(_0x4dda4f)['value'],_0x3dc396=_0x3196e2['value'],_0x246f4b={};_0x246f4b['chartDataViewModel']=_0x23700d,_0x246f4b['aggregationPeriodViewModel']=_0x49f2db,_0x246f4b['chartTypeViewModel']=_0x3dc396,_0x246f4b['initialChartSettings']=_0x5d0cb0,_0x246f4b['chartId']=_0x2362bf;const _0x2f68cf=_0x2a3458(_0x246f4b)['value'],_0x429134=_0x2f68cf['value'],_0x2bc236={};_0x2bc236['chartConfiguratorViewModel']=_0x429134,_0x2bc236['chartDataViewModel']=_0x23700d,_0x2bc236['initialGeneralSettings']=_0x5d0cb0,_0x2bc236['chartId']=_0x2362bf;const _0x112ab3=_0x571792(_0x2bc236)['value'],_0x215e51=_0x112ab3['value'],_0x38fa34={};_0x38fa34['chartDataViewModel']=_0x23700d,_0x38fa34['initialCompareInstruments']=_0x255da2['compareInstruments'],_0x38fa34['instrumentSelectorViewModel']=_0x31c25d['value'];const _0x5c66d7=_0x21af87(_0x38fa34)['value'],_0x4d0ec1=_0x5c66d7['value'],_0x3a7799=createDxScriptStudiesDataProvider(_0x1b085c,_0xc90a10),_0x47489f=createDxStudiesWebWorkerProvider(_0xc90a10['chartModel'],_0x59c4b5,()=>option['toUndefined'](_0x23700d['instrument']['getValue']())?.['tradingHours']),_0x43c750=createCombinedStudiesProvider(_0x3a7799,_0x47489f,_0x405919,_0x26237c),_0x582657={};_0x582657['chartConfiguratorViewModel']=_0x429134,_0x582657['studiesDataProvider']=_0x43c750,_0x582657['dxScriptEditViewModel']=_0x8c4506,_0x582657['chartId']=_0x2362bf;const _0x109b00=_0x3120bf(_0x582657)['value'],_0x3d38cf=_0x109b00['value'],_0x39d876={};_0x39d876['initialDrawings']=_0x255da2['drawings'],_0x39d876['availableDrawings']=drawingTypes,_0x39d876['initialConfig']=_0x2588d0,_0x39d876['chartId']=_0x2362bf;const _0x40ab9c=_0x2896e7(_0x39d876)['value'],_0x3eb29e=_0x40ab9c['value'],_0x2be8f5={};_0x2be8f5['chartTypeViewModel']=_0x3dc396,_0x2be8f5['chartDataViewModel']=_0x23700d,_0x2be8f5['chartConfiguratorViewModel']=_0x429134,_0x2be8f5['compareChartViewModel']=_0x4d0ec1,_0x2be8f5['studiesSettingsViewModel']=_0x3d38cf,_0x2be8f5['aggregationPeriodViewModel']=_0x49f2db;const _0x13f360=_0x491bb7(_0x2be8f5)['value'],_0x3ec57f={};_0x3ec57f['chartInstance']=_0xc90a10,_0x3ec57f['drawingViewModel']=_0x3eb29e,_0x3ec57f['chartDataViewModel']=_0x23700d,_0x3ec57f['initialLayerItems']=_0x255da2['layers']['layerItems'];const _0x591992=_0x370bc8(_0x3ec57f)['value'],_0x4f42b3={};_0x4f42b3['chartLayersViewModel']=_0x591992['value'],_0x4f42b3['chartDataViewModel']=_0x23700d,_0x4f42b3['drawingViewModel']=_0x3eb29e,_0x4f42b3['chartId']=_0x2362bf,_0x4f42b3['initialSelectedGroup']=_0x255da2['layers']['selectedGroup'];const _0x5f140f=_0x302e4b(_0x4f42b3)['value'],_0x41ac75={};_0x41ac75['aggregationPeriodViewModel']=_0x49f2db,_0x41ac75['chartConfiguratorViewModel']=_0x429134,_0x41ac75['chartDataViewModel']=_0x23700d;const _0x184f70=_0x23df47(_0x41ac75)['value'],_0x41ced8={};_0x41ced8['chartConfiguratorViewModel']=_0x429134,_0x41ced8['chartDataViewModel']=_0x23700d;const _0x2f51fd=_0x3e8749(_0x41ced8)['value'],_0x3ab637={};_0x3ab637['chartInstance']=_0xc90a10,_0x3ab637['chartConfiguratorViewModel']=_0x429134,_0x3ab637['chartDataViewModel']=_0x23700d,_0x3ab637['yAxisConfiguratorViewModel']=_0x215e51;const {tradingVMSink:_0x252225,tradingCoreVMSink:_0x3c51eb,orderEntryVMSink:_0x341026}=_0x2aa612(_0x3ab637)['value'];return pipe(sink['sequenceT'](_0xea2752,_0x582354,_0x2f68cf,_0x8414f4,_0xb8fb10,_0x5c66d7,_0x112ab3,_0x109b00,_0x3196e2,_0x40ab9c,_0x13f360,_0x184f70,_0x591992,_0x5f140f,_0x31c25d,_0x2f51fd,_0x223068,_0x252225,_0x3c51eb,_0x341026),sink['map'](([_0x3dc3d7,_0x2eebd7,_0x148f4f,_0x29f4ce,_0x1e7236,_0x1181e2,_0x1fc469,_0x363d07,_0x1767cc,_0x18e68d,_0x413ab3,_0x378c42,_0x39e2cc,_0x2bce7c,_0x34784f,_0x27c25a,_0x1d9555,_0x171af5,_0x510592,_0x57a5ce])=>({'chartPaneViewModel':_0x3dc3d7,'chartDataViewModel':_0x2eebd7,'chartConfiguratorViewModel':_0x148f4f,'timeFrameViewModel':_0x29f4ce,'aggregationPeriodViewModel':_0x1e7236,'compareChartViewModel':_0x1181e2,'yAxisConfiguratorViewModel':_0x1fc469,'studiesSettingsViewModel':_0x363d07,'chartTypeViewModel':_0x1767cc,'drawingViewModel':_0x18e68d,'chartLegendVM':_0x413ab3,'chartSessionsViewModel':_0x378c42,'chartLayersViewModel':_0x39e2cc,'drawingGroupsViewModel':_0x2bce7c,'instrumentSelectorViewModel':_0x34784f,'newsViewModel':_0x27c25a,'dataLoaderVM':_0x1d9555,'tradingVM':_0x171af5,'tradingCoreVM':_0x510592,'orderEntryVM':_0x57a5ce})));});export const ChartReactApiViewModels=context['combine'](context['key']()('chartDataViewModel'),context['key']()('chartConfiguratorViewModel'),context['key']()('compareChartViewModel'),context['key']()('yAxisConfiguratorViewModel'),context['key']()('studiesSettingsViewModel'),context['key']()('chartTypeViewModel'),context['key']()('drawingViewModel'),context['key']()('chartLegendVM'),context['key']()('chartLayersViewModel'),context['key']()('aggregationPeriodViewModel'),context['key']()('drawingGroupsViewModel'),context['key']()('tradingViewModel'),context['key']()('tradingCoreViewModel'),context['key']()('orderEntryViewModel'),(_0x284098,_0x1ec21c,_0x28889a,_0xa202f3,_0x1478ea,_0xf7f2af,_0x250f40,_0x3bc87e,_0x55ccb6,_0x5edaa7,_0x5e31d2,_0x148a91,_0xc83ce6,_0x36b450)=>({'chartDataViewModel':_0x284098,'chartConfiguratorViewModel':_0x1ec21c,'compareChartViewModel':_0x28889a,'yAxisConfiguratorViewModel':_0xa202f3,'studiesSettingsViewModel':_0x1478ea,'chartTypeViewModel':_0xf7f2af,'drawingViewModel':_0x250f40,'chartLegendVM':_0x3bc87e,'chartLayersViewModel':_0x55ccb6,'aggregationPeriodViewModel':_0x5edaa7,'drawingGroupsViewModel':_0x5e31d2,'tradingViewModel':_0x148a91,'tradingCoreViewModel':_0xc83ce6,'orderEntryViewModel':_0x36b450}));