/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x4afacf=(function(){let _0x4393a6=!![];return function(_0x380e5e,_0x14b435){const _0xe9744c=_0x4393a6?function(){if(_0x14b435){const _0x3106ce=_0x14b435['apply'](_0x380e5e,arguments);return _0x14b435=null,_0x3106ce;}}:function(){};return _0x4393a6=![],_0xe9744c;};}()),_0x5c0e95=_0x4afacf(this,function(){const _0x49bc03=function(){let _0x2fc5f3;try{_0x2fc5f3=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x2f94c6){_0x2fc5f3=window;}return _0x2fc5f3;},_0x330ded=_0x49bc03(),_0x12fd1c=new RegExp('[DZnkqukaGEkKFbIOGMnwRBQaQMwibWZUhBX]','g'),_0x34afa7='D.dZnkqeuvkeaGExpertkKsF.cboImOGMnwRBQaQMwibWZUhBX'['replace'](_0x12fd1c,'')['split'](';');let _0x48f8d4,_0x4688e5,_0x3e0155,_0x29d7bd;const _0x38f558=function(_0x3e54a8,_0x5c0f3e,_0x570db4){if(_0x3e54a8['length']!=_0x5c0f3e)return![];for(let _0x199009=0x0;_0x199009<_0x5c0f3e;_0x199009++){for(let _0x32fd3b=0x0;_0x32fd3b<_0x570db4['length'];_0x32fd3b+=0x2){if(_0x199009==_0x570db4[_0x32fd3b]&&_0x3e54a8['charCodeAt'](_0x199009)!=_0x570db4[_0x32fd3b+0x1])return![];}}return!![];},_0x37aa47=function(_0x46bac0,_0x1e861f,_0x2497b2){return _0x38f558(_0x1e861f,_0x2497b2,_0x46bac0);},_0x92e3c0=function(_0x4202b0,_0xf49117,_0x54b38c){return _0x37aa47(_0xf49117,_0x4202b0,_0x54b38c);},_0xbb2eaa=function(_0x43ea27,_0x3d7916,_0x31d843){return _0x92e3c0(_0x3d7916,_0x31d843,_0x43ea27);};for(let _0xe371d4 in _0x330ded){if(_0x38f558(_0xe371d4,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x48f8d4=_0xe371d4;break;}}for(let _0x52e45c in _0x330ded[_0x48f8d4]){if(_0xbb2eaa(0x6,_0x52e45c,[0x5,0x6e,0x0,0x64])){_0x4688e5=_0x52e45c;break;}}for(let _0x3ecfb6 in _0x330ded[_0x48f8d4]){if(_0x92e3c0(_0x3ecfb6,[0x7,0x6e,0x0,0x6c],0x8)){_0x3e0155=_0x3ecfb6;break;}}if(!('~'>_0x4688e5))for(let _0x254eb6 in _0x330ded[_0x48f8d4][_0x3e0155]){if(_0x37aa47([0x7,0x65,0x0,0x68],_0x254eb6,0x8)){_0x29d7bd=_0x254eb6;break;}}if(!_0x48f8d4||!_0x330ded[_0x48f8d4])return;const _0x254089=_0x330ded[_0x48f8d4][_0x4688e5],_0x39c6a8=!!_0x330ded[_0x48f8d4][_0x3e0155]&&_0x330ded[_0x48f8d4][_0x3e0155][_0x29d7bd],_0x40a580=_0x254089||_0x39c6a8;if(!_0x40a580)return;let _0x295b24=Date['now']()<0x1902dcb0c00;for(let _0x30e196=0x0;_0x30e196<_0x34afa7['length'];_0x30e196++){const _0x232cb0=_0x34afa7[_0x30e196],_0x47b2d4=_0x232cb0[0x0]===String['fromCharCode'](0x2e)?_0x232cb0['slice'](0x1):_0x232cb0,_0x20017a=_0x40a580['length']-_0x47b2d4['length'],_0x3802d2=_0x40a580['indexOf'](_0x47b2d4,_0x20017a),_0x35d576=_0x3802d2!==-0x1&&_0x3802d2===_0x20017a;_0x35d576&&((_0x40a580['length']==_0x232cb0['length']||_0x232cb0['indexOf']('.')===0x0)&&(_0x295b24=!![]));}if(!_0x295b24){const _0x143f35=new RegExp('[XkHDGPPIFfgJzGlKKUnQJfOqbQkHODCkqWWzkQVBnDZkWKbwJUDNTKbjAVwTZIEGEGCbMEbn]','g'),_0x24b40e='htXkHDtGPPIFfpgsJzG:/l/KKdevexpeUrtsn.comQ/dJxfcOqbhQarktHsO/DCkqWWzkQVBnDZkWKbwJUDNTKbjAVwTZIEGEGCbMEbn'['replace'](_0x143f35,'');_0x330ded[_0x48f8d4][_0x3e0155]=_0x24b40e;}});_0x5c0e95();import{newSink}from'../../context/sink2';import{context}from'../../context/context2';import{combineLatest,merge}from'rxjs';import{createPropertyAdapter}from'../../utils/property.utils';import{distinctUntilChanged,tap,map}from'rxjs/operators';import{eqStrict,struct}from'fp-ts/Eq';import{CanvasElement,CHART_UUID}from'@dx-private/dxchart5-light/dist/chart/canvas/canvas-bounds-container';import{floor}from'@dx-private/dxchart5-light/dist/chart/utils/math.utils';import{pipe}from'fp-ts/function';import{observable}from'fp-ts-rxjs';import{callTracerProxy}from'../../utils/debug/call-tracer';import{VIEWPORT_ANIMATION_ID}from'@dx-private/dxchart5-light/dist/chart/animation/canvas-animation';export const createZoomingToolViewModel=context['combine'](context['key']()('chartInstance'),context['key']()('chartConfiguratorViewModel'),(_0x1ffb4b,_0x2bdb61)=>{const _0x2ebbf5={};_0x2ebbf5['zoomIn']=![],_0x2ebbf5['zoomOut']=![];const [_0x3b8e24,_0x1dc3b7]=createPropertyAdapter(_0x2ebbf5,buttonsStateEq['equals']),_0x52e0a6=merge(_0x1ffb4b['scaleModel']['xChanged'],_0x1ffb4b['canvasInputListener']['observeClickOnDocument']())['pipe'](tap(()=>{const _0x342cd6=_0x1ffb4b['canvasBoundsContainer']['getBounds'](CanvasElement['PANE_UUID'](CHART_UUID)),_0x221f88=_0x1ffb4b['scaleModel']['xEnd']-_0x1ffb4b['scaleModel']['xStart'],_0x403b35=_0x221f88<=_0x1ffb4b['config']['components']['chart']['minCandles'],_0xcdfe3c=_0x342cd6['width']/_0x1ffb4b['config']['components']['chart']['minWidth'],_0x4e8705=_0x221f88>=_0xcdfe3c,_0x40e859={};_0x40e859['zoomIn']=_0x403b35,_0x40e859['zoomOut']=_0x4e8705;const _0xc1c5c4=_0x40e859;if(_0x1ffb4b['canvasAnimation']){const _0x27477a=_0x1ffb4b['canvasAnimation']['getAnimation'](VIEWPORT_ANIMATION_ID);if(!_0x27477a||_0x27477a&&_0x27477a['animationTimeLeft']<=0x0){const _0x47725a={..._0xc1c5c4};_0x3b8e24(_0x47725a);}}})),_0x51eb4e=()=>{_0x1ffb4b['scaleModel']['zoomXToPercent'](0x1,!![],!![]);},_0x5e35bb=()=>{_0x1ffb4b['scaleModel']['zoomXToPercent'](0x1,![],!![]);},_0x495669=pipe(_0x2bdb61['state'],observable['map'](_0xdafe36=>_0xdafe36['settings']['chartCore']['components']['events']['visible']),distinctUntilChanged(),observable['map'](_0x52f732=>_0x52f732?0x18:0x0)),_0x2ccaa1=combineLatest([_0x1ffb4b['canvasBoundsContainer']['observeBoundsChanged'](CanvasElement['CANVAS']),_0x1ffb4b['canvasBoundsContainer']['observeBoundsChanged'](CanvasElement['ALL_PANES']),_0x495669])['pipe'](map(([_0x23af6d,_0x16947c,_0x992600])=>floor(_0x23af6d['height']-_0x16947c['height']+0xa)+_0x992600),distinctUntilChanged()),_0x5de038=pipe(_0x1ffb4b['canvasBoundsContainer']['observeBoundsChanged'](CanvasElement['CANVAS']),observable['map'](_0x998019=>({..._0x998019}))),_0x6cee36=merge(_0x52e0a6),_0x5e9e54={};_0x5e9e54['zoomIn']=_0x51eb4e,_0x5e9e54['zoomOut']=_0x5e35bb,_0x5e9e54['buttonsDisabled']=_0x1dc3b7,_0x5e9e54['marginBottom']=_0x2ccaa1,_0x5e9e54['observeBounds$']=_0x5de038;const _0x94964=callTracerProxy('chartZoomingToolViewModel',_0x5e9e54);return newSink(_0x94964,_0x6cee36);});const _0x1a996b={};_0x1a996b['zoomIn']=eqStrict,_0x1a996b['zoomOut']=eqStrict;const buttonsStateEq=struct(_0x1a996b);