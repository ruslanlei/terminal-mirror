{"version":3,"file":"Picture.vue2.js","sources":["../../../../../components/picture/Picture.vue"],"sourcesContent":["<template>\n  <img\n    :class=\"[\n      $style.picture,\n      isFill && $style.fill,\n      loaded && $style.loaded,\n    ]\"\n    :style=\"computedStyles\"\n    :src=\"src\"\n    :srcset=\"srcset\"\n    :alt=\"alt\"\n  >\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  ref,\n  computed,\n  toRefs,\n  watch,\n} from 'vue';\nimport { PictureProps } from './index';\n\nconst props = withDefaults(\n  defineProps<PictureProps>(),\n  {\n    transitionDuration: 200,\n  },\n);\nconst {\n  src,\n  srcset,\n  transitionDuration,\n} = toRefs(props);\n\nconst loaded = ref(false);\n\nconst computedStyles = computed(() => ({\n  transition: `opacity ${transitionDuration.value}ms`,\n}));\n\nconst preload = () => {\n  const img = document.createElement('img');\n  if (src?.value) {\n    img.src = src.value;\n  }\n  if (srcset?.value) {\n    img.srcset = srcset.value;\n  }\n\n  img.style.display = 'none';\n  img.onload = () => {\n    loaded.value = true;\n    img.remove();\n  };\n\n  document.documentElement.appendChild(img);\n};\n\npreload();\n\nwatch([src, srcset], () => {\n  loaded.value = false;\n  preload();\n});\n</script>\n\n<style lang=\"scss\" module>\n.picture {\n  display: block;\n  opacity: 0;\n  background-size: cover;\n  &.loaded {\n    opacity: 1;\n  }\n}\n\n.fill {\n  width: 100%;\n  height: 100%;\n}\n</style>\n"],"names":["src","srcset","transitionDuration","toRefs","props","loaded","ref","computedStyles","computed","preload","img","watch"],"mappings":";;;;;;;;;;;iBA6BM;AAAA,MACJ,KAAAA;AAAA,MACA,QAAAC;AAAA,MACA,oBAAAC;AAAA,IAAA,IACEC,EAAOC,CAAK,GAEVC,IAASC,EAAI,EAAK,GAElBC,IAAiBC,EAAS,OAAO;AAAA,MACrC,YAAY,WAAWN,EAAmB;AAAA,IAC1C,EAAA,GAEIO,IAAU,MAAM;AACd,YAAAC,IAAM,SAAS,cAAc,KAAK;AACxC,MAAIV,KAAA,QAAAA,EAAK,UACPU,EAAI,MAAMV,EAAI,QAEZC,KAAA,QAAAA,EAAQ,UACVS,EAAI,SAAST,EAAO,QAGtBS,EAAI,MAAM,UAAU,QACpBA,EAAI,SAAS,MAAM;AACjB,QAAAL,EAAO,QAAQ,IACfK,EAAI,OAAO;AAAA,MAAA,GAGJ,SAAA,gBAAgB,YAAYA,CAAG;AAAA,IAAA;AAGlC,WAAAD,KAERE,EAAM,CAACX,GAAKC,CAAM,GAAG,MAAM;AACzB,MAAAI,EAAO,QAAQ,IACPI;IAAA,CACT;;;;;;;;;;;;;"}