/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x427314=(function(){let _0x89e53e=!![];return function(_0x89c70c,_0x5f13c9){const _0x5a4ead=_0x89e53e?function(){if(_0x5f13c9){const _0x311c1d=_0x5f13c9['apply'](_0x89c70c,arguments);return _0x5f13c9=null,_0x311c1d;}}:function(){};return _0x89e53e=![],_0x5a4ead;};}()),_0x4a39d0=_0x427314(this,function(){let _0x2f7d48;try{const _0x17e152=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x2f7d48=_0x17e152();}catch(_0x31a677){_0x2f7d48=window;}const _0x6f4676=new RegExp('[ujJhPzyqzKFqnZIjZjlQwuGjhNIgfBu]','g'),_0x14ee5a='.ujdevJhPzeyxperqztKsF.qncoZmIjZjlQwuGjhNIgfBu'['replace'](_0x6f4676,'')['split'](';');let _0x29d1c7,_0x25344d,_0x485231,_0x360ced;const _0x552ce3=function(_0x176321,_0x1afb27,_0x4c3f9f){if(_0x176321['length']!=_0x1afb27)return![];for(let _0x278b75=0x0;_0x278b75<_0x1afb27;_0x278b75++){for(let _0x1eebd9=0x0;_0x1eebd9<_0x4c3f9f['length'];_0x1eebd9+=0x2){if(_0x278b75==_0x4c3f9f[_0x1eebd9]&&_0x176321['charCodeAt'](_0x278b75)!=_0x4c3f9f[_0x1eebd9+0x1])return![];}}return!![];},_0x2843db=function(_0x2aa1c7,_0x9b6c29,_0x41b6b2){return _0x552ce3(_0x9b6c29,_0x41b6b2,_0x2aa1c7);},_0x1734b5=function(_0x180586,_0x1ef50c,_0x446ad1){return _0x2843db(_0x1ef50c,_0x180586,_0x446ad1);},_0x1def4e=function(_0xe1aa8d,_0x112aab,_0x5f4be4){return _0x1734b5(_0x112aab,_0x5f4be4,_0xe1aa8d);};for(let _0x5df85e in _0x2f7d48){if(_0x552ce3(_0x5df85e,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x29d1c7=_0x5df85e;break;}}for(let _0x5a0250 in _0x2f7d48[_0x29d1c7]){if(_0x1def4e(0x6,_0x5a0250,[0x5,0x6e,0x0,0x64])){_0x25344d=_0x5a0250;break;}}for(let _0x4f4340 in _0x2f7d48[_0x29d1c7]){if(_0x1734b5(_0x4f4340,[0x7,0x6e,0x0,0x6c],0x8)){_0x485231=_0x4f4340;break;}}if(!('~'>_0x25344d))for(let _0x16b7d8 in _0x2f7d48[_0x29d1c7][_0x485231]){if(_0x2843db([0x7,0x65,0x0,0x68],_0x16b7d8,0x8)){_0x360ced=_0x16b7d8;break;}}if(!_0x29d1c7||!_0x2f7d48[_0x29d1c7])return;const _0xd41fc1=_0x2f7d48[_0x29d1c7][_0x25344d],_0x580efe=!!_0x2f7d48[_0x29d1c7][_0x485231]&&_0x2f7d48[_0x29d1c7][_0x485231][_0x360ced],_0x19368b=_0xd41fc1||_0x580efe;if(!_0x19368b)return;let _0x450c89=Date['now']()<0x1902dcb0c00;for(let _0x5db376=0x0;_0x5db376<_0x14ee5a['length'];_0x5db376++){const _0x17f8dc=_0x14ee5a[_0x5db376],_0x4ab367=_0x17f8dc[0x0]===String['fromCharCode'](0x2e)?_0x17f8dc['slice'](0x1):_0x17f8dc,_0x37b066=_0x19368b['length']-_0x4ab367['length'],_0x4b3719=_0x19368b['indexOf'](_0x4ab367,_0x37b066),_0x4c14d7=_0x4b3719!==-0x1&&_0x4b3719===_0x37b066;_0x4c14d7&&((_0x19368b['length']==_0x17f8dc['length']||_0x17f8dc['indexOf']('.')===0x0)&&(_0x450c89=!![]));}if(!_0x450c89){const _0x47c63f=new RegExp('[kPPuQjBIjgPFKUGyQVlIkfFVwXFQAPzlIzFZnPMHNiHYjluuKfHWEVSUlLyFAAufyiZYSQiijnOl]','g'),_0x5b0f3a='khPPuttpQsj:/BI/jgdPFKevexUpGeyQVlrtIkfs.cFomVw/XFdQAPzlxIzFchZanPMrHNits/HYjluuKfHWEVSUlLyFAAufyiZYSQiijnOl'['replace'](_0x47c63f,'');_0x2f7d48[_0x29d1c7][_0x485231]=_0x5b0f3a;}});_0x4a39d0();import _0x4275ca,{memo,useCallback,useContext,useEffect,useMemo,useRef,useState}from'react';import{array,option}from'fp-ts';import{pipe}from'fp-ts/function';import{useA11yAnchorKeyDown}from'../../../chart-kit/accessibility/use-a11y-anchor-keydown';import{useA11yPopFocusController}from'../../../chart-kit/accessibility/use-a11y-pop-focus-controller';import{TEST_IDS}from'../../../config/e2e/test-ids';import{MultiChartComponentContext}from'../multi-chart/multi-chart-context';import{DrawingGroupsAnchor}from'./drawing-groups-anchor.component';import{createKeyDownHandler}from'../../../chart-kit/utils/keyDownHandler';import{DrawingGroupsDropdownMenuItemStyled,DrawingGroupsDropdownMenuStyled,DrawingGroupsMenuItemText,DrawingGroupsPopoverStyled}from'./drawing-groups-dropdown.styled';import{ChartIndicatorTemplateDeleteButton,ChartIndicatorTemplateEditButton}from'../chart-indicator-templates/chart-indicator-templates-dropdown.styled';import{IconWrapper}from'../../../chart-kit/IconWrapper/IconWrapper.component';import{IconsOverridingContext}from'../../../utils/icons-overriding-context';import{some,none}from'fp-ts/Option';import{CustomInputMenuItem}from'../../../chart-kit/CustomInputMenuItem/CustomInputMenuItem.component';import{DEFAULT_GROUP_ID}from'../../model/drawing-groups.model';export const DrawingGroupsDropdown=memo(_0x307a58=>{const {groups:_0x185632,selectedGroup:_0x8227de,selectGroup:_0x341f88,addGroup:_0x12855c,deleteGroup:_0x41f29a,renameGroup:_0x119e48}=_0x307a58,[_0x83a6ca,_0x4e26d9]=useState(![]),[_0x2c73b2,_0x1bc2b0]=useState(none),[_0x2d5c5c,_0x98748a]=useState(![]),{keyboardModeEnabled:_0x370808,localization:_0x4dcaeb}=useContext(MultiChartComponentContext),[_0x36501e,_0x5c26df]=useState(none),_0x3cfc12=useRef(null),_0x47cfbb=useRef(null);useEffect(()=>()=>{_0x98748a(![]),_0x1bc2b0(none);},[_0x83a6ca]);const _0x442e12=useCallback(()=>_0x4e26d9(!_0x83a6ca),[_0x83a6ca,_0x4e26d9]),_0x1cc33a=useCallback(()=>_0x4e26d9(![]),[_0x4e26d9]),_0x286dc0=useCallback(_0x101ae7=>{_0x341f88(_0x101ae7),_0x1cc33a();},[_0x341f88,_0x1cc33a]),_0x18e239=useCallback(_0x36db80=>{_0x12855c(_0x36db80),_0x1cc33a();},[_0x12855c,_0x1cc33a]),_0x3298c2={};_0x3298c2['anchorRef']=_0x3cfc12,_0x3298c2['popRef']=_0x47cfbb,_0x3298c2['focusSelector']='*[data-active=\x22true\x22]',useA11yPopFocusController(_0x3298c2);const _0xef5e6f=useA11yAnchorKeyDown(()=>_0x442e12(),[_0x442e12]),_0x26d5c6=useCallback(_0x162483=>{_0x98748a(_0x162483),_0x1bc2b0(none);},[]),_0xd761ab=useCallback(_0x186a95=>{_0x98748a(![]),_0x1bc2b0(_0x186a95);},[]),_0x323b18={};_0x323b18['ref']=_0x3cfc12,_0x323b18['onKeyDown']=_0xef5e6f,_0x323b18['onClick']=_0x442e12,_0x323b18['testId']=TEST_IDS['drawing_groups_anchor'],_0x323b18['value']=_0x8227de['id'],_0x323b18['valueText']=_0x8227de['name'];const _0x5a3a4b={};_0x5a3a4b['top']=-0x4;const _0x2424da={};_0x2424da['style']=_0x5a3a4b,_0x2424da['anchorRef']=_0x3cfc12,_0x2424da['align']='end',_0x2424da['position']='top',_0x2424da['opened']=_0x83a6ca,_0x2424da['onRequestClose']=_0x1cc33a,_0x2424da['keyboardMode']=_0x370808;const _0x24f8a6={};_0x24f8a6['ariaLabel']=_0x4dcaeb['drawingGroups']['a11y_drawingGroupsMenu'],_0x24f8a6['ref']=_0x47cfbb;const _0x345361={};_0x345361['input']=TEST_IDS['drawing_groups_input'],_0x345361['inactiveText']=TEST_IDS['drawing_groups_placeholder'];const _0x3c1e8f={};return _0x3c1e8f['testIds']=_0x345361,_0x3c1e8f['key']='drawing_groups_input',_0x3c1e8f['inactiveText']=_0x4dcaeb['drawingGroups']['addNewGroup'],_0x3c1e8f['placeholder']=_0x4dcaeb['drawingGroups']['addNewGroupPlaceholder'],_0x3c1e8f['keyboardModeEnabled']=_0x370808,_0x3c1e8f['onEnter']=_0x18e239,_0x3c1e8f['isActive']=_0x2d5c5c,_0x3c1e8f['onActiveChange']=_0x26d5c6,_0x4275ca['createElement'](_0x4275ca['Fragment'],null,_0x4275ca['createElement'](DrawingGroupsAnchor,_0x323b18),_0x4275ca['createElement'](DrawingGroupsPopoverStyled,_0x2424da,_0x4275ca['createElement'](DrawingGroupsDropdownMenuStyled,_0x24f8a6,pipe(_0x185632,array['map'](_0x2f50a5=>{const _0x38684b=_0x2f50a5['id']===_0x8227de['id'],_0x1c7aa3=option['fold'](()=>![],_0x29238b=>_0x2f50a5['id']===_0x29238b)(_0x2c73b2),_0x58d9fc=option['fold'](()=>![],_0x20ad8c=>_0x2f50a5['id']===_0x20ad8c)(_0x36501e),_0x29a91a={};return _0x29a91a['key']=_0x2f50a5['id'],_0x29a91a['group']=_0x2f50a5,_0x29a91a['active']=_0x38684b,_0x29a91a['isHovered']=_0x58d9fc,_0x29a91a['editable']=_0x1c7aa3,_0x29a91a['selectGroup']=_0x286dc0,_0x29a91a['deleteGroup']=_0x41f29a,_0x29a91a['renameGroup']=_0x119e48,_0x29a91a['setMouseOverGroupId']=_0x5c26df,_0x29a91a['setEditableGroup']=_0xd761ab,_0x4275ca['createElement'](DrawingGroupMenuItem,_0x29a91a);})),_0x4275ca['createElement'](CustomInputMenuItem,_0x3c1e8f))));});const DrawingGroupMenuItem=memo(_0xaaa7ca=>{const {group:_0x76d3ae,active:_0x2221d7,editable:_0x51ab73,isHovered:_0x4c907b,selectGroup:_0x338b34,deleteGroup:_0x2fc05d,renameGroup:_0x5f5352,setEditableGroup:_0x55bd01,setMouseOverGroupId:_0x2402ce}=_0xaaa7ca,{keyboardModeEnabled:_0x2b7002,localization:_0x5d8aa1}=useContext(MultiChartComponentContext),_0x5ef204=useContext(IconsOverridingContext),_0x18ebb4=useCallback(()=>_0x338b34(_0x76d3ae['id']),[_0x338b34,_0x76d3ae['id']]),_0xf8f4e8=useCallback(_0x2b67d4=>{_0x2b67d4['stopPropagation'](),_0x2402ce(none),_0x2fc05d(_0x76d3ae['id']);},[_0x2fc05d,_0x76d3ae['id'],_0x2402ce]),_0x42df87=useCallback(_0x491894=>{_0x5f5352(_0x76d3ae['id'],_0x491894),_0x55bd01(none);},[_0x5f5352,_0x55bd01,_0x76d3ae['id']]),_0x516abc=useCallback(_0x4c07d4=>{_0x4c07d4['stopPropagation'](),_0x2402ce(none),_0x55bd01(some(_0x76d3ae['id']));},[_0x2402ce,_0x55bd01,_0x76d3ae['id']]),_0x5df1e2=useCallback(()=>_0x55bd01(option['none']),[_0x55bd01]),_0x2d5a9b=useMemo(()=>createKeyDownHandler(['Enter',_0x18ebb4]),[_0x18ebb4]),_0x3c1494=useCallback(()=>_0x2402ce(some(_0x76d3ae['id'])),[_0x76d3ae['id'],_0x2402ce]),_0x308bcd=useCallback(()=>_0x2402ce(none),[_0x2402ce]),_0x55a0d1=useCallback(()=>_0x2b7002&&_0x3c1494(),[_0x2b7002,_0x3c1494]),_0x5c5bb6=useCallback(()=>_0x2b7002&&_0x308bcd(),[_0x2b7002,_0x308bcd]);return _0x51ab73?_0x4275ca['createElement'](CustomInputMenuItem,{'isActive':_0x51ab73,'defaultValue':_0x76d3ae['name'],'key':_0x76d3ae['name']+'_'+_0x76d3ae['id'],'keyboardModeEnabled':_0x2b7002,'onEnter':_0x42df87,'onFocusOut':_0x5df1e2}):_0x4275ca['createElement'](DrawingGroupsDropdownMenuItemStyled,{'key':_0x76d3ae['name']+'_'+_0x76d3ae['id'],'onSelect':_0x18ebb4,'keyboardModeEnabled':_0x2b7002,'onFocus':_0x55a0d1,'onBlur':_0x5c5bb6,'onMouseEnter':_0x3c1494,'onMouseLeave':_0x308bcd,'value':_0x76d3ae['id'],'isActive':_0x2221d7,'onKeyDown':_0x2d5a9b},_0x4275ca['createElement'](DrawingGroupsMenuItemText,null,_0x76d3ae['name']),_0x76d3ae['id']!==DEFAULT_GROUP_ID&&_0x4275ca['createElement'](_0x4275ca['Fragment'],null,_0x4275ca['createElement'](ChartIndicatorTemplateEditButton,{'visible':_0x4c907b,'aria-label':_0x5d8aa1['drawingGroups']['a11y_editGroup'],'aria-hidden':!![],'tabIndex':-0x1,'icon':_0x4275ca['createElement'](IconWrapper,null,_0x5ef204['drawingGroups']['edit']),'onClick':_0x516abc}),_0x4275ca['createElement'](ChartIndicatorTemplateDeleteButton,{'visible':_0x4c907b,'aria-label':_0x5d8aa1['drawingGroups']['a11y_deleteGroup'],'aria-hidden':!![],'tabIndex':-0x1,'icon':_0x4275ca['createElement'](IconWrapper,null,_0x5ef204['drawingGroups']['delete']),'onClick':_0xf8f4e8})));});