/*
 * Copyright (C) 2002 - 2023 Devexperts LLC
 * This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
 * If a copy of the MPL was not distributed with this file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
export const defaultDateTimeFormatter=()=>e=>e.toString(),dateTimeFormatterFactory=(e,n)=>{var a;const d="date.get"+(n((a=e.timezone)!==null&&a!==void 0?a:"")?"":"UTC"),r={YYYY:t("FullYear"),YY:t("FullYear")+" % 100",MMM:s("shortMonths","Month"),MMMM:l(s("shortMonths","Month")),M:"1+"+t("Month"),d:t("Date"),H:t("Hours"),m:t("Minutes"),s:t("Seconds"),sss:t("Milliseconds"),EEE:s("shortDays","Day"),SSS:"this.addTwoZeros("+t("Milliseconds")+")",T:"date.getTime()"};["s","m","H","d","M"].forEach(function(o){r[o+o]="this.addZero("+r[o]+")"});const i=new RegExp(Object.keys(r).sort().reverse().join("|"),"g");function t(o){return d+o+"()"}function s(o,h){return"this."+o+"["+t(h)+"]"}function l(o){return o+".toUpperCase()"}function c(o){return"' + ("+r[o]+") + '"}return function(o){var h;const M={shortDays:p(e),shortMonths:f(e),addZero(u){return u<10?"0"+u:u},addTwoZeros(u){return(u<100?"0":"")+(u<10?"0":"")+u},tzDate:n((h=e.timezone)!==null&&h!==void 0?h:"")||function(u){return u instanceof Date?u:new Date(+u)}};return new Function("date","date=this.tzDate(date); return '"+o.replace(i,c)+"'").bind(M)}};function p(e){var n;return(n=e.shortDays)!==null&&n!==void 0?n:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}function f(e){var n;return(n=e.shortMonths)!==null&&n!==void 0?n:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}export const recalculateXFormatter=(e,n,a)=>{if(e){if(typeof e=="string")return a(e);if(Array.isArray(e)){const d=e.filter(r=>{if(r.showWhen){const i=[];return r.showWhen.periodLessThen&&i.push(()=>{var t,s;return n<((s=(t=r.showWhen)===null||t===void 0?void 0:t.periodLessThen)!==null&&s!==void 0?s:0)}),r.showWhen.periodMoreThen&&i.push(()=>{var t,s;return n>=((s=(t=r.showWhen)===null||t===void 0?void 0:t.periodMoreThen)!==null&&s!==void 0?s:0)}),i.every(t=>t())}else return!0});if(d.length>0){const r=d[0];if(r.format)return a(r.format);if(r.customFormatter)return r.customFormatter}}}return defaultDateTimeFormatter()};
