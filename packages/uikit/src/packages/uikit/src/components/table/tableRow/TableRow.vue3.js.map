{"version":3,"file":"TableRow.vue3.js","sources":["../../../../../../components/table/tableRow/TableRow.vue"],"sourcesContent":["<template>\n  <div\n    ref=\"row\"\n    :class=\"[\n      $style.recordWrapper,\n      isChildrenVisible && $style.childrenVisible,\n      ...computedStates,\n    ]\"\n  >\n    <div\n      :class=\"[\n        $style.record,\n        record.isSelected && $style.selected,\n      ]\"\n      :style=\"computedRowStyles\"\n    >\n      <slot :toggle-children=\"toggleChildren\" />\n    </div>\n    <div\n      v-if=\"'children' in $slots\"\n      :class=\"$style.childrenContainer\"\n      :style=\"computedChildrenContainerStyle\"\n    >\n      <div\n        ref=\"children\"\n        :class=\"$style.children\"\n      >\n        <slot\n          v-if=\"isChildrenVisible\"\n          name=\"children\"\n          :data=\"record.children\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  ref,\n  computed,\n  watch,\n  reactive, onMounted, onBeforeUnmount, nextTick,\n} from 'vue';\nimport { useComputedState } from '@/hooks/useComputedState';\nimport { useEnvironmentObserver } from '@/hooks/useEnvironmentObserver';\nimport { TableRowProps } from './index';\n\nconst props = defineProps<TableRowProps>();\n\nconst row = ref();\n\nconst children = ref<HTMLElement>();\n\nconst computedRowStyles = computed(() => ({\n  gridTemplateColumns: props.gridColumns,\n}));\n\nconst computedStates = useComputedState(props);\n\nconst computedChildrenContainerStyle = reactive({\n  height: '0px',\n  transition: 'height 160ms',\n});\n\nconst isChildrenVisible = ref(false);\nconst toggleChildren = () => {\n  isChildrenVisible.value = !isChildrenVisible.value;\n};\n\nconst calculateChildrenStyle = () => {\n  if (isChildrenVisible.value && children.value) {\n    const { height } = children.value.getBoundingClientRect();\n    computedChildrenContainerStyle.height = `${height}px`;\n    computedChildrenContainerStyle.transition = `height ${Math.min(Math.max(height * 3, 160), 300)}ms`;\n  } else {\n    computedChildrenContainerStyle.height = '0px';\n  }\n};\n\nwatch(isChildrenVisible, async () => {\n  await nextTick();\n  calculateChildrenStyle();\n});\n\nconst {\n  setListeners,\n  removeListeners,\n} = useEnvironmentObserver(row, calculateChildrenStyle);\n\nonMounted(setListeners);\nonBeforeUnmount(removeListeners);\n</script>\n\n<style lang=\"scss\" module>\n@import \"src/assets/styles/utils\";\n\n.recordWrapper {\n  opacity: 1;\n}\n\n.record {\n  display: grid;\n  cursor: pointer;\n}\n.recordColumn {}\n\n.childrenContainer {\n  position: relative;\n  overflow: hidden;\n}\n\n.children {\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n}\n\n// states\n.defaultSize {\n  border-radius: 5px;\n  .record {\n    padding: 16px;\n  }\n  .childrenContainer {\n    border-radius: 0 0 5px 5px;\n  }\n}\n\n.smSize {\n  .record {\n    padding: 10px 0;\n  }\n}\n\n.tinySize {\n  .record {\n    padding: 5px 0;\n  }\n}\n\n.orderListColor {\n  transition: background-color 150ms, opacity 200ms;\n  background-color: rgb(var(--color-background-1));\n  &:hover {\n    background-color: rgb(var(--color-background-3));\n  }\n  &.childrenVisible {\n    background-color: rgb(var(--color-background-3));\n  }\n  .childrenContainer {\n    transition: background-color 150ms;\n    background-color: rgb(var(--color-background-2));\n  }\n}\n\n.subOrdersColor {\n  &:not(:first-child) {\n    .record {\n      border-top: 1px solid rgb(var(--color-background-3));\n    }\n  }\n}\n\n.semiTransparent {\n  opacity: 0.65;\n}\n</style>\n"],"names":["row","ref","children","computedRowStyles","computed","props","computedStates","useComputedState","computedChildrenContainerStyle","reactive","isChildrenVisible","toggleChildren","calculateChildrenStyle","height","watch","nextTick","setListeners","removeListeners","useEnvironmentObserver","onMounted","onBeforeUnmount"],"mappings":";;;;;;;;;;;;iBAkDMA,IAAMC,KAENC,IAAWD,KAEXE,IAAoBC,EAAS,OAAO;AAAA,MACxC,qBAAqBC,EAAM;AAAA,IAC3B,EAAA,GAEIC,IAAiBC,EAAiBF,CAAK,GAEvCG,IAAiCC,EAAS;AAAA,MAC9C,QAAQ;AAAA,MACR,YAAY;AAAA,IAAA,CACb,GAEKC,IAAoBT,EAAI,EAAK,GAC7BU,IAAiB,MAAM;AACT,MAAAD,EAAA,QAAQ,CAACA,EAAkB;AAAA,IAAA,GAGzCE,IAAyB,MAAM;AAC/B,UAAAF,EAAkB,SAASR,EAAS,OAAO;AAC7C,cAAM,EAAE,QAAAW,EAAW,IAAAX,EAAS,MAAM,sBAAsB;AACxD,QAAAM,EAA+B,SAAS,GAAGK,OACZL,EAAA,aAAa,UAAU,KAAK,IAAI,KAAK,IAAIK,IAAS,GAAG,GAAG,GAAG,GAAG;AAAA;AAE7F,QAAAL,EAA+B,SAAS;AAAA,IAC1C;AAGF,IAAAM,EAAMJ,GAAmB,YAAY;AACnC,YAAMK,EAAS,GACQH;IAAA,CACxB;AAEK,UAAA;AAAA,MACJ,cAAAI;AAAA,MACA,iBAAAC;AAAA,IAAA,IACEC,EAAuBlB,GAAKY,CAAsB;AAEtD,WAAAO,EAAUH,CAAY,GACtBI,EAAgBH,CAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}