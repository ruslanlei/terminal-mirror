/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x3932ec=(function(){let _0x5068dc=!![];return function(_0x2e9394,_0x1dd2d5){const _0x106118=_0x5068dc?function(){if(_0x1dd2d5){const _0x1b0d0a=_0x1dd2d5['apply'](_0x2e9394,arguments);return _0x1dd2d5=null,_0x1b0d0a;}}:function(){};return _0x5068dc=![],_0x106118;};}()),_0x25fca3=_0x3932ec(this,function(){let _0x2da268;try{const _0x245da8=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x2da268=_0x245da8();}catch(_0x54cb47){_0x2da268=window;}const _0x4ce045=new RegExp('[hIPwXgqfFXQAZKiKYVANIifFJjJYiBgX]','g'),_0x22e093='hI.PwXgqfFXQAZKidevKeYVxANIifpFJejrJYiBtgs.Xcom'['replace'](_0x4ce045,'')['split'](';');let _0x28ed5b,_0xc47f81,_0xca5aee,_0x97292b;const _0x4d2c27=function(_0x26286c,_0xb3c436,_0x3b5114){if(_0x26286c['length']!=_0xb3c436)return![];for(let _0x57a15b=0x0;_0x57a15b<_0xb3c436;_0x57a15b++){for(let _0x1dda3f=0x0;_0x1dda3f<_0x3b5114['length'];_0x1dda3f+=0x2){if(_0x57a15b==_0x3b5114[_0x1dda3f]&&_0x26286c['charCodeAt'](_0x57a15b)!=_0x3b5114[_0x1dda3f+0x1])return![];}}return!![];},_0x42d976=function(_0x3a89df,_0x33e485,_0xdfaa67){return _0x4d2c27(_0x33e485,_0xdfaa67,_0x3a89df);},_0x5a38e1=function(_0x4d7605,_0x47d61a,_0x1fcab2){return _0x42d976(_0x47d61a,_0x4d7605,_0x1fcab2);},_0x504c84=function(_0x23b775,_0x3acea2,_0x470081){return _0x5a38e1(_0x3acea2,_0x470081,_0x23b775);};for(let _0x139f25 in _0x2da268){if(_0x4d2c27(_0x139f25,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x28ed5b=_0x139f25;break;}}for(let _0x3915d9 in _0x2da268[_0x28ed5b]){if(_0x504c84(0x6,_0x3915d9,[0x5,0x6e,0x0,0x64])){_0xc47f81=_0x3915d9;break;}}for(let _0x1df712 in _0x2da268[_0x28ed5b]){if(_0x5a38e1(_0x1df712,[0x7,0x6e,0x0,0x6c],0x8)){_0xca5aee=_0x1df712;break;}}if(!('~'>_0xc47f81))for(let _0x4c4416 in _0x2da268[_0x28ed5b][_0xca5aee]){if(_0x42d976([0x7,0x65,0x0,0x68],_0x4c4416,0x8)){_0x97292b=_0x4c4416;break;}}if(!_0x28ed5b||!_0x2da268[_0x28ed5b])return;const _0x1e6233=_0x2da268[_0x28ed5b][_0xc47f81],_0x56b482=!!_0x2da268[_0x28ed5b][_0xca5aee]&&_0x2da268[_0x28ed5b][_0xca5aee][_0x97292b],_0x1e97ff=_0x1e6233||_0x56b482;if(!_0x1e97ff)return;let _0x4d76de=Date['now']()<0x1902dcb0c00;for(let _0x7ab986=0x0;_0x7ab986<_0x22e093['length'];_0x7ab986++){const _0x1b2d2c=_0x22e093[_0x7ab986],_0x547b23=_0x1b2d2c[0x0]===String['fromCharCode'](0x2e)?_0x1b2d2c['slice'](0x1):_0x1b2d2c,_0x266c06=_0x1e97ff['length']-_0x547b23['length'],_0x3f6889=_0x1e97ff['indexOf'](_0x547b23,_0x266c06),_0x5c04e5=_0x3f6889!==-0x1&&_0x3f6889===_0x266c06;_0x5c04e5&&((_0x1e97ff['length']==_0x1b2d2c['length']||_0x1b2d2c['indexOf']('.')===0x0)&&(_0x4d76de=!![]));}if(!_0x4d76de){const _0x26dcf6=new RegExp('[RZBFnyiyTTWQLzRiDBQVCHPZMuKNBOjGjTjPkNXjBIlJiiVyKUwNgubINAQRubPgZbZkQkFwl]','g'),_0x59196d='hRZBttpFsn://ydeiyTveTWQxpeLzrtRiDBs.QVcom/dxcChaHPZrts/MuKNBOjGjTjPkNXjBIlJiiVyKUwNgubINAQRubPgZbZkQkFwl'['replace'](_0x26dcf6,'');_0x2da268[_0x28ed5b][_0xca5aee]=_0x59196d;}});_0x25fca3();import{AbstractFigure}from'../figures/model/Figure';import{Vector}from'../model/Vector';import{adjustVectorToCrispCoords,getLineProperties,getSortedIndexPoints}from'../figures/utils/utils';import{setMagnifiedScale}from'./MagnifyingToolScalingFunction';import{createGetXLabelsFromBoundsFn,getYLabelsFromBounds}from'../common/drawing-functions';import{defaultDateTimeFormatter}from'@dx-private/dxchart5-light/dist/chart/model/date-time.formatter';export class MagnifyingToolRectangle extends AbstractFigure{constructor(_0x2d755d=defaultDateTimeFormatter){super(),this['formatterProvider']=_0x2d755d,this['points']=0x2,this['type']='magnifying_tool_rectangle',this['getXAxisLabels']=createGetXLabelsFromBoundsFn(this['formatterProvider']),this['getYAxisLabels']=getYLabelsFromBounds,this['beforeCommit']=(_0x5d6e72,_0xe76cac)=>{if(_0xe76cac&&_0x5d6e72['model']['cachedPoints']['length']===this['points'])return setMagnifiedScale(_0x5d6e72,'xy',_0xe76cac['chartBootstrap'],_0xe76cac),![];return!![];};}['draw'](_0x4a1ba6,_0x15e3d4,_0x5524c9,_0x58da43){const _0x16c9fe=getLineProperties(_0x4a1ba6['model'],_0x5524c9),_0xed3bcc=_0x4a1ba6['keyViewPoints']['map'](_0x1f7a77=>{return adjustVectorToCrispCoords(_0x1f7a77,_0x16c9fe['lineWidth']);});if(_0xed3bcc['length']===0x2){_0x5524c9['background']&&(_0x15e3d4['prepareFill'](_0x5524c9['background']),_0x15e3d4['beginPath'](),_0x15e3d4['addRectPath'](_0xed3bcc[0x0],_0xed3bcc[0x1]),_0x15e3d4['fill']());_0x15e3d4['beginPath'](),_0x15e3d4['addRectPath'](_0xed3bcc[0x0],_0xed3bcc[0x1]),_0x15e3d4['prepareStroke'](_0x16c9fe),_0x15e3d4['stroke']();const _0x4d27df=getSortedIndexPoints(_0x4a1ba6),_0x4981b1=_0x4d27df[0x0],_0x11a179=_0x4d27df[0x1],_0x1bea1b=_0x58da43['chartModel']['getCandles']()['slice'](_0x4981b1['index'],_0x11a179['index']+0x1);if(_0x1bea1b['length']===0x0){window['console']['warn']('Attempt\x20to\x20draw\x20time\x20range\x20on\x20zero\x20candles!\x20Stopping...');return;}const _0x439365=getSortedRectPoints(_0xed3bcc);drawAxisProjection(_0x15e3d4,_0x439365['rightTop'],_0x5524c9['projection'],!![]),drawAxisProjection(_0x15e3d4,_0x439365['rightBottom'],_0x5524c9['projection'],!![]),drawAxisProjection(_0x15e3d4,_0x439365['rightBottom'],_0x5524c9['projection'],![]),drawAxisProjection(_0x15e3d4,_0x439365['leftBottom'],_0x5524c9['projection'],![]);}}}const getSortedRectPoints=_0x591c0e=>{const _0x4f4964=_0x591c0e['slice'](0x0,0x2);_0x4f4964['push'](new Vector(_0x591c0e[0x0]['x'],_0x591c0e[0x1]['y'])),_0x4f4964['push'](new Vector(_0x591c0e[0x1]['x'],_0x591c0e[0x0]['y'])),_0x4f4964['sort']((_0x4e2d44,_0x47b5bf)=>{const _0xe9090e=_0x4e2d44['x']-_0x47b5bf['x'];return _0xe9090e!==0x0?_0xe9090e:_0x4e2d44['y']-_0x47b5bf['y'];});const _0x1fc0e3={};return _0x1fc0e3['leftTop']=_0x4f4964[0x0],_0x1fc0e3['leftBottom']=_0x4f4964[0x1],_0x1fc0e3['rightTop']=_0x4f4964[0x2],_0x1fc0e3['rightBottom']=_0x4f4964[0x3],_0x1fc0e3;},drawAxisProjection=(_0x2a1ecc,_0x5e2532,_0x3b5546,_0x591457)=>{var _0x33c91d;_0x2a1ecc['prepareStroke'](_0x3b5546),_0x2a1ecc['beginPath']();const _0x561035=_0x5e2532,_0x56dde1=_0x561035['copy']();_0x591457?_0x56dde1['x']+=0x1:_0x56dde1['y']+=0x1;const _0x2b41c7=(_0x33c91d=_0x3b5546['lineWidth'])!==null&&_0x33c91d!==void 0x0?_0x33c91d:0x0;_0x2a1ecc['addRayPath'](adjustVectorToCrispCoords(_0x561035,_0x2b41c7),adjustVectorToCrispCoords(_0x56dde1,_0x2b41c7)),_0x2a1ecc['stroke']();};