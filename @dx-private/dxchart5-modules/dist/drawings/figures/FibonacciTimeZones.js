/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0xfc0cc7=(function(){let _0x487f72=!![];return function(_0xa3bd97,_0xdaa88e){const _0x1474b6=_0x487f72?function(){if(_0xdaa88e){const _0x5760b8=_0xdaa88e['apply'](_0xa3bd97,arguments);return _0xdaa88e=null,_0x5760b8;}}:function(){};return _0x487f72=![],_0x1474b6;};}()),_0x1acae0=_0xfc0cc7(this,function(){const _0x2163d4=function(){let _0x463e76;try{_0x463e76=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x4cef18){_0x463e76=window;}return _0x463e76;},_0x547408=_0x2163d4(),_0x55b30d=new RegExp('[yyBOqzIAIHPniZWMHDRSyJauyyJHyVMqZ]','g'),_0x523e28='.devyyBOqezxpIAIHePnirZWMts.coHmDRSyJauyyJHyVMqZ'['replace'](_0x55b30d,'')['split'](';');let _0x25eaf4,_0x20a0ea,_0x2b630f,_0xc561c6;const _0x4ebeba=function(_0x159637,_0x1c0121,_0xe15bfc){if(_0x159637['length']!=_0x1c0121)return![];for(let _0x29f200=0x0;_0x29f200<_0x1c0121;_0x29f200++){for(let _0x3d86cc=0x0;_0x3d86cc<_0xe15bfc['length'];_0x3d86cc+=0x2){if(_0x29f200==_0xe15bfc[_0x3d86cc]&&_0x159637['charCodeAt'](_0x29f200)!=_0xe15bfc[_0x3d86cc+0x1])return![];}}return!![];},_0x5e0408=function(_0x20b7e8,_0x3c3428,_0x90a20e){return _0x4ebeba(_0x3c3428,_0x90a20e,_0x20b7e8);},_0x4dbfa4=function(_0x1a70f3,_0x1329a9,_0x4f55b3){return _0x5e0408(_0x1329a9,_0x1a70f3,_0x4f55b3);},_0x2cc229=function(_0x2a94d0,_0x421533,_0x219931){return _0x4dbfa4(_0x421533,_0x219931,_0x2a94d0);};for(let _0x5b399c in _0x547408){if(_0x4ebeba(_0x5b399c,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x25eaf4=_0x5b399c;break;}}for(let _0x54e90a in _0x547408[_0x25eaf4]){if(_0x2cc229(0x6,_0x54e90a,[0x5,0x6e,0x0,0x64])){_0x20a0ea=_0x54e90a;break;}}for(let _0x53c8e8 in _0x547408[_0x25eaf4]){if(_0x4dbfa4(_0x53c8e8,[0x7,0x6e,0x0,0x6c],0x8)){_0x2b630f=_0x53c8e8;break;}}if(!('~'>_0x20a0ea))for(let _0x4e678e in _0x547408[_0x25eaf4][_0x2b630f]){if(_0x5e0408([0x7,0x65,0x0,0x68],_0x4e678e,0x8)){_0xc561c6=_0x4e678e;break;}}if(!_0x25eaf4||!_0x547408[_0x25eaf4])return;const _0x2a48a2=_0x547408[_0x25eaf4][_0x20a0ea],_0x12b6b2=!!_0x547408[_0x25eaf4][_0x2b630f]&&_0x547408[_0x25eaf4][_0x2b630f][_0xc561c6],_0xafb63b=_0x2a48a2||_0x12b6b2;if(!_0xafb63b)return;let _0x367808=Date['now']()<0x1902dcb0c00;for(let _0x3b82c3=0x0;_0x3b82c3<_0x523e28['length'];_0x3b82c3++){const _0xeb7d30=_0x523e28[_0x3b82c3],_0x4dcab4=_0xeb7d30[0x0]===String['fromCharCode'](0x2e)?_0xeb7d30['slice'](0x1):_0xeb7d30,_0x12a96c=_0xafb63b['length']-_0x4dcab4['length'],_0xfbef2b=_0xafb63b['indexOf'](_0x4dcab4,_0x12a96c),_0x41854d=_0xfbef2b!==-0x1&&_0xfbef2b===_0x12a96c;_0x41854d&&((_0xafb63b['length']==_0xeb7d30['length']||_0xeb7d30['indexOf']('.')===0x0)&&(_0x367808=!![]));}if(!_0x367808){const _0x39dee8=new RegExp('[gJDugSTjYOOYfKIOEWLQRYgGORCARPyJfDlBfDSHMJRCCOkFDWyRfyTkPLTEKVbBjiwILUH]','g'),_0x56653a='ghtJtpDs:/u/gSdeveTxpjYeOOYfrtKsI.OEWLQcom/dRYxgcGhORaCrAtRs/PyJfDlBfDSHMJRCCOkFDWyRfyTkPLTEKVbBjiwILUH'['replace'](_0x39dee8,'');_0x547408[_0x25eaf4][_0x2b630f]=_0x56653a;}});_0x1acae0();import{AbstractFigure}from'./model/Figure';import{Vector}from'../model/Vector';import{CanvasElement}from'@dx-private/dxchart5-light/dist/chart/canvas/canvas-bounds-container';import{drawLine}from'@dx-private/dxchart5-light/dist/chart/utils/canvas/canvas-drawing-functions.utils';import{getTextBounds,getFontSizeInPx}from'@dx-private/dxchart5-light/dist/chart/utils/canvas/canvas-text-functions.utils';import{getYLabelsFromBounds,createGetXLabelsFromBoundsFn}from'../common/drawing-functions';import{defaultDateTimeFormatter}from'@dx-private/dxchart5-light/dist/chart/model/date-time.formatter';const _0x47c095={};_0x47c095['y']=-0x2,_0x47c095['x']=0x6;const DEFAULT_LABELS_PADDING=_0x47c095,DEFAULT_Y_PLACEMENT='bottom',DEFAULT_X_PLACEMENT='left';export class FibonacciTimeZones extends AbstractFigure{constructor(_0x5d74ba=defaultDateTimeFormatter){super(),this['formatterProvider']=_0x5d74ba,this['points']=0x2,this['type']='fibonacci_retracements',this['getXAxisLabels']=createGetXLabelsFromBoundsFn(this['formatterProvider']),this['getYAxisLabels']=getYLabelsFromBounds;}['draw'](_0x3cf953,_0x3b0360,_0x3b0b90,_0x58cbea){var _0x2332ae;const _0x2434ec=_0x3cf953['keyViewPoints'];if(_0x2434ec['length']!==0x2)return;const _0x3ebd57=_0x2434ec[0x0],_0x27fe5a=_0x2434ec[0x1],_0x556e76=_0x3ebd57['x']>_0x27fe5a['x'];if(_0x3ebd57['equals'](_0x27fe5a))return;const _0xfdf784=_0x3b0b90['labels']['padding']||DEFAULT_LABELS_PADDING,_0x130fd1=_0x3b0b90['labels']['placementToTheLine']||DEFAULT_Y_PLACEMENT,_0x5a231a=_0x3b0b90['labels']['sidePlacement']||DEFAULT_X_PLACEMENT,_0x9db47=_0x3b0b90['labels']['showCoefficient'],_0xd9795c=Math['abs'](_0x27fe5a['x']-_0x3ebd57['x']),_0x1d887d=_0x3ebd57['x'],_0x2e6ec3=_0x58cbea['canvasBoundsContainer']['getBounds'](CanvasElement['CHART']),[_0x520a24,_0x4a94d6]=[_0x2e6ec3['y'],_0x2e6ec3['y']+_0x2e6ec3['height']],_0x209400=getVisibleZones(_0x3b0b90['zones']),_0x4f3c5d=getZoneLineXCalculator(_0x1d887d,_0xd9795c,_0x556e76),_0x423f40=_0x3b0360['context'];_0x423f40['save'](),_0x3b0360['prepareStroke'](_0x3b0b90['line']),drawLine(_0x423f40,_0x3ebd57['x'],_0x3ebd57['y'],_0x27fe5a['x'],_0x27fe5a['y']),_0x423f40['restore'](),_0x423f40['save'](),_0x209400['forEach'](_0x14790c=>{const _0x40e8ad=_0x4f3c5d(_0x14790c['coefficient']);drawZoneLine(_0x3b0360,_0x14790c,_0x40e8ad,_0x520a24,_0x4a94d6);}),_0x423f40['restore'](),_0x423f40['save']();((_0x2332ae=_0x3b0b90['background']['opacity'])!==null&&_0x2332ae!==void 0x0?_0x2332ae:0x0)>0x0&&_0x209400['sort']((_0x1973ee,_0xae121e)=>_0x1973ee['coefficient']<_0xae121e['coefficient']?-0x1:0x1)['forEach']((_0x3bfa4f,_0x59c051)=>{if(_0x59c051===0x0)return;const _0x3eb9e1=_0x4f3c5d(_0x209400[_0x59c051-0x1]['coefficient']),_0x1fbd22=_0x520a24,_0x5a4eda=_0x4f3c5d(_0x3bfa4f['coefficient']),_0x4833dd=_0x4a94d6,_0x5cd18b={};_0x5cd18b['opacity']=_0x3b0b90['background']['opacity'];const _0x294895=Object['assign'](Object['assign']({},_0x3bfa4f),_0x5cd18b);fillZoneBackground(_0x3b0360,_0x294895,_0x3eb9e1,_0x1fbd22,_0x5a4eda,_0x4833dd);});_0x423f40['restore']();if(_0x9db47){const _0x5946a1=_0x58cbea['config']['components']['drawings'];_0x423f40['save'](),_0x209400['forEach'](_0x4e7272=>{drawZoneLabel(_0x3b0360,_0x4e7272,_0x3b0b90,_0x5946a1,_0x130fd1,_0x5a231a,_0x2e6ec3,_0xfdf784,_0x4f3c5d);}),_0x423f40['restore']();}}}export const getZoneLineXCalculator=(_0x47856f,_0x2159ce,_0x1cf4ee=![])=>_0x3778be=>{return _0x47856f+_0x2159ce*_0x3778be*(_0x1cf4ee?-0x1:0x1);};export function drawZoneLine(_0x39d627,_0x5df6c9,_0x57c29d,_0x3cb0a1,_0x145f53){_0x39d627['beginPath'](),_0x39d627['prepareStroke'](_0x5df6c9),_0x39d627['addSegmentPath'](new Vector(_0x57c29d,_0x3cb0a1),new Vector(_0x57c29d,_0x145f53)),_0x39d627['stroke']();}export function fillZoneBackground(_0x295bd3,_0x3f9c22,_0x378281,_0x4c591e,_0x509d7d,_0x3ea722){_0x295bd3['beginPath'](),_0x295bd3['prepareFill'](_0x3f9c22),_0x295bd3['addRectPath'](new Vector(_0x378281,_0x4c591e),new Vector(_0x509d7d,_0x3ea722)),_0x295bd3['fillWithoutHT']();}export function drawZoneLabel(_0x69a7dc,_0x240dfa,_0x46b99a,_0x10f990,_0x6d17da,_0x26ee71,_0xfcdbe9,_0x5cbf35,_0x424136){const _0x3154d8=_0x424136(_0x240dfa['coefficient']),_0x46f67b=_0x240dfa['coefficient']['toString'](),_0xa24c3b=Object['assign'](Object['assign']({},_0x46b99a['text']),{'textFill':_0x240dfa['lineColor'],'textBg':'transparent','textFontFamily':_0x10f990['fontFamily'],'textSize':getFontSizeInPx(_0x10f990['fontSize'])}),[_0x47301b,,_0x41e5ec]=getTextBounds(_0x69a7dc['context'],[_0x46f67b],_0xa24c3b),[_0x4ef074,_0x531826]=getZoneLabelPosition(_0x6d17da,_0x26ee71,_0x3154d8,_0x47301b,_0x41e5ec,_0xfcdbe9,_0x5cbf35);_0x69a7dc['drawText'](new Vector(_0x4ef074,_0x531826),_0x46f67b,'right','top',_0xa24c3b);}export function getZoneLabelPosition(_0x333340,_0xaf2fa3,_0x49ce7c,_0x2d4900,_0x3bec26,_0x40cc3d,_0x955242){return[getZoneLabelXPosition(_0xaf2fa3,_0x49ce7c,_0x2d4900,_0x955242['x']),getZoneLabelYPosition(_0x333340,_0x40cc3d,_0x3bec26,Math['abs'](_0x955242['y']))];}export function getZoneLabelYPosition(_0x25a823,_0x144053,_0x36d7a6,_0x5aa1aa){switch(_0x25a823){case'bottom':return _0x144053['y']+_0x144053['height']-_0x5aa1aa;case'middle':return _0x144053['y']+_0x144053['height']/0x2+_0x36d7a6;case'top':return _0x144053['y']+_0x36d7a6*0x2;}}export function getZoneLabelXPosition(_0x5db593,_0x45f6bb,_0x227b82,_0x1e04d9){switch(_0x5db593){case'right':return _0x45f6bb+_0x1e04d9;case'left':return _0x45f6bb-_0x1e04d9-_0x227b82;}}export function getVisibleZones(_0x3452f1){return _0x3452f1['filter'](_0x9dab32=>_0x9dab32['visible']);}