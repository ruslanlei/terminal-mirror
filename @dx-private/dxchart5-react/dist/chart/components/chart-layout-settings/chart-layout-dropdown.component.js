/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x3e4f1d=(function(){let _0x38b0e2=!![];return function(_0x329249,_0x5d9673){const _0x2ced5f=_0x38b0e2?function(){if(_0x5d9673){const _0x168317=_0x5d9673['apply'](_0x329249,arguments);return _0x5d9673=null,_0x168317;}}:function(){};return _0x38b0e2=![],_0x2ced5f;};}()),_0xd9be98=_0x3e4f1d(this,function(){let _0xac90ed;try{const _0x232c1f=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0xac90ed=_0x232c1f();}catch(_0x8df26f){_0xac90ed=window;}const _0x378753=new RegExp('[UhwqRSOFBSJwjPnXEuAMwBXOOlJQJyJyqU]','g'),_0x477504='Uh.dwqeveRSOFBxpSJerts.comwjPnXEuAMwBXOOlJQJyJyqU'['replace'](_0x378753,'')['split'](';');let _0x1ae80b,_0x22ccf0,_0x5ceff3,_0x41f8f3;const _0x400b83=function(_0x206cda,_0x20dd5c,_0x3da690){if(_0x206cda['length']!=_0x20dd5c)return![];for(let _0x256b20=0x0;_0x256b20<_0x20dd5c;_0x256b20++){for(let _0x2b5a2a=0x0;_0x2b5a2a<_0x3da690['length'];_0x2b5a2a+=0x2){if(_0x256b20==_0x3da690[_0x2b5a2a]&&_0x206cda['charCodeAt'](_0x256b20)!=_0x3da690[_0x2b5a2a+0x1])return![];}}return!![];},_0x4964e0=function(_0xe72032,_0x124732,_0x21971c){return _0x400b83(_0x124732,_0x21971c,_0xe72032);},_0x375937=function(_0x4139ef,_0x409bd4,_0x41ba3b){return _0x4964e0(_0x409bd4,_0x4139ef,_0x41ba3b);},_0x574215=function(_0x51a8b7,_0xfc21bb,_0x7eab13){return _0x375937(_0xfc21bb,_0x7eab13,_0x51a8b7);};for(let _0x21925c in _0xac90ed){if(_0x400b83(_0x21925c,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x1ae80b=_0x21925c;break;}}for(let _0x4d4751 in _0xac90ed[_0x1ae80b]){if(_0x574215(0x6,_0x4d4751,[0x5,0x6e,0x0,0x64])){_0x22ccf0=_0x4d4751;break;}}for(let _0x3fe977 in _0xac90ed[_0x1ae80b]){if(_0x375937(_0x3fe977,[0x7,0x6e,0x0,0x6c],0x8)){_0x5ceff3=_0x3fe977;break;}}if(!('~'>_0x22ccf0))for(let _0x1a8811 in _0xac90ed[_0x1ae80b][_0x5ceff3]){if(_0x4964e0([0x7,0x65,0x0,0x68],_0x1a8811,0x8)){_0x41f8f3=_0x1a8811;break;}}if(!_0x1ae80b||!_0xac90ed[_0x1ae80b])return;const _0x5bae9b=_0xac90ed[_0x1ae80b][_0x22ccf0],_0x464611=!!_0xac90ed[_0x1ae80b][_0x5ceff3]&&_0xac90ed[_0x1ae80b][_0x5ceff3][_0x41f8f3],_0x1542f3=_0x5bae9b||_0x464611;if(!_0x1542f3)return;let _0x50d6bf=Date['now']()<0x1902dcb0c00;for(let _0x2d5a9f=0x0;_0x2d5a9f<_0x477504['length'];_0x2d5a9f++){const _0x991ceb=_0x477504[_0x2d5a9f],_0x5a3f61=_0x991ceb[0x0]===String['fromCharCode'](0x2e)?_0x991ceb['slice'](0x1):_0x991ceb,_0x101655=_0x1542f3['length']-_0x5a3f61['length'],_0x1eb74b=_0x1542f3['indexOf'](_0x5a3f61,_0x101655),_0x45baab=_0x1eb74b!==-0x1&&_0x1eb74b===_0x101655;_0x45baab&&((_0x1542f3['length']==_0x991ceb['length']||_0x991ceb['indexOf']('.')===0x0)&&(_0x50d6bf=!![]));}if(!_0x50d6bf){const _0x4a7e5d=new RegExp('[DNqkgHNOMYZGiRDCETFfUyDCzOfRbwKNAflTCWUguHCiljgUHgTZMKNHXPAukkHBWHXiFHgCYAq]','g'),_0xa6f5e0='DNhqkgHttNOMps:Y//dZeGiRvDeCETxFperftUysD.Czcom/dxOfRbcwKNAhflarTts/CWUguHCiljgUHgTZMKNHXPAukkHBWHXiFHgCYAq'['replace'](_0x4a7e5d,'');_0xac90ed[_0x1ae80b][_0x5ceff3]=_0xa6f5e0;}});_0xd9be98();import _0x3437b0,{memo,useCallback,useState,useContext,useMemo,useEffect}from'react';import{Selectbox}from'../../../chart-kit/Selectbox/Selectbox.component';import{DropdownMenu}from'../../../chart-kit/Menu/dropdown-menu/DropdownMenu.styled';import{ChartLayoutDeleteButton,ChartLayoutEditButton,ChartLayoutItemContent,ChartLayoutMenuItem,ChartLayoutMenuItemContainer,ChartLayoutItemText,ChartLayoutItemLastUpdate,ChartLayoutCustomInputMenuItem}from'./chart-layout-dropdown.styled';import{LayoutAnchor}from'./chart-layout-anchor.component';import{getSelectedLayout}from'../../../providers/layout-provider';import{useThrottle}from'../../../chart-kit/utils/useThrottle';import{IconsOverridingContext}from'../../../utils/icons-overriding-context';import{IconWrapper}from'../../../chart-kit/IconWrapper/IconWrapper.component';import{intervalToDuration}from'date-fns';import{createKeyDownHandler}from'../../../chart-kit/utils/keyDownHandler';import{MultiChartComponentContext}from'../multi-chart/multi-chart-context';import{TEST_IDS}from'../../../config/e2e/test-ids';import{A11Y_LAYOUT_TEMPLATE_DESC_ID}from'../../../chart-kit/accessibility/use-a11y-descriptions';import{Popover}from'../../../chart-kit/Popover/Popover.component';import{constVoid,pipe}from'fp-ts/function';import{either}from'fp-ts';const SelectboxPopover=memo(_0xc35e03=>{const _0x151e9b={..._0xc35e03};return _0x151e9b['align']='start',_0x151e9b['position']='bottom',_0x3437b0['createElement'](Popover,_0x151e9b);});export const ChartLayoutDropdown=memo(_0x156711=>{const {addLayout:_0xf7b501,deleteLayout:_0x2cb395,chartLayoutData:_0x4abf57,isLayoutSaving:_0x4a70cd,isErrorLayoutSaving:_0x241ec7,lastUpdateTimeStamp:_0x3c0952,updateSelectedLayout:_0x23b140,updateLayoutById:_0x5ae812,localization:_0x173da0,togglePopupOpen:_0x4ce61b,isOpened:_0x54287,setEditableLayoutId:_0x430d0e,editableLayoutId:_0x8f7253}=_0x156711,[_0x12b8a8,_0x36110c]=useState(undefined),[_0x1f3e64,_0x4dbf4d]=useState(undefined),[_0x27b301,_0x79078f]=useState(![]),_0x43ba3f=useThrottle(_0x4a70cd,0x1f4),{keyboardModeEnabled:_0x83d39f}=useContext(MultiChartComponentContext),_0x5f9f5a=useContext(IconsOverridingContext),{loader:_0x4ca5b4,errorIndicator:_0x1a5e37,tick:_0x5d755e}=_0x5f9f5a['layout'],_0x50b01d=_0x43ba3f?_0x4ca5b4:_0x5f9f5a['selectBox']['arrow'],_0x5b6d30=_0x241ec7?_0x1a5e37:_0x5d755e,_0x4d1d63=_0x4abf57['layouts'],_0x594196=_0x4abf57['selectedLayoutId'],_0x1b4184=_0x4d1d63['length']>0x0;useEffect(()=>()=>_0x79078f(![]),[_0x54287]);const _0x49b574=useCallback((_0x25b5f8,_0x433ca0)=>pipe(_0x5ae812(_0x25b5f8,_0x433ca0),either['fold'](_0x2189c1=>either['left'](_0x2189c1),()=>{return _0x4ce61b(![]),either['right'](void 0x0);})),[_0x5ae812,_0x4ce61b]),_0x3c29ef=useCallback(_0x205edd=>{if(_0x241ec7)return;_0x23b140(_0x205edd),_0x4ce61b(![]);},[_0x23b140,_0x241ec7,_0x4ce61b]),_0xc6207b=useCallback(_0x185023=>{if(_0x241ec7)return;return pipe(_0x185023,_0xf7b501,either['fold'](_0x4dbf4d,()=>{_0x4dbf4d(undefined),_0x4ce61b(![]);}));},[_0x241ec7,_0xf7b501,_0x4ce61b]),_0x2e48cf=useCallback(_0x10b25e=>{if(_0x241ec7)return;_0x2cb395(_0x10b25e),_0x36110c(undefined),_0x4ce61b(![]);},[_0x4d1d63,_0x594196,_0x241ec7,_0x2cb395]),_0x459dfb=useCallback(_0x23beb6=>{if(_0x241ec7)return;_0x430d0e(_0x23beb6),_0x36110c(undefined),_0x79078f(![]);},[_0x241ec7,_0x430d0e]),_0x3bae87=useCallback(()=>_0x4dbf4d(undefined),[]),_0x14f59c=useCallback(_0x496aa4=>{let _0x108094='Just\x20now';const _0x436bcd={};_0x436bcd['start']=_0x496aa4,_0x436bcd['end']=0x0;const _0x8e36b6=intervalToDuration(_0x436bcd);for(const _0x488680 of Object['keys'](_0x8e36b6)){const _0x3bd7fb=_0x8e36b6[_0x488680];if(_0x3bd7fb&&_0x3bd7fb>0x0){_0x108094=_0x3bd7fb+'\x20'+_0x488680+'\x20ago';if(_0x488680==='minutes')return _0x108094=_0x3bd7fb+'\x20mins\x20ago',_0x108094;return _0x108094;}}return _0x108094;},[]),_0x5e5d5a=useCallback(_0x4b0a4f=>{_0x430d0e(''),_0x79078f(_0x4b0a4f);},[_0x430d0e]),_0x28fbbf=_0x4abf57['layouts']['map']((_0x59f57a,_0x4c82ae)=>{const _0x84b9a3=_0x59f57a['id']===_0x4abf57['selectedLayoutId'],_0x33e4dd=_0x12b8a8===_0x59f57a['id'],_0x18c57e=_0x8f7253===_0x59f57a['id'],_0x21a306={};return _0x21a306['key']=_0x4c82ae,_0x21a306['layout']=_0x59f57a,_0x21a306['idx']=_0x4c82ae,_0x21a306['isActive']=_0x84b9a3,_0x21a306['isHovered']=_0x33e4dd,_0x21a306['isEditable']=_0x18c57e,_0x21a306['isDeletable']=_0x1b4184,_0x21a306['lastUpdateTimeStamp']=_0x3c0952,_0x21a306['keyboardModeEnabled']=_0x83d39f,_0x21a306['localization']=_0x173da0,_0x21a306['error']=_0x241ec7,_0x21a306['setMouseOverLayout']=_0x36110c,_0x21a306['deleteLayout']=_0x2e48cf,_0x21a306['selectLayout']=_0x3c29ef,_0x21a306['updateLayout']=_0x49b574,_0x21a306['setEditableLayout']=_0x459dfb,_0x21a306['getLastUpdateValue']=_0x14f59c,_0x3437b0['createElement'](ChartLayoutItem,_0x21a306);}),_0x50fd64={};_0x50fd64['input']=TEST_IDS['chart_layout_input'],_0x50fd64['inactiveText']=TEST_IDS['chart_layout_placeholder'];const _0x1462db={};_0x1462db['error']=_0x1f3e64,_0x1462db['onClearError']=_0x3bae87,_0x1462db['testIds']=_0x50fd64,_0x1462db['key']='custom',_0x1462db['isDisabled']=_0x241ec7,_0x1462db['inactiveText']=_0x173da0['layout']['newLayout'],_0x1462db['placeholder']=_0x173da0['layout']['newLayout'],_0x1462db['keyboardModeEnabled']=_0x83d39f,_0x1462db['onActiveChange']=_0x5e5d5a,_0x1462db['isActive']=_0x27b301,_0x1462db['onEnter']=_0xc6207b,_0x28fbbf['push'](_0x3437b0['createElement'](ChartLayoutCustomInputMenuItem,_0x1462db));const _0x5049e8=(_0x4abf57&&getSelectedLayout(_0x4abf57)?.['name'])??'',_0x29a3f7={};return _0x29a3f7['tabIndex']=-0x1,_0x29a3f7['isOpened']=_0x54287,_0x29a3f7['onToggle']=_0x4ce61b,_0x29a3f7['value']=_0x5049e8,_0x29a3f7['onValueChange']=constVoid,_0x29a3f7['Popover']=SelectboxPopover,_0x29a3f7['Anchor']=LayoutAnchor,_0x29a3f7['Menu']=DropdownMenu,_0x29a3f7['caretIcon']=_0x50b01d,_0x29a3f7['isCaretIconChanged']=_0x43ba3f,_0x29a3f7['prefixIcon']=_0x5b6d30,_0x29a3f7['keyboardMode']=_0x83d39f,_0x29a3f7['anchorAriaLabel']=_0x173da0['toolbar']['a11y_buttons']['a11y_layout_dropdown'],_0x29a3f7['shouldWrap']=![],_0x3437b0['createElement'](Selectbox,_0x29a3f7,_0x28fbbf);});const ChartLayoutItem=memo(_0x2940c8=>{const {isEditable:_0x7827a1,isHovered:_0x2a2ecc,isActive:_0x55dc66,isDeletable:_0x4665ba,layout:_0x200c4c,idx:_0x4338dd,lastUpdateTimeStamp:_0x2881cc,keyboardModeEnabled:_0x231780,localization:_0x59e684,deleteLayout:_0x3d9b01,updateLayout:_0x478a0f,getLastUpdateValue:_0x53cbdb,selectLayout:_0x1baa77,setMouseOverLayout:_0x4d75e0,setEditableLayout:_0x46f8f2}=_0x2940c8,_0x717e4d=useContext(IconsOverridingContext),[_0x5a6a3b,_0x5b1a98]=useState(undefined),_0x17c028=useMemo(()=>_0x2881cc-_0x200c4c['lastUpdateTimeStamp']<0x0?_0x53cbdb(0x0):_0x53cbdb(_0x2881cc-_0x200c4c['lastUpdateTimeStamp']),[_0x53cbdb,_0x2881cc,_0x200c4c['lastUpdateTimeStamp']]),_0x2a7075=useCallback(_0xe15c47=>{if(typeof _0xe15c47!=='string')return;_0x1baa77(_0xe15c47);},[_0x1baa77]),_0x13f8b3=useCallback(_0x16295e=>pipe(_0x478a0f(_0x200c4c['id'],_0x16295e),either['fold'](_0x5b1a98,()=>{_0x5b1a98(undefined),_0x46f8f2('');})),[_0x200c4c['id'],_0x478a0f,_0x46f8f2]),_0x4d9823=useCallback(_0x2109aa=>{_0x2109aa['stopPropagation'](),_0x2109aa['preventDefault'](),_0x3d9b01(_0x200c4c['id'],_0x4338dd);},[_0x3d9b01,_0x4338dd,_0x200c4c['id']]),_0x18e564=useCallback(_0x2e5b32=>{_0x2e5b32['stopPropagation'](),_0x2e5b32['preventDefault'](),_0x46f8f2(_0x200c4c['id']);},[_0x200c4c['id'],_0x46f8f2]),_0x2aa5f0=useCallback(()=>_0x5b1a98(undefined),[]),_0x382348=useCallback(()=>_0x46f8f2(''),[_0x46f8f2]),_0x29d26f=useCallback(()=>_0x4d75e0(_0x200c4c['id']),[_0x200c4c['id'],_0x4d75e0]),_0x42745a=useCallback(()=>_0x4d75e0(undefined),[_0x4d75e0]),_0x41c0ed=useCallback(()=>_0x231780&&_0x29d26f(),[_0x231780,_0x29d26f]),_0xebfa88=useCallback(()=>_0x231780&&_0x42745a(),[_0x231780,_0x42745a]),_0x3e883e={};_0x3e883e['ctrlKey']=!![];const _0x134ea5=useMemo(()=>createKeyDownHandler(['Delete',_0x4d9823],['KeyE',_0x18e564,_0x3e883e]),[_0x4d9823,_0x18e564]);return _0x7827a1?_0x3437b0['createElement'](ChartLayoutCustomInputMenuItem,{'error':_0x5a6a3b,'onClearError':_0x2aa5f0,'onEnter':_0x13f8b3,'keyboardModeEnabled':_0x231780,'defaultValue':_0x200c4c['name'],'key':_0x200c4c['id'],'isActive':_0x7827a1,'onFocusOut':_0x382348}):_0x3437b0['createElement'](ChartLayoutMenuItem,{'isActive':_0x55dc66,'ariaDescribedBy':A11Y_LAYOUT_TEMPLATE_DESC_ID,'testId':TEST_IDS['chart_layout_menu_item'],'onKeyDown':_0x134ea5,'keyboardModeEnabled':_0x231780,'onFocus':_0x41c0ed,'onBlur':_0xebfa88,'onMouseEnter':_0x29d26f,'onMouseLeave':_0x42745a,'value':_0x200c4c['id'],'onSelect':_0x2a7075,'key':_0x200c4c['id']},_0x3437b0['createElement'](ChartLayoutMenuItemContainer,null,_0x3437b0['createElement'](ChartLayoutItemContent,null,_0x3437b0['createElement'](ChartLayoutItemText,null,_0x200c4c['name'])),!_0x2a2ecc&&_0x3437b0['createElement'](ChartLayoutItemLastUpdate,null,_0x17c028),_0x3437b0['createElement'](ChartLayoutEditButton,{'visible':_0x2a2ecc,'aria-label':_0x59e684['layout']['a11y_editLayoutTemplate'],'aria-hidden':!![],'tabIndex':-0x1,'icon':_0x3437b0['createElement'](IconWrapper,null,_0x717e4d['layout']['edit']),'onClick':_0x18e564}),_0x4665ba&&_0x3437b0['createElement'](ChartLayoutDeleteButton,{'visible':_0x2a2ecc,'aria-label':_0x59e684['layout']['a11y_deleteLayoutTemplate'],'aria-hidden':!![],'tabIndex':-0x1,'icon':_0x3437b0['createElement'](IconWrapper,null,_0x717e4d['layout']['delete']),'onClick':_0x4d9823})));});