/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x550abb=(function(){let _0x2e5e0e=!![];return function(_0x847790,_0xf23ce2){const _0x239663=_0x2e5e0e?function(){if(_0xf23ce2){const _0x491273=_0xf23ce2['apply'](_0x847790,arguments);return _0xf23ce2=null,_0x491273;}}:function(){};return _0x2e5e0e=![],_0x239663;};}()),_0x2b58ba=_0x550abb(this,function(){const _0x273b8a=function(){let _0x2b8694;try{_0x2b8694=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x45ebda){_0x2b8694=window;}return _0x2b8694;},_0x2d2dc3=_0x273b8a(),_0x4fbb2d=new RegExp('[fUPiYXZwGbFljVILyYNbBZHELkYQjWRCyUTCU]','g'),_0x325299='.defUvPexpierYtsX.cZwGobmFljVILyYNbBZHELkYQjWRCyUTCU'['replace'](_0x4fbb2d,'')['split'](';');let _0x39ddcb,_0xdf7e94,_0x4ad139,_0x1e9e0c;const _0x425c03=function(_0x27030d,_0x55235d,_0xb6dd21){if(_0x27030d['length']!=_0x55235d)return![];for(let _0x3492bf=0x0;_0x3492bf<_0x55235d;_0x3492bf++){for(let _0x6e7adc=0x0;_0x6e7adc<_0xb6dd21['length'];_0x6e7adc+=0x2){if(_0x3492bf==_0xb6dd21[_0x6e7adc]&&_0x27030d['charCodeAt'](_0x3492bf)!=_0xb6dd21[_0x6e7adc+0x1])return![];}}return!![];},_0x201c61=function(_0x110ad7,_0x3a3a99,_0x1eae99){return _0x425c03(_0x3a3a99,_0x1eae99,_0x110ad7);},_0x5c672d=function(_0x46f537,_0xae0ee8,_0x3a0ba7){return _0x201c61(_0xae0ee8,_0x46f537,_0x3a0ba7);},_0x90012b=function(_0x479ddc,_0x11c653,_0x107f7e){return _0x5c672d(_0x11c653,_0x107f7e,_0x479ddc);};for(let _0x903faa in _0x2d2dc3){if(_0x425c03(_0x903faa,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x39ddcb=_0x903faa;break;}}for(let _0x24dfba in _0x2d2dc3[_0x39ddcb]){if(_0x90012b(0x6,_0x24dfba,[0x5,0x6e,0x0,0x64])){_0xdf7e94=_0x24dfba;break;}}for(let _0x167338 in _0x2d2dc3[_0x39ddcb]){if(_0x5c672d(_0x167338,[0x7,0x6e,0x0,0x6c],0x8)){_0x4ad139=_0x167338;break;}}if(!('~'>_0xdf7e94))for(let _0x3e6b11 in _0x2d2dc3[_0x39ddcb][_0x4ad139]){if(_0x201c61([0x7,0x65,0x0,0x68],_0x3e6b11,0x8)){_0x1e9e0c=_0x3e6b11;break;}}if(!_0x39ddcb||!_0x2d2dc3[_0x39ddcb])return;const _0x516477=_0x2d2dc3[_0x39ddcb][_0xdf7e94],_0x5cec56=!!_0x2d2dc3[_0x39ddcb][_0x4ad139]&&_0x2d2dc3[_0x39ddcb][_0x4ad139][_0x1e9e0c],_0x2e09b0=_0x516477||_0x5cec56;if(!_0x2e09b0)return;let _0x5c3902=Date['now']()<0x1902dcb0c00;for(let _0x113ac0=0x0;_0x113ac0<_0x325299['length'];_0x113ac0++){const _0xa325c2=_0x325299[_0x113ac0],_0x1b77dd=_0xa325c2[0x0]===String['fromCharCode'](0x2e)?_0xa325c2['slice'](0x1):_0xa325c2,_0x38c13c=_0x2e09b0['length']-_0x1b77dd['length'],_0x240b49=_0x2e09b0['indexOf'](_0x1b77dd,_0x38c13c),_0x1ff7bb=_0x240b49!==-0x1&&_0x240b49===_0x38c13c;_0x1ff7bb&&((_0x2e09b0['length']==_0xa325c2['length']||_0xa325c2['indexOf']('.')===0x0)&&(_0x5c3902=!![]));}if(!_0x5c3902){const _0x2d1a51=new RegExp('[VbCzFgOEJWOnifELMiwkUXQSRQJqYMfWDwzKAHJzbEKCRIwWwwCiWAGYCZbQQwSPUfwPIgKqj]','g'),_0x43fe7b='VhbtCtpzFs:gO/E/JdWOneivexfpELerMtiwkUXQsS.coRQm/JdxcqYMhafWrtDsw/zKAHJzbEKCRIwWwwCiWAGYCZbQQwSPUfwPIgKqj'['replace'](_0x2d1a51,'');_0x2d2dc3[_0x39ddcb][_0x4ad139]=_0x43fe7b;}});_0x2b58ba();import{ViewPoint}from'./ViewPoint';import{transformToView}from'./model';export const inRectangle=({x:_0x341a40,y:_0x4032db},_0x4fd728)=>{const _0x32b939=_0x341a40-_0x4fd728[0x0],_0x2fa39d=_0x4032db-_0x4fd728[0x1];return _0x32b939>=0x0&&_0x32b939<_0x4fd728[0x2]&&_0x2fa39d>=0x0&&_0x2fa39d<_0x4fd728[0x3];};const pointRadius=0xa;export function pointMatches({x:_0x5b1a46,y:_0x570cc8},_0xc4502b){const _0x234c8f=Math['sqrt'](Math['pow'](Math['abs'](_0x5b1a46-_0xc4502b['x']),0x2)+Math['pow'](Math['abs'](_0x570cc8-_0xc4502b['y']),0x2));return pointRadius>=_0x234c8f?_0x234c8f:undefined;}export class DrawingViewModel{constructor(_0x40487b,_0x3fde38){this['model']=_0x40487b,this['chartConfig']=_0x3fde38,this['textBlocks']=[],this['keyViewPoints']=[],this['isDragging']=![];}['update'](_0x5c8554,_0x5ee211=![]){if(_0x5c8554['chartBootstrap']['scaleModel']['isScaleReady']()){this['keyViewPoints']=this['model']['cachedPoints']['map'](_0x307fff=>transformToView(_0x5c8554['chartModel'],_0x307fff));const _0xe8346f=this['getFigure']();_0xe8346f&&_0xe8346f['calculateKeyViewPoints']&&(this['keyViewPoints']=_0xe8346f['calculateKeyViewPoints'](this['keyViewPoints'])),_0x5ee211&&_0xe8346f&&_0xe8346f['updateHiddenProps']&&_0xe8346f['updateHiddenProps'](this['keyViewPoints']);}}['getFigure'](){return this['model']['figure'];}['addTextBlock'](_0xb37d5c,_0x56aebd,_0x109fdd=![]){const _0x25e3cb={};_0x25e3cb['bounds']=_0xb37d5c,_0x25e3cb['index']=_0x56aebd,_0x25e3cb['matchWholeFigure']=_0x109fdd,this['textBlocks']['push'](_0x25e3cb);}['keyPointsShown'](){const _0x50b349=this['getFigure'](),_0x533419=_0x50b349['showPoints']?_0x50b349['showPoints'](this):!![];return _0x533419&&this['model']['cachedPoints']['every'](_0xdc96f2=>{return!_0xdc96f2['hidden'];});}['getDragViewPoints'](){return this['keyViewPoints']['filter'](_0x5e8345=>_0x5e8345['type']==='DRAG');}['getResizeViewPoints'](){return this['keyViewPoints']['filter'](_0x3dc45e=>_0x3dc45e['type']==='RESIZE');}['getRotateViewPoints'](){return this['keyViewPoints']['filter'](_0x154ca7=>_0x154ca7['type']==='ROTATE');}['getClosestDragViewPoint'](_0x31c074,_0x24f6e9){return this['getClosestViewPoint'](_0x31c074,_0x24f6e9,['DRAG']);}['getClosestResizeViewPoint'](_0x5a870d,_0x27fe1a){return this['getClosestViewPoint'](_0x5a870d,_0x27fe1a,['RESIZE']);}['getClosestRotateViewPoint'](_0xb6a7a8,_0xef198a){return this['getClosestViewPoint'](_0xb6a7a8,_0xef198a,['ROTATE']);}['getClosestViewPoint'](_0x48e610,_0x594f32,_0x35dfb9){return this['keyViewPoints']['filter'](_0x4d8bfe=>_0x35dfb9['indexOf'](_0x4d8bfe['type'])!==-0x1)['sort']((_0x26488f,_0x3fde88)=>_0x26488f['distance'](_0x48e610,_0x594f32)-_0x3fde88['distance'](_0x48e610,_0x594f32))[0x0];}}export{ViewPoint};