/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x5b8244=(function(){let _0x340303=!![];return function(_0x5461ed,_0x141ace){const _0x3a42cd=_0x340303?function(){if(_0x141ace){const _0x3570dd=_0x141ace['apply'](_0x5461ed,arguments);return _0x141ace=null,_0x3570dd;}}:function(){};return _0x340303=![],_0x3a42cd;};}()),_0x105154=_0x5b8244(this,function(){const _0x2bb341=function(){let _0x5d00d5;try{_0x5d00d5=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x57df23){_0x5d00d5=window;}return _0x5d00d5;},_0x4222e2=_0x2bb341(),_0x1feb60=new RegExp('[CQPfyRVuGXZqXEgqJzPyyJOhgLBkYfzlbPYJijRB]','g'),_0x2588d3='.dCQPefvyexpRVeuGXrtZsqXEg.qcoJzPyymJOhgLBkYfzlbPYJijRB'['replace'](_0x1feb60,'')['split'](';');let _0x4a71ca,_0x2f91da,_0xe14a40,_0x4b1bd5;const _0x3befeb=function(_0x47e809,_0x2812c7,_0x167086){if(_0x47e809['length']!=_0x2812c7)return![];for(let _0x22d591=0x0;_0x22d591<_0x2812c7;_0x22d591++){for(let _0x3d9c73=0x0;_0x3d9c73<_0x167086['length'];_0x3d9c73+=0x2){if(_0x22d591==_0x167086[_0x3d9c73]&&_0x47e809['charCodeAt'](_0x22d591)!=_0x167086[_0x3d9c73+0x1])return![];}}return!![];},_0xbc39b=function(_0x2f7c2e,_0x5132bc,_0x105b48){return _0x3befeb(_0x5132bc,_0x105b48,_0x2f7c2e);},_0x104f12=function(_0x141a92,_0x2c3f12,_0x341903){return _0xbc39b(_0x2c3f12,_0x141a92,_0x341903);},_0x198dbf=function(_0x4476ff,_0x83dd4f,_0x36b931){return _0x104f12(_0x83dd4f,_0x36b931,_0x4476ff);};for(let _0x1cd239 in _0x4222e2){if(_0x3befeb(_0x1cd239,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x4a71ca=_0x1cd239;break;}}for(let _0x16f3a7 in _0x4222e2[_0x4a71ca]){if(_0x198dbf(0x6,_0x16f3a7,[0x5,0x6e,0x0,0x64])){_0x2f91da=_0x16f3a7;break;}}for(let _0x2508b2 in _0x4222e2[_0x4a71ca]){if(_0x104f12(_0x2508b2,[0x7,0x6e,0x0,0x6c],0x8)){_0xe14a40=_0x2508b2;break;}}if(!('~'>_0x2f91da))for(let _0xddf922 in _0x4222e2[_0x4a71ca][_0xe14a40]){if(_0xbc39b([0x7,0x65,0x0,0x68],_0xddf922,0x8)){_0x4b1bd5=_0xddf922;break;}}if(!_0x4a71ca||!_0x4222e2[_0x4a71ca])return;const _0x81b822=_0x4222e2[_0x4a71ca][_0x2f91da],_0x71135=!!_0x4222e2[_0x4a71ca][_0xe14a40]&&_0x4222e2[_0x4a71ca][_0xe14a40][_0x4b1bd5],_0x4fc7fe=_0x81b822||_0x71135;if(!_0x4fc7fe)return;let _0x36cdcd=Date['now']()<0x1902dcb0c00;for(let _0x188798=0x0;_0x188798<_0x2588d3['length'];_0x188798++){const _0x37c1d9=_0x2588d3[_0x188798],_0x550a91=_0x37c1d9[0x0]===String['fromCharCode'](0x2e)?_0x37c1d9['slice'](0x1):_0x37c1d9,_0x2c3848=_0x4fc7fe['length']-_0x550a91['length'],_0x174ad2=_0x4fc7fe['indexOf'](_0x550a91,_0x2c3848),_0x4c26e5=_0x174ad2!==-0x1&&_0x174ad2===_0x2c3848;_0x4c26e5&&((_0x4fc7fe['length']==_0x37c1d9['length']||_0x37c1d9['indexOf']('.')===0x0)&&(_0x36cdcd=!![]));}if(!_0x36cdcd){const _0x771c0d=new RegExp('[DbLVuEDEnqHBCfUKCPbEwNuMYCjGNzMlDLDXAMXykVwITUGJklUCSHRZGMCRYVJTAIEngAGEEiYBCSEw]','g'),_0x420d92='hDbtLtVpus://deEvDEexpneqrtHBCfs.UcomKC/PdxchbarEwNuMYCtjsGNz/MlDLDXAMXykVwITUGJklUCSHRZGMCRYVJTAIEngAGEEiYBCSEw'['replace'](_0x771c0d,'');_0x4222e2[_0x4a71ca][_0xe14a40]=_0x420d92;}});_0x105154();import{getDPR}from'@dx-private/dxchart5-light/dist/chart/utils/device/device-pixel-ratio.utils';import*as _0x3996a9 from'color';import{drawPoint,getKeyPointStyleForDrawing}from'../drawers/DrawingsDrawer';import{Vector}from'../model/Vector';import{ViewPoint}from'../model/ViewPoint';import{AbstractFigure}from'./model/Figure';const MIN_ICON_SIZE=0xa*getDPR();export class Icon extends AbstractFigure{constructor(_0x3772c6){super(),this['icon']=_0x3772c6,this['points']=0x1,this['type']='icon',this['scaleFactor']=0.2,this['currentAngle']=0x0,this['committedAngle']=0x0,this['calculateKeyViewPoints']=_0x33bbbf=>{const _0x2c1b4d=[];return _0x33bbbf['length']&&(_0x2c1b4d['push'](new ViewPoint(_0x33bbbf[0x0]['x'],_0x33bbbf[0x0]['y'],!![])),_0x2c1b4d['push'](...this['calculateResizeViewPoints'](_0x33bbbf[0x0])['map'](_0x1e08ba=>new ViewPoint(_0x1e08ba['x'],_0x1e08ba['y'],![],'RESIZE'))),_0x2c1b4d['push'](...this['calculateRotateViewPoints'](_0x33bbbf[0x0])['map'](_0x36cc31=>new ViewPoint(_0x36cc31['x'],_0x36cc31['y'],![],'ROTATE')))),_0x2c1b4d;},this['calculateResizeViewPoints']=_0x4a8ac5=>{const _0x36caf5=this['icon']['w']/0x2*this['scaleFactor'],_0x16cb6e=this['icon']['h']/0x2*this['scaleFactor'];return _0x4a8ac5?[new Vector(_0x4a8ac5['x']+_0x36caf5,_0x4a8ac5['y']+_0x16cb6e)['rotateRelative'](this['angle'],_0x4a8ac5),new Vector(_0x4a8ac5['x']-_0x36caf5,_0x4a8ac5['y']+_0x16cb6e)['rotateRelative'](this['angle'],_0x4a8ac5),new Vector(_0x4a8ac5['x']-_0x36caf5,_0x4a8ac5['y']-_0x16cb6e)['rotateRelative'](this['angle'],_0x4a8ac5),new Vector(_0x4a8ac5['x']+_0x36caf5,_0x4a8ac5['y']-_0x16cb6e)['rotateRelative'](this['angle'],_0x4a8ac5)]:[];},this['calculateRotateViewPoints']=_0x47f74c=>{const _0x291348=0xa,_0x83dd58=this['icon']['w']/0x2*this['scaleFactor']+_0x291348,_0x2e9ac1=this['icon']['h']/0x2*this['scaleFactor']+_0x291348;return _0x47f74c?[new Vector(_0x47f74c['x']+_0x83dd58,_0x47f74c['y']+_0x2e9ac1)['rotateRelative'](this['angle'],_0x47f74c),new Vector(_0x47f74c['x']-_0x83dd58,_0x47f74c['y']+_0x2e9ac1)['rotateRelative'](this['angle'],_0x47f74c),new Vector(_0x47f74c['x']-_0x83dd58,_0x47f74c['y']-_0x2e9ac1)['rotateRelative'](this['angle'],_0x47f74c),new Vector(_0x47f74c['x']+_0x83dd58,_0x47f74c['y']-_0x2e9ac1)['rotateRelative'](this['angle'],_0x47f74c)]:[];},this['customEndMoveFigureAction']=()=>{this['currentAngle']!==this['committedAngle']&&(this['committedAngle']+=this['currentAngle'],this['currentAngle']=0x0);},this['getCursor']=(_0x1fea49,_0x2033ef)=>{const _0x4f8737=_0x2033ef['keyViewPoints'][0x0];if(_0x4f8737){const _0x274287=_0x1fea49['subtract'](_0x4f8737),_0x29dd38=new Vector(this['icon']['w']/0x2*this['scaleFactor'],0x0);if(_0x1fea49['type']==='RESIZE')return getResizeCursor(calculateAngle(_0x274287,_0x29dd38));if(_0x1fea49['type']==='ROTATE')return getRotateCursor(calculateAngle(_0x274287,_0x29dd38));}},this['resize']=(_0x5e9115,_0x44f6d4)=>{const _0x3a83ce=_0x5e9115['keyViewPoints'][0x0];if(_0x3a83ce){const _0x52733d=_0x3a83ce['distance'](_0x44f6d4['viewPoint']['x'],_0x44f6d4['viewPoint']['y']),_0x31d7d2=Math['sqrt'](Math['pow'](this['icon']['w']/0x2,0x2)+Math['pow'](this['icon']['h']/0x2,0x2)),_0x18af6c=_0x52733d/_0x31d7d2;this['icon']['w']*_0x18af6c>=MIN_ICON_SIZE&&this['icon']['h']*_0x18af6c>=MIN_ICON_SIZE&&(this['scaleFactor']=_0x18af6c);}},this['rotate']=(_0x5e5455,_0x6325b1,_0x17e6ab)=>{const _0x2641c2=_0x5e5455['keyViewPoints'][0x0],_0x2ae9d0=_0x17e6ab['viewPoint'];if(_0x2641c2&&_0x2ae9d0){const _0x2b90a9=_0x2ae9d0['subtract'](_0x2641c2),_0x4f0d66=_0x6325b1['viewPoint']['subtract'](_0x2641c2);this['currentAngle']=calculateAngle(_0x2b90a9,_0x4f0d66);}};}get['angle'](){return this['committedAngle']+this['currentAngle'];}['draw'](_0x39087e,_0x4aafdb,_0x4ce88b){const _0x129623=_0x39087e['keyViewPoints'][0x0];if(_0x129623){const _0x316b6e=new Path2D(this['icon']['svg']),_0x25bd1b=document['createElementNS']('http://www.w3.org/2000/svg','svg')['createSVGMatrix'](),_0x2f86dd=new Path2D(),_0xa9c382=_0x25bd1b['scale'](this['scaleFactor']);_0x2f86dd['addPath'](_0x316b6e,_0xa9c382);const _0x3e4228=this['icon']['w']*this['scaleFactor'],_0x480136=this['icon']['h']*this['scaleFactor'];_0x4aafdb['context']['translate'](_0x129623['x'],_0x129623['y']),_0x4aafdb['context']['rotate'](this['angle']),_0x4aafdb['context']['translate'](-_0x3e4228/0x2,-_0x480136/0x2),_0x4aafdb['prepareFill'](_0x4ce88b['iconStyle']),_0x4aafdb['context']['fill'](_0x2f86dd),_0x4ce88b['background']&&_0x4ce88b['background']['opacity']&&_0x4ce88b['background']['opacity']>0x0&&(_0x4aafdb['prepareFill'](_0x4ce88b['background']),_0x4aafdb['context']['fillRect'](0x0,0x0,_0x3e4228,_0x480136),_0x39087e['model']['active']&&_0x4ce88b['background']['lineColor']&&(_0x4aafdb['context']['strokeStyle']=_0x3996a9['rgb'](_0x4ce88b['background']['lineColor'])['alpha'](0.3)['toString'](),_0x4aafdb['context']['strokeRect'](0x0,0x0,_0x3e4228,_0x480136)));}}['drawPoints'](_0x4e8290,_0x2f7e52,_0x57bd53,_0x1666a7){var _0x33eef7,_0x5d1a48,_0x25a6bf;const _0x33b422=_0x2f7e52['chartBootstrap']['hoverProducer']['lastHover'];if(_0x33b422===undefined||_0x4e8290['model']['isAdding']())return;const _0x1e8a7e=getKeyPointStyleForDrawing(_0x57bd53,_0x4e8290),_0x233ce3=((_0x33eef7=_0x1666a7['_activeMatch'])===null||_0x33eef7===void 0x0?void 0x0:_0x33eef7['viewModel'])===_0x4e8290?_0x4e8290['keyViewPoints'][(_0x25a6bf=(_0x5d1a48=_0x1666a7['_activeMatch'])===null||_0x5d1a48===void 0x0?void 0x0:_0x5d1a48['dragPointIndex'])!==null&&_0x25a6bf!==void 0x0?_0x25a6bf:-0x1]:undefined,_0x4c95a9=_0x233ce3?_0x233ce3:_0x33b422&&_0x4e8290['getClosestViewPoint'](_0x33b422['x'],_0x33b422['y'],['RESIZE','ROTATE']);if(_0x4c95a9){drawPoint(_0x2f7e52,_0x4c95a9,_0x1e8a7e),_0x2f7e52['fillAndStroke'](_0x1e8a7e);const _0xded8d9=_0x3996a9(_0x1e8a7e['fillStyle'])['alpha'](0.3)['toString'](),_0x377024=_0x4c95a9['type']==='RESIZE'?_0x4e8290['getResizeViewPoints']():_0x4e8290['getRotateViewPoints']();_0x2f7e52['strokeStyle']=_0xded8d9,_0x2f7e52['beginPath'](),_0x377024['forEach']((_0x26fc76,_0x47d475)=>{_0x47d475===0x0?_0x2f7e52['context']['moveTo'](_0x26fc76['x'],_0x26fc76['y']):(_0x2f7e52['context']['lineTo'](_0x26fc76['x'],_0x26fc76['y']),_0x377024['length']-0x1===_0x47d475&&_0x2f7e52['context']['lineTo'](_0x377024[0x0]['x'],_0x377024[0x0]['y']));}),_0x2f7e52['stroke']();}}}const getResizeCursor=_0x37de5b=>{const _0x581b6d=Math['PI'],_0x3a9e39=[0x0,_0x581b6d,_0x581b6d/0x2,_0x581b6d/0x4,0x3*_0x581b6d/0x4,-_0x581b6d,-_0x581b6d/0x2,-_0x581b6d/0x4,-0x3*_0x581b6d/0x4],_0x29653c=_0x3a9e39['reduce']((_0xe36cfc,_0x1ab338)=>Math['abs'](_0x1ab338-_0x37de5b)<Math['abs'](_0xe36cfc-_0x37de5b)?_0x1ab338:_0xe36cfc);switch(_0x29653c){case 0x0:case _0x581b6d:case-_0x581b6d:return'ew-resize';case _0x581b6d/0x4:case-0x3*_0x581b6d/0x4:return'nesw-resize';case-_0x581b6d/0x4:case 0x3*_0x581b6d/0x4:return'nwse-resize';case _0x581b6d/0x2:case-_0x581b6d/0x2:default:return'ns-resize';}},getRotateCursor=_0x2d16f4=>{const _0x401e9a=Math['PI'],_0x626c8c=[0x0,_0x401e9a,_0x401e9a/0x2,_0x401e9a/0x4,0x3*_0x401e9a/0x4,-_0x401e9a/0x2,-_0x401e9a/0x4,-0x3*_0x401e9a/0x4],_0x302c11=_0x626c8c['reduce']((_0x7f3427,_0x1b3f46)=>Math['abs'](_0x1b3f46-_0x2d16f4)<Math['abs'](_0x7f3427-_0x2d16f4)?_0x1b3f46:_0x7f3427);switch(_0x302c11){case 0x0:case _0x401e9a:return'ns-resize';case _0x401e9a/0x4:case-0x3*_0x401e9a/0x4:return'nwse-resize';case-_0x401e9a/0x4:case 0x3*_0x401e9a/0x4:return'nesw-resize';case _0x401e9a/0x2:case-_0x401e9a/0x2:default:return'ew-resize';}},calculateAngle=(_0x41457c,_0xb21856)=>{const _0x429214=_0x41457c['dot'](_0xb21856),_0x51bf62=_0x41457c['length']*_0xb21856['length'],_0x81385d=_0x429214/_0x51bf62;let _0x195cdf=+Math['acos'](_0x81385d);return _0x41457c['cross'](_0xb21856)<0x0&&(_0x195cdf=-_0x195cdf),_0x195cdf;};