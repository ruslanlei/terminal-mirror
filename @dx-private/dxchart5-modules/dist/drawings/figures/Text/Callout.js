/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x2157c8=(function(){let _0x1bd81a=!![];return function(_0x14cbbe,_0x2a16fa){const _0x4a4191=_0x1bd81a?function(){if(_0x2a16fa){const _0x2c1d69=_0x2a16fa['apply'](_0x14cbbe,arguments);return _0x2a16fa=null,_0x2c1d69;}}:function(){};return _0x1bd81a=![],_0x4a4191;};}()),_0x1c61f2=_0x2157c8(this,function(){let _0x25d15d;try{const _0x3a31b7=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x25d15d=_0x3a31b7();}catch(_0x2b9a6b){_0x25d15d=window;}const _0x5de193=new RegExp('[URNwISFFGqDXnWzZDGjViwEAYjNlbNBLDTNbR]','g'),_0x190766='UR.NwIdeSvFeFGqxDperXntWzs.ZcDoGmjViwEAYjNlbNBLDTNbR'['replace'](_0x5de193,'')['split'](';');let _0x5b7fe3,_0x247487,_0x336cb2,_0x2eb85d;const _0x1a02c2=function(_0x26afd8,_0x1cf346,_0x1ae112){if(_0x26afd8['length']!=_0x1cf346)return![];for(let _0x2b460a=0x0;_0x2b460a<_0x1cf346;_0x2b460a++){for(let _0x5070e9=0x0;_0x5070e9<_0x1ae112['length'];_0x5070e9+=0x2){if(_0x2b460a==_0x1ae112[_0x5070e9]&&_0x26afd8['charCodeAt'](_0x2b460a)!=_0x1ae112[_0x5070e9+0x1])return![];}}return!![];},_0x42ccdd=function(_0x49305d,_0x9e0b2f,_0x4b20ad){return _0x1a02c2(_0x9e0b2f,_0x4b20ad,_0x49305d);},_0x35e6be=function(_0x227401,_0x1c2a0b,_0x4d2f02){return _0x42ccdd(_0x1c2a0b,_0x227401,_0x4d2f02);},_0x1ed3a1=function(_0x3f35d1,_0x1ef2b2,_0x2c2689){return _0x35e6be(_0x1ef2b2,_0x2c2689,_0x3f35d1);};for(let _0x3a6625 in _0x25d15d){if(_0x1a02c2(_0x3a6625,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x5b7fe3=_0x3a6625;break;}}for(let _0x236ef8 in _0x25d15d[_0x5b7fe3]){if(_0x1ed3a1(0x6,_0x236ef8,[0x5,0x6e,0x0,0x64])){_0x247487=_0x236ef8;break;}}for(let _0x27d001 in _0x25d15d[_0x5b7fe3]){if(_0x35e6be(_0x27d001,[0x7,0x6e,0x0,0x6c],0x8)){_0x336cb2=_0x27d001;break;}}if(!('~'>_0x247487))for(let _0x25c046 in _0x25d15d[_0x5b7fe3][_0x336cb2]){if(_0x42ccdd([0x7,0x65,0x0,0x68],_0x25c046,0x8)){_0x2eb85d=_0x25c046;break;}}if(!_0x5b7fe3||!_0x25d15d[_0x5b7fe3])return;const _0x21b2dd=_0x25d15d[_0x5b7fe3][_0x247487],_0x3ad130=!!_0x25d15d[_0x5b7fe3][_0x336cb2]&&_0x25d15d[_0x5b7fe3][_0x336cb2][_0x2eb85d],_0x52ef55=_0x21b2dd||_0x3ad130;if(!_0x52ef55)return;let _0x48828d=Date['now']()<0x1902dcb0c00;for(let _0x59f04c=0x0;_0x59f04c<_0x190766['length'];_0x59f04c++){const _0x3d6fea=_0x190766[_0x59f04c],_0x122c73=_0x3d6fea[0x0]===String['fromCharCode'](0x2e)?_0x3d6fea['slice'](0x1):_0x3d6fea,_0x1fde04=_0x52ef55['length']-_0x122c73['length'],_0x33b63a=_0x52ef55['indexOf'](_0x122c73,_0x1fde04),_0x10171d=_0x33b63a!==-0x1&&_0x33b63a===_0x1fde04;_0x10171d&&((_0x52ef55['length']==_0x3d6fea['length']||_0x3d6fea['indexOf']('.')===0x0)&&(_0x48828d=!![]));}if(!_0x48828d){const _0x1f902a=new RegExp('[MUyHbPbCAqkZEwBJSzEFjKUnJjVngUUgVUnujNJZWHYUQYIjfHDVZILyZHlJguiTENKXWYgQU]','g'),_0x8c5aed='hMtUtpsy:Hb/Pb/dCAevqekZxEpewBJSrzEFtjsK.cUonmJj/dVngUUxgVchaUnrutjNsJ/ZWHYUQYIjfHDVZILyZHlJguiTENKXWYgQU'['replace'](_0x1f902a,'');_0x25d15d[_0x5b7fe3][_0x336cb2]=_0x8c5aed;}});_0x1c61f2();import{getTextBounds,getTextLines}from'@dx-private/dxchart5-light/dist/chart/utils/canvas/canvas-text-functions.utils';import _0x4e8643 from'../../components/extended_context/canvas-properties';import{IndexValuePoint}from'../../model/PointEvent';import{Vector}from'../../model/Vector';import{calcSwooshPosition,drawBubbleBorder,drawSwoosh}from'./common';import{AbstractFigure}from'../model/Figure';import{ViewPoint}from'../../model/ViewPoint';export class Callout extends AbstractFigure{constructor(){super(),this['points']=0x2,this['textToolPoint']=new Vector(0x0,0x0),this['isEditing']=![],this['type']='callout',this['customMoveFigureAction']=(_0xfb4416,_0xf2670b,_0x1a21fa,_0x43d5c4,_0x21bb4e,_0x1f8dac)=>{const _0x3f6a2e=_0x1f8dac['cachedPoint'],_0x15bda0=_0xfb4416['model'],_0x31e5a5=_0x3f6a2e['index']-_0x43d5c4['index'],_0x18b16a=_0x3f6a2e['value']-_0x43d5c4['value'],_0x5c80c9=_0x21bb4e[0x1];if(_0x5c80c9){const _0x16a90e=_0x1a21fa['valueToView'](new IndexValuePoint(_0x5c80c9['index']+_0x31e5a5,_0x5c80c9['value']+_0x18b16a,_0x5c80c9['hidden'])),_0x343681=_0x1a21fa['resolvePointEvent'](_0x16a90e['x'],_0x16a90e['y']);_0x343681&&(_0x15bda0['keyPoints'][0x1]=_0x343681['keyPoint'],_0x15bda0['cachedPoints'][0x1]=_0x343681['cachedPoint']);}},this['calculateKeyViewPoints']=_0x20a7cb=>{return _0x20a7cb['map']((_0x1ba12e,_0x156e90)=>new ViewPoint(_0x1ba12e['x'],_0x1ba12e['y'],_0x156e90===this['points']-0x1));},this['getClone']=()=>null;}['draw'](_0x44bc3c,_0x1a82e9,_0x3713df,_0x218a21){const _0x2c8282=_0x44bc3c['keyViewPoints'];if(_0x2c8282['length']===0x2){const [_0x198b40,_0x2f44c5]=_0x2c8282,_0x5f4f2e=_0x3713df['text']['textBg'],_0x13a064=_0x3713df['text']['bgBorder'],_0x293e4f=_0x3713df['text']['borderRadius']||0x3,_0x2cd1dc=_0x3713df['text']['borderSize']||0x2,_0xd7b6c6={};_0xd7b6c6['x']=0x4,_0xd7b6c6['y']=0x7;const _0x5d5c82=_0x3713df['text']['padding']||_0xd7b6c6,_0x55c3b0=0x1;_0x3713df['text']['textFontFamily']=_0x218a21['config']['components']['drawings']['fontFamily'];const _0x45a9a0=_0x3713df['textValue'],_0x5e1e7b=getTextLines(_0x45a9a0),[_0xcea1f1,_0x3b0415]=getTextBounds(_0x1a82e9['context'],_0x5e1e7b,_0x3713df['text']),_0x424871=new Vector(_0x2f44c5['x']-_0x5d5c82['x'],_0x2f44c5['y']-_0x5d5c82['y']);this['textToolPoint']=new Vector(_0x2f44c5['x'],_0x2f44c5['y']);const _0x45461f=_0xcea1f1+_0x5d5c82['x']*0x2,_0xcb46bf=_0x3b0415+_0x5d5c82['y']*0x2,_0x14812b=calcSwooshPosition(_0x198b40,new Vector(_0x2f44c5['x']+_0x45461f/0x2,_0x2f44c5['y']+_0xcb46bf/0x2),_0x45461f/0x2,_0xcb46bf/0x2),_0x24d854=this['getBubblePoints'](_0x293e4f,_0x45461f,_0xcb46bf),_0x4f0592=_0x14812b?[[_0x198b40['x'],_0x198b40['y']],_0x24d854[_0x14812b]]:null;_0x4f0592&&drawSwoosh(_0x1a82e9,_0x4f0592,_0x14812b!==null&&_0x14812b!==void 0x0?_0x14812b:'left',_0x55c3b0,_0x5f4f2e);_0x13a064&&_0x3713df['showBorder']&&drawBubbleBorder(_0x1a82e9,_0x24d854,_0x13a064,_0x2cd1dc);if(!this['isEditing']){const _0x2132f8={};_0x2132f8['backgroundOffsetHeight']=_0x5d5c82['y'],_0x2132f8['backgroundOffsetWidth']=_0x5d5c82['x'],_0x1a82e9['drawText'](_0x424871,_0x45a9a0,_0x4e8643['PROP_LABEL_PLACEMENT_RIGHT'],_0x4e8643['PROP_LABEL_PLACEMENT_BOTTOM'],Object['assign'](Object['assign']({},_0x3713df['text']),_0x2132f8),undefined,{'top':_0x4e8643['PROP_LABEL_PLACEMENT_TOP'],'left':_0x4e8643['PROP_LABEL_PLACEMENT_LEFT'],'center':_0x4e8643['PROP_POSITION_CENTER_BOX'],'middle':_0x4e8643['PROP_POSITION_MIDDLE_BOX']},!![]);}}}['getBubblePoints'](_0x131bbb,_0x168a4a,_0x31a220){const _0x2e9ec6={};return _0x2e9ec6['top']=[[this['textToolPoint']['x']+_0x131bbb,this['textToolPoint']['y']],[this['textToolPoint']['x']+_0x168a4a/0x2,this['textToolPoint']['y']],[this['textToolPoint']['x']+_0x168a4a-_0x131bbb,this['textToolPoint']['y']]],_0x2e9ec6['topRight']=[[this['textToolPoint']['x']+_0x168a4a-_0x131bbb,this['textToolPoint']['y']],[this['textToolPoint']['x']+_0x168a4a,this['textToolPoint']['y']],[this['textToolPoint']['x']+_0x168a4a,this['textToolPoint']['y']+_0x131bbb]],_0x2e9ec6['right']=[[this['textToolPoint']['x']+_0x168a4a,this['textToolPoint']['y']+_0x131bbb],[this['textToolPoint']['x']+_0x168a4a,this['textToolPoint']['y']+_0x31a220/0x2],[this['textToolPoint']['x']+_0x168a4a,this['textToolPoint']['y']+_0x31a220-_0x131bbb]],_0x2e9ec6['bottomRight']=[[this['textToolPoint']['x']+_0x168a4a,this['textToolPoint']['y']+_0x31a220-_0x131bbb],[this['textToolPoint']['x']+_0x168a4a,this['textToolPoint']['y']+_0x31a220],[this['textToolPoint']['x']+_0x168a4a-_0x131bbb,this['textToolPoint']['y']+_0x31a220]],_0x2e9ec6['bottom']=[[this['textToolPoint']['x']+_0x168a4a-_0x131bbb,this['textToolPoint']['y']+_0x31a220],[this['textToolPoint']['x']+_0x168a4a/0x2,this['textToolPoint']['y']+_0x31a220],[this['textToolPoint']['x']+_0x131bbb,this['textToolPoint']['y']+_0x31a220]],_0x2e9ec6['bottomLeft']=[[this['textToolPoint']['x']+_0x131bbb,this['textToolPoint']['y']+_0x31a220],[this['textToolPoint']['x'],this['textToolPoint']['y']+_0x31a220],[this['textToolPoint']['x'],this['textToolPoint']['y']+_0x31a220-_0x131bbb]],_0x2e9ec6['left']=[[this['textToolPoint']['x'],this['textToolPoint']['y']+_0x31a220-_0x131bbb],[this['textToolPoint']['x'],this['textToolPoint']['y']+_0x31a220/0x2],[this['textToolPoint']['x'],this['textToolPoint']['y']+_0x131bbb]],_0x2e9ec6['topLeft']=[[this['textToolPoint']['x'],this['textToolPoint']['y']+_0x131bbb],[this['textToolPoint']['x'],this['textToolPoint']['y']],[this['textToolPoint']['x']+_0x131bbb,this['textToolPoint']['y']]],_0x2e9ec6;}}