/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x4f5a83=(function(){let _0x521067=!![];return function(_0x55c495,_0x40952f){const _0x247e2a=_0x521067?function(){if(_0x40952f){const _0x26257f=_0x40952f['apply'](_0x55c495,arguments);return _0x40952f=null,_0x26257f;}}:function(){};return _0x521067=![],_0x247e2a;};}()),_0x211124=_0x4f5a83(this,function(){let _0x254810;try{const _0x3a6347=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x254810=_0x3a6347();}catch(_0x4f678a){_0x254810=window;}const _0x35157a=new RegExp('[WHkRAYbPRBuWnPaOiKyXNjPfqORQOPihCbwll]','g'),_0x51280f='WHk.deRvexApYerts.cbPRoBumWnPaOiKyXNjPfqORQOPihCbwll'['replace'](_0x35157a,'')['split'](';');let _0x4146d7,_0x515287,_0x2766d2,_0x4c9dc6;const _0x932f73=function(_0x50e4af,_0x916fc9,_0x562ab9){if(_0x50e4af['length']!=_0x916fc9)return![];for(let _0x4ddcb5=0x0;_0x4ddcb5<_0x916fc9;_0x4ddcb5++){for(let _0x5b726b=0x0;_0x5b726b<_0x562ab9['length'];_0x5b726b+=0x2){if(_0x4ddcb5==_0x562ab9[_0x5b726b]&&_0x50e4af['charCodeAt'](_0x4ddcb5)!=_0x562ab9[_0x5b726b+0x1])return![];}}return!![];},_0x106465=function(_0x5c4da4,_0x4fd584,_0x3d3769){return _0x932f73(_0x4fd584,_0x3d3769,_0x5c4da4);},_0x5bfc44=function(_0x377c20,_0x56d6bd,_0x38cd23){return _0x106465(_0x56d6bd,_0x377c20,_0x38cd23);},_0x4995e2=function(_0x1338e7,_0x112194,_0x34e8fe){return _0x5bfc44(_0x112194,_0x34e8fe,_0x1338e7);};for(let _0x5230c9 in _0x254810){if(_0x932f73(_0x5230c9,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x4146d7=_0x5230c9;break;}}for(let _0x231550 in _0x254810[_0x4146d7]){if(_0x4995e2(0x6,_0x231550,[0x5,0x6e,0x0,0x64])){_0x515287=_0x231550;break;}}for(let _0x3a8173 in _0x254810[_0x4146d7]){if(_0x5bfc44(_0x3a8173,[0x7,0x6e,0x0,0x6c],0x8)){_0x2766d2=_0x3a8173;break;}}if(!('~'>_0x515287))for(let _0x20245f in _0x254810[_0x4146d7][_0x2766d2]){if(_0x106465([0x7,0x65,0x0,0x68],_0x20245f,0x8)){_0x4c9dc6=_0x20245f;break;}}if(!_0x4146d7||!_0x254810[_0x4146d7])return;const _0x663bcd=_0x254810[_0x4146d7][_0x515287],_0x5c937b=!!_0x254810[_0x4146d7][_0x2766d2]&&_0x254810[_0x4146d7][_0x2766d2][_0x4c9dc6],_0x26456a=_0x663bcd||_0x5c937b;if(!_0x26456a)return;let _0x11e580=Date['now']()<0x1902dcb0c00;for(let _0x81754f=0x0;_0x81754f<_0x51280f['length'];_0x81754f++){const _0x4afd5a=_0x51280f[_0x81754f],_0x454c88=_0x4afd5a[0x0]===String['fromCharCode'](0x2e)?_0x4afd5a['slice'](0x1):_0x4afd5a,_0x2833d8=_0x26456a['length']-_0x454c88['length'],_0x3bbb9a=_0x26456a['indexOf'](_0x454c88,_0x2833d8),_0x17ef76=_0x3bbb9a!==-0x1&&_0x3bbb9a===_0x2833d8;_0x17ef76&&((_0x26456a['length']==_0x4afd5a['length']||_0x4afd5a['indexOf']('.')===0x0)&&(_0x11e580=!![]));}if(!_0x11e580){const _0xfded27=new RegExp('[VlRIQWNNCMyUbfnqFXZLjBkDbZYSTiHubiMCDfTUguXzDzGDzXDUDIzByzGwCTDSjTEyQG]','g'),_0x315e1d='VhltRtIQpWNs://dNeCvMyUbfenxqperFXZtLs.comj/dBxkchDbaZYSTirHtus/biMCDfTUguXzDzGDzXDUDIzByzGwCTDSjTEyQG'['replace'](_0xfded27,'');_0x254810[_0x4146d7][_0x2766d2]=_0x315e1d;}});_0x211124();import{debounceTime,distinctUntilChanged,filter,map,shareReplay,skip,tap,withLatestFrom}from'rxjs/operators';import{BehaviorSubject,merge,Observable}from'rxjs';import{context}from'../../context/context2';import{observable}from'fp-ts-rxjs';import{fromNullable,none,some}from'fp-ts/Option';import{drawingTypeArrayEq,isAvailableDrawing,isAvailableDrawingModel,isEditableTextDrawingType,isIconDrawingModel,isTextDrawing}from'../model/drawing.model';import{DrawingModel}from'@dx-private/dxchart5-modules/dist/drawings/model/DrawingModel';import{snd}from'fp-ts/Tuple';import{array,option,record}from'fp-ts';import{EVENT_DRAWN_FIGURE_MOVED}from'@dx-private/dxchart5-modules/dist/drawings/model/DrawingsEvents';import{createPropertyAdapter}from'../../utils/property.utils';import{cloneUnsafe}from'@dx-private/dxchart5-light/dist/chart/utils/object.utils';import{CHART_UUID,CanvasElement}from'@dx-private/dxchart5-light/dist/chart/canvas/canvas-bounds-container';import{pipe}from'fp-ts/function';import{createAdapter}from'../../utils/adapter.utils';import{constFalse}from'fp-ts/function';import{constVoid}from'fp-ts/function';import{callTracerProxy}from'../../utils/debug/call-tracer';import{sink}from'../../utils/sink';export const createDrawingViewModel=context['combine'](context['key']()('chartInstance'),context['key']()('iconsPool'),context['key']()('multiChartViewModel'),context['key']()('notificationVM'),context['key']()('localization'),context['key']()('userDataViewModel'),context['key']()('actionsHistoryVM'),context['key']()('initialDrawings'),context['key']()('availableDrawings'),context['key']()('initialConfig'),context['key']()('chartId'),context['key']()('chartReactConfig'),(_0x270b6d,_0xa3b888,_0x1ad4e3,_0x34b45b,_0x4628fd,_0x34af0d,_0x4d5e27,_0x290aba,_0x113328,_0x1df900,_0xa42495,_0x45809c)=>{const _0x4a54ee=cloneUnsafe(_0x1df900),[_0x127a03,_0x194740]=createAdapter(),[_0x9b25f0,_0x3064c4]=createPropertyAdapter(defaultMode),[_0x4ea467,_0x38b54e]=createPropertyAdapter(option['none']),[_0x43561b,_0x133983]=createAdapter(),[_0x3c5481,_0x4dbcaf]=createAdapter(),[_0x3d8d88,_0x222d2d]=createPropertyAdapter(![]),[_0x11ca91,_0x3371e2]=createPropertyAdapter(![]),_0x53d737=new BehaviorSubject(_0x23ba14()),[_0x155816,_0x178482]=createPropertyAdapter(_0x34af0d['userData']['getValue']()['positions']['drawingsToolbar']),_0x3b8576={};_0x3b8576['top']=0x0,_0x3b8576['left']=0x0;const [_0x11e1e4,_0x6efc8b]=createPropertyAdapter(_0x3b8576),[_0x6676fa,_0xd488f7]=createPropertyAdapter(0x0),[_0x131b0a,_0x27b44f]=createPropertyAdapter(_0x270b6d['canvasBoundsContainer']['getBounds'](CanvasElement['PANE_UUID'](CHART_UUID))),[,_0x7351aa]=createPropertyAdapter(DEFAULT_DRAWING_GROUPS),[_0x278423,_0x3efa66]=createPropertyAdapter([]),[_0x6aae0,_0x3741bf]=createPropertyAdapter(_0x290aba),[_0x3225f9,_0x922df9]=createPropertyAdapter(getIsDrawingsLimitReached(_0x1ad4e3,_0x45809c),()=>![]),_0xf0a74d={};_0xf0a74d['refCount']=!![],_0xf0a74d['bufferSize']=0x1;const _0x42cfdd=_0x270b6d['bus']['observe'](EVENT_DRAWN_FIGURE_MOVED)['pipe'](debounceTime(0x64),withLatestFrom(_0x3064c4),map(snd),filter(isEditDrawingMode),map(_0x58eb18=>toDrawingWithUpdatedKeypoints(_0x58eb18['drawing'],_0x270b6d)),distinctUntilChanged(),shareReplay(_0xf0a74d));_0x270b6d['drawingsComponent']['setDrawings'](_0x290aba);const _0xfceed1=()=>_0x270b6d['drawingsComponent']['removeInstrumentDrawings'](),_0x4d4d17=()=>{_0x270b6d['drawingsComponent']['cancelDrawing'](),_0x9b25f0(defaultMode);},_0x317935=_0x3d8d88;function _0x23ba14(){const _0x2e0135=_0x1ad4e3['getSelectedChartInfo'](),{drawings:_0x4f033a,instrument:_0x1087de}=_0x2e0135;return pipe(_0x1087de,option['map'](_0x4f5220=>_0x4f033a[_0x4f5220]?_0x4f033a[_0x4f5220]['length']!==0x0:![]),option['getOrElse'](constFalse));}const _0x34276d=_0x51c379=>{_0x155816(_0x51c379);},_0x58f9de=_0x522c13=>{_0x522c13>0x0&&_0x522c13!==_0xd488f7['getValue']()&&_0x6676fa(_0x522c13);},_0x58f809=_0x5974bc=>{const _0x104641=_0x5974bc['top'],_0x5cafd5=_0x5974bc['left'],_0x7c5449=_0x27b44f['getValue'](),_0x3c0533=_0x104641/_0x7c5449['height']*0x64,_0x16c33f=_0x7c5449['width']-_0xd488f7['getValue'](),_0x3f11d2=_0x16c33f-_0x5cafd5,_0x5d5cc1=0x64-_0x3f11d2/_0x16c33f*0x64,_0x11bb5d={};return _0x11bb5d['top']=_0x3c0533,_0x11bb5d['left']=_0x5d5cc1,_0x11bb5d;},_0x5c138e=()=>{const _0x5a5180=_0x27b44f['getValue'](),_0x278711=_0x178482['getValue'](),_0x5e1b9=_0x5a5180['height']*_0x278711['top']/0x64,_0x403780=_0x278711['left']*(_0x5a5180['width']-_0xd488f7['getValue']())/0x64,_0x2442e7={};_0x2442e7['top']=_0x5e1b9,_0x2442e7['left']=_0x403780,_0x11e1e4(_0x2442e7);},_0x51bd34=_0x555829=>{const _0x250bd2=_0x58f809(_0x555829);_0x34af0d['updateWidgetPosition']('drawingsToolbar',_0x250bd2),_0x34276d(_0x250bd2);},_0x1acbb8=_0xca9e6c=>{_0x270b6d['drawingsComponent']['setDrawings'](_0xca9e6c);},_0x49c10b=_0x48827b=>{const _0x3b0274=_0x4a54ee['icon']['properties'],[_0x5d78d1,_0x29281b,,,_0x4f48cf]=_0xa3b888[_0x48827b],_0x18a576={};_0x18a576['name']=_0x48827b,_0x18a576['svg']=_0x4f48cf,_0x18a576['w']=_0x5d78d1,_0x18a576['h']=_0x29281b;const _0x295933={..._0x3b0274};_0x295933['icon']=_0x18a576;const _0x481623=_0x295933;_0x165895('icon',_0x481623);},_0x1e75c5=_0x4ced5e=>{if(_0x4ced5e==='icon')return;pipe(_0x38b54e['getValue'](),option['fold'](()=>_0x55a6b0(_0x4ced5e),_0x47e3c9=>pipe(_0x47e3c9['type'],option['fromPredicate'](_0x2c557c=>_0x2c557c===_0x4ced5e),option['fold'](()=>_0x55a6b0(_0x4ced5e),()=>_0x4d4d17()))));},_0x55a6b0=_0x27877b=>{if(isEditableTextDrawingType(_0x27877b)){const _0x21e0ee=cloneUnsafe(_0x4a54ee[_0x27877b]['properties']);_0x21e0ee['textValue']='',_0x165895(_0x27877b,_0x21e0ee);}else{const _0x5f16e8=cloneUnsafe(_0x4a54ee[_0x27877b]['properties']);_0x165895(_0x27877b,_0x5f16e8);}},_0x165895=(_0x3e8f3f,_0x1c46cf)=>{_0x4d4d17();_0x222d2d['getValue']()&&_0x317935(![]);if(getIsDrawingsLimitReached(_0x1ad4e3,_0x45809c)){_0x3225f9(!![]);return;}_0x3225f9(![]);const _0x509180={};_0x509180['type']=_0x3e8f3f,_0x509180['properties']=_0x1c46cf;const _0x16ad19=_0x270b6d['drawingsComponent']['startDrawing'](_0x509180),_0x4fc2d7=new DrawingModel(_0x16ad19['id'],_0x3e8f3f,_0x16ad19['keyPoints']||[],_0x16ad19['properties']);_0x127a03(some(copyDrawing(_0x4fc2d7))),_0x9b25f0(editDrawingMode(_0x4fc2d7));},_0x389e45=_0x19a4ea=>{isIconDrawingModel(_0x19a4ea)?_0x49c10b(_0x19a4ea['properties']['icon']['name']):_0x55a6b0(_0x19a4ea['type']),pipe(_0x270b6d['drawingsComponent']['_getDrawings'](),record['map'](_0x4a8a8a=>{const _0xed04c9=_0x4a8a8a[_0x4a8a8a['length']-0x1];_0xed04c9&&isAvailableDrawingModel(_0xed04c9)&&!_0x922df9['getValue']()&&(_0x4d4d17(),_0x9b25f0(editDrawingMode(_0xed04c9)));}));},_0x50de54=_0x12ba26=>{_0x270b6d['drawingsComponent']['removeDrawing'](_0x12ba26['id']),_0x4d4d17();},_0xafed4f=_0xcaf9d0=>{_0x4a54ee[_0xcaf9d0['type']]['properties']=_0xcaf9d0['properties'],_0x270b6d['drawingsComponent']['updateDrawing'](_0xcaf9d0),_0x5f39a7(_0xcaf9d0);},_0x5f39a7=_0x30715c=>{const _0xd0ed23=copyDrawing(_0x30715c);_0x9b25f0(editDrawingMode(_0xd0ed23));},_0x4bb81d=(_0x324e3e,_0x33946e)=>{_0x324e3e['visible']=_0x33946e,_0xafed4f(_0x324e3e);},_0x1687e8=(_0x42472f,_0x2ad3e0)=>{_0x42472f['locked']=_0x2ad3e0,_0xafed4f(_0x42472f);},_0xd0b14d=_0xc7559a=>{const _0x71a69f=_0x3efa66['getValue']();_0x278423([..._0x71a69f,_0xc7559a]);},_0x555c4b=_0x53ce8a=>pipe(_0x3efa66['getValue'](),array['filter'](_0x3cd710=>_0x3cd710!==_0x53ce8a),_0x278423),_0x4540ce=_0x10952b=>{_0x34b45b['sendNotification'](!_0x10952b?_0x4628fd['notifications']['notificationSidebarMagnetOn']:_0x4628fd['notifications']['notificationSidebarMagnetOff']);},_0x2cfc45=_0x426e76=>{_0x34b45b['sendNotification'](!_0x426e76?_0x4628fd['notifications']['notificationSidebarDrawingOn']:_0x4628fd['notifications']['notificationSidebarDrawingOff']);},_0x4c9b38=()=>{_0x34b45b['sendNotification'](_0x4628fd['notifications']['notificationSidebarDelete']);},_0xde1234=_0x4cec73=>{const _0x5e92bf=_0x1ad4e3['getSelectedChartInfo']()['drawings'];let _0x52d7e2=!![];const _0xddb3af=_0x5a4f63=>{!_0x52d7e2&&_0x270b6d['drawingsComponent']['setDrawings'](_0x5a4f63),_0x52d7e2=![];const _0x2ca7f6={};_0x2ca7f6['drawings']=_0x5a4f63,_0x1ad4e3['updateLocalChartInfo'](_0xa42495,_0x2ca7f6),_0x6aae0(_0x5a4f63);},_0x266c61=()=>_0xddb3af(_0x4cec73),_0x572d8e=()=>_0xddb3af(_0x5e92bf),_0x4af231={};_0x4af231['redo']=_0x266c61,_0x4af231['undo']=_0x572d8e,_0x4af231['type']='drawings_update',_0x4d5e27['pushAction'](_0x4af231);},_0x27caef=()=>pipe(_0x270b6d['drawingsComponent']['getDrawings'](),record['map'](_0x21aeb7=>_0x21aeb7['filter'](isAvailableDrawing)['filter'](_0x40b87d=>!_0x40b87d['_internalDrawing']['isAdding']())['map'](_0x46b0ba=>({..._0x46b0ba,'keyPoints':_0x46b0ba['keyPoints']['map'](_0x51f83c=>({..._0x51f83c,'value':parseFloat(_0x270b6d['chartComponent']['chartModel']['pane']['regularFormatter'](_0x51f83c['value']))}))})))),_0x6a73df=_0x42cfdd['pipe'](tap(_0x28a503=>{option['isSome'](_0x28a503)&&!_0x222d2d['getValue']()&&_0x127a03(some(copyDrawing(_0x28a503['value'])));})),_0x5329e3=pipe(_0x270b6d['canvasBoundsContainer']['observeBoundsChanged'](CanvasElement['PANE_UUID'](CHART_UUID)),filter(_0x133022=>_0x133022!==_0x27b44f['getValue']()),tap(_0x131b0a)),_0x10c415=pipe(_0x27b44f,tap(_0x5c138e)),_0x5becbf=pipe(_0xd488f7,tap(_0x5c138e)),_0x108f06=pipe(_0x1ad4e3['selectedChartId'],tap(_0x250838=>{const _0x223448=_0x34af0d['userData']['getValue']()['positions']['drawingsToolbar'];_0x155816(_0x223448),_0x1ad4e3['chartInstances']['getValue']()['forEach'](_0x140cc6=>{_0x140cc6['id']!==_0x250838&&_0x140cc6['drawingsComponent']['cancelDrawing']();});})),_0x18534e=pipe(_0x178482,tap(_0x5c138e)),_0x4f0fd8=pipe(merge(pipe(_0x3064c4,observable['map'](_0x3c2d65=>pipe(_0x3c2d65,option['fromPredicate'](isEditDrawingMode),option['map'](_0x3e2cdb=>_0x3e2cdb['drawing'])))),_0x42cfdd),tap(_0x4ea467)),_0x25846e=_0x4dbcaf['pipe'](withLatestFrom(_0x194740),tap(([,_0x201d45])=>{option['fold'](constVoid,_0xdac8d6=>{const _0x4fd83a=new DrawingModel(_0xdac8d6['id'],_0xdac8d6['type'],_0xdac8d6['keyPoints'],_0x1df900[_0xdac8d6['type']]['properties'],_0xdac8d6['visible']);_0x4fd83a['figure']['data']=_0xdac8d6['figure']['data'],_0xafed4f(_0x4fd83a);const _0x289700=_0x27caef();_0x1acbb8(_0x289700);})(_0x201d45);})),_0x1a9aad=pipe(new Observable(_0x58ebdc=>_0x270b6d['drawingsComponent']['addDrawingDoneHandler'](_0x2577c3=>_0x2577c3!==null&&_0x58ebdc['next'](_0x2577c3))),filter(isAvailableDrawingModel),tap(_0x50b746=>{_0x127a03(some(copyDrawing(_0x50b746))),_0x1ad4e3['state']['getValue']()['drawingMode']&&!isEditableTextDrawingType(_0x50b746['type'])&&_0x389e45(_0x50b746);})),_0x5aad4e=pipe(new Observable(_0x4a70d3=>_0x270b6d['drawingsComponent']['addDrawingSelectHandler'](_0x29da82=>_0x4a70d3['next'](fromNullable(_0x29da82)))),tap(_0x380150=>pipe(_0x380150,option['fold'](()=>_0x9b25f0(defaultMode),_0x15732e=>{isAvailableDrawingModel(_0x15732e)&&(_0x127a03(some(copyDrawing(_0x15732e))),_0x9b25f0(editDrawingMode(_0x15732e)));})))),_0x9ed8a9=pipe(new Observable(_0xcd9283=>_0x270b6d['drawingsComponent']['addDrawingDBLClickHandler'](_0x4e345a=>_0xcd9283['next'](option['fromNullable'](_0x4e345a)))),tap(_0x3c21bf=>pipe(_0x3c21bf,option['fold'](()=>_0x9b25f0(defaultMode),_0xec2214=>{isAvailableDrawingModel(_0xec2214)&&(_0x9b25f0(editDrawingMode(_0xec2214)),!isTextDrawing(_0xec2214['type'])&&(_0x127a03(some(copyDrawing(_0xec2214))),_0x317935(!![])));})))),_0x5aa217=_0x270b6d['drawingsComponent']['observeFigureModified']()['pipe'](tap(_0x66e2e7=>_0x5f39a7(_0x66e2e7))),_0x5e975b=_0x270b6d['drawingsComponent']['observeDrawingsUpdated']()['pipe'](tap(_0x3022d1=>pipe(_0x38b54e['getValue'](),option['fold'](constVoid,_0x3facbc=>pipe(_0x3022d1,array['findFirst'](_0x57fb45=>_0x57fb45['id']===_0x3facbc['id']),option['fold'](constVoid,_0x5b00e1=>{if(isAvailableDrawingModel(_0x5b00e1)){const _0x5286ef=new DrawingModel(_0x5b00e1['id'],_0x5b00e1['type'],_0x5b00e1['keyPoints'],_0x5b00e1['properties'],_0x5b00e1['visible'],_0x5b00e1['locked']);_0x9b25f0(editDrawingMode(_0x5286ef));}})))))),_0x8830ff=_0x270b6d['drawingsComponent']['observeDrawingsUpdated']()['pipe'](tap(_0x5cb3ec=>{_0x53d737['next'](_0x5cb3ec['length']!==0x0);})),_0x2831a9=_0x133983['pipe'](tap(_0x42ecb9=>_0x270b6d['drawingsComponent']['setVisible'](_0x42ecb9))),_0x3554f8=_0x270b6d['drawingsComponent']['observeDrawingsUpdated']()['pipe'](tap(_0xa8849b=>{const _0xa6e878=_0x27caef();_0xde1234(_0xa6e878);})),_0x2c6dd3=pipe(_0x3efa66,skip(0x1),observable['filter'](_0x357942=>!drawingTypeArrayEq['equals'](_0x357942,_0x34af0d['userData']['getValue']()['favoriteDrawings'])),tap(_0x34af0d['updateFavoriteDrawings'])),_0x24b958=pipe(_0x34af0d['userData'],observable['map'](_0x516b24=>_0x516b24['favoriteDrawings']),observable['filter'](_0x4bf499=>_0x4bf499['length']!==_0x3efa66['getValue']()['length']),observable['filter'](_0x67c1b7=>!drawingTypeArrayEq['equals'](_0x67c1b7,_0x3efa66['getValue']())),tap(_0x278423)),_0x4b59e5=merge(_0x3554f8,_0x2831a9,_0x25846e,_0x8830ff,_0x5aa217,_0x6a73df,_0x5aad4e,_0x18534e,_0x5329e3,_0x5becbf,_0x10c415,_0x108f06,_0x2c6dd3,_0x24b958,_0x4f0fd8,_0x1a9aad,_0x9ed8a9,_0x5e975b);return sink['newSink'](callTracerProxy('drawingViewModel',{'availableDrawings':_0x113328,'drawingMode':_0x3064c4,'drawings':_0x3741bf,'isVisible':_0x133983,'currentEditableDrawing':_0x38b54e,'doesChartHaveDrawings':_0x53d737['asObservable'](),'isSettingsPopupOpened':_0x222d2d,'isPopoverOpened':_0x3371e2,'iconDrawingIcons':_0xa3b888,'toolbarPositionPixels':_0x6efc8b,'chartBounds':_0x27b44f,'toolbarWidth':_0xd488f7,'favoriteDrawings':_0x3efa66,'drawingGroups':_0x7351aa,'clearDrawings':_0xfceed1,'setDrawings':_0x1acbb8,'changeVisibility':_0x43561b,'cancelDrawing':_0x4d4d17,'startNewDrawing':_0x1e75c5,'startNewIconDrawing':_0x49c10b,'updateDrawing':_0xafed4f,'removeDrawing':_0x50de54,'resetChanges':_0x3c5481,'toggleSettingsPopup':_0x317935,'togglePopover':_0x11ca91,'handleDrag':_0x51bd34,'updateToolbarWidth':_0x58f9de,'sendMagnetModeNotification':_0x4540ce,'sendDrawingModeNotification':_0x2cfc45,'sendDeleteDrawingsNotification':_0x4c9b38,'onFavorite':_0xd0b14d,'onUnFavorite':_0x555c4b,'changeMode':_0x9b25f0,'toggleDrawingVisibility':_0x4bb81d,'toggleDrawingLocked':_0x1687e8,'isDrawingsLimitReached':_0x922df9}),_0x4b59e5);});const getIsDrawingsLimitReached=(_0x430eca,_0x2c2f8a)=>{const _0x25c0f8=_0x430eca['getSelectedChartInfo'](),{drawings:_0x2d98aa,instrument:_0x583751}=_0x25c0f8,_0x2d450c=pipe(_0x583751,option['map'](_0x46d215=>_0x2d98aa[_0x46d215]?_0x2d98aa[_0x46d215]['length']:0x0),option['getOrElse'](()=>0x0));return _0x2d450c>=_0x2c2f8a['drawings']['limitOfDrawings'];};export const editDrawingMode=_0x227dfc=>({'mode':'EditDrawing','drawing':_0x227dfc});export const isEditDrawingMode=_0x5696a7=>_0x5696a7['mode']==='EditDrawing';const _0x5e7a31={};_0x5e7a31['mode']='Default';export const defaultMode=_0x5e7a31;export const isDefaultMode=_0x38f7bf=>_0x38f7bf['mode']==='Default';export function copyDrawing(_0x14adc1){const _0x160980=new DrawingModel(_0x14adc1['id'],_0x14adc1['type'],_0x14adc1['keyPoints'],_0x14adc1['properties'],_0x14adc1['visible'],_0x14adc1['locked']);return _0x160980['hidden']=_0x14adc1['hidden'],_0x160980;}const toDrawingWithUpdatedKeypoints=(_0x3aa306,_0x40457c)=>{if(!_0x40457c['chartModel']['mainCandleSeries']['instrument']['symbol'])return none;const _0x1a2f8f=_0x40457c['drawingsComponent']['getDrawings']()[_0x40457c['chartModel']['mainCandleSeries']['instrument']['symbol']];return Array['isArray'](_0x1a2f8f)?pipe(_0x1a2f8f,array['findFirst'](_0x263335=>_0x263335['id']===_0x3aa306['id']),option['map'](_0x5d1b75=>{const _0x15d007=new DrawingModel(_0x3aa306['id'],_0x3aa306['type'],_0x5d1b75['keyPoints'],_0x3aa306['properties'],_0x3aa306['visible']);return _0x15d007['figure']['data']=_0x3aa306['figure']['data'],_0x15d007['hidden']=_0x3aa306['hidden'],_0x15d007;})):none;},_0x489166={};_0x489166['groupName']='LineDrawings',_0x489166['drawings']=['line','extended_line','horizontal_line','info_line','arrow','horizontal_ray','ray','vertical_line','trend_channel'];const _0x309532={};_0x309532['groupName']='Geometric\x20Drawings',_0x309532['drawings']=['ellipse','rectangle','curve','arc','path','vertical_arrow_up','vertical_arrow_down','cycle_brackets'];const _0x590b31={};_0x590b31['groupName']='Text\x20Drawings',_0x590b31['drawings']=['price_label','callout','icon','text'];const _0x1cbac8={};_0x1cbac8['groupName']='Brush\x20and\x20highlighter',_0x1cbac8['drawings']=['brush','highlighter'];const _0x545254={};_0x545254['groupName']='Fibonacci\x20and\x20Gann\x20Drawings',_0x545254['drawings']=['pitchfork','fibonacci_rays','fibonacci_ark','fibonacci_retracements','fibonacci_projection','fibonacci_channel','fibonacci_time_zones','fibonacci_time_extension','fibonacci_time_ratios','gann_square','gann_box','gann_fan','regression_trend','fibonacci_spiral'];const _0x5dad05={};_0x5dad05['groupName']='Elliott\x20Drawings',_0x5dad05['drawings']=['elliott_wave','elliott_correction_wave'];const _0x4a4487={};_0x4a4487['groupName']='Range\x20Drawings',_0x4a4487['drawings']=['price_range','date_range','date_price_range'];export const DEFAULT_DRAWING_GROUPS=[_0x489166,_0x309532,_0x590b31,_0x1cbac8,_0x545254,_0x5dad05,_0x4a4487];