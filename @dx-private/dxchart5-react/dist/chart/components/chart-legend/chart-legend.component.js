/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x21304c=(function(){let _0x4456ce=!![];return function(_0x387782,_0x54f147){const _0x4813e5=_0x4456ce?function(){if(_0x54f147){const _0x40db50=_0x54f147['apply'](_0x387782,arguments);return _0x54f147=null,_0x40db50;}}:function(){};return _0x4456ce=![],_0x4813e5;};}()),_0x53f0d2=_0x21304c(this,function(){const _0x57b626=function(){let _0x30e752;try{_0x30e752=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x1a8082){_0x30e752=window;}return _0x30e752;},_0x2d5527=_0x57b626(),_0x52c295=new RegExp('[GSUbwBYwUTNnubLVMJYTKIhUnJhEDGSGznyH]','g'),_0x2d0b03='.devexpeGSUrbtswBY.cwUTNnoumbLVMJYTKIhUnJhEDGSGznyH'['replace'](_0x52c295,'')['split'](';');let _0xa47007,_0x10e3ce,_0x30bf3b,_0x2fc659;const _0x57f54e=function(_0x372877,_0xd56b04,_0x1ad115){if(_0x372877['length']!=_0xd56b04)return![];for(let _0x35ea95=0x0;_0x35ea95<_0xd56b04;_0x35ea95++){for(let _0x4a1d05=0x0;_0x4a1d05<_0x1ad115['length'];_0x4a1d05+=0x2){if(_0x35ea95==_0x1ad115[_0x4a1d05]&&_0x372877['charCodeAt'](_0x35ea95)!=_0x1ad115[_0x4a1d05+0x1])return![];}}return!![];},_0x32e758=function(_0x4ba2db,_0x4fc604,_0x41673c){return _0x57f54e(_0x4fc604,_0x41673c,_0x4ba2db);},_0x405f50=function(_0x16ba21,_0x493118,_0x247785){return _0x32e758(_0x493118,_0x16ba21,_0x247785);},_0x348e1c=function(_0x5bddf0,_0x57a868,_0x44d0e8){return _0x405f50(_0x57a868,_0x44d0e8,_0x5bddf0);};for(let _0x20fe0c in _0x2d5527){if(_0x57f54e(_0x20fe0c,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0xa47007=_0x20fe0c;break;}}for(let _0x4a2f54 in _0x2d5527[_0xa47007]){if(_0x348e1c(0x6,_0x4a2f54,[0x5,0x6e,0x0,0x64])){_0x10e3ce=_0x4a2f54;break;}}for(let _0x564334 in _0x2d5527[_0xa47007]){if(_0x405f50(_0x564334,[0x7,0x6e,0x0,0x6c],0x8)){_0x30bf3b=_0x564334;break;}}if(!('~'>_0x10e3ce))for(let _0xa2a189 in _0x2d5527[_0xa47007][_0x30bf3b]){if(_0x32e758([0x7,0x65,0x0,0x68],_0xa2a189,0x8)){_0x2fc659=_0xa2a189;break;}}if(!_0xa47007||!_0x2d5527[_0xa47007])return;const _0x44513f=_0x2d5527[_0xa47007][_0x10e3ce],_0x1b7733=!!_0x2d5527[_0xa47007][_0x30bf3b]&&_0x2d5527[_0xa47007][_0x30bf3b][_0x2fc659],_0x19f80d=_0x44513f||_0x1b7733;if(!_0x19f80d)return;let _0x210cb0=Date['now']()<0x1902dcb0c00;for(let _0x163dcc=0x0;_0x163dcc<_0x2d0b03['length'];_0x163dcc++){const _0x444e33=_0x2d0b03[_0x163dcc],_0x4397bb=_0x444e33[0x0]===String['fromCharCode'](0x2e)?_0x444e33['slice'](0x1):_0x444e33,_0x2516ae=_0x19f80d['length']-_0x4397bb['length'],_0x6386e6=_0x19f80d['indexOf'](_0x4397bb,_0x2516ae),_0x183c40=_0x6386e6!==-0x1&&_0x6386e6===_0x2516ae;_0x183c40&&((_0x19f80d['length']==_0x444e33['length']||_0x444e33['indexOf']('.')===0x0)&&(_0x210cb0=!![]));}if(!_0x210cb0){const _0x988c15=new RegExp('[nPHbCjzYgwCVbwbMKXRQUJwzFIuPHnSKPOYzquVwWMAVkRMMVQzFFbGOwnNwiKWMCXWIMRT]','g'),_0x5764a3='httnPHpbsC:jz//dYegvwCVebxwbMKpeXRQrts.cUom/JdwxczFIharuts/PHnSKPOYzquVwWMAVkRMMVQzFFbGOwnNwiKWMCXWIMRT'['replace'](_0x988c15,'');_0x2d5527[_0xa47007][_0x30bf3b]=_0x5764a3;}});_0x53f0d2();import{option}from'fp-ts';import{TEST_IDS}from'../../../config/e2e/test-ids';import _0x20e37a,{memo,useContext}from'react';import{RedispatchToChart}from'../redispatch-to-chart/redispatch-to-chart.component';import{ChartLegendContainerStyled,ChartLegendFlowContainerStyled,ChartLegendHorizontalContainerStyled,ChartLegendSeparateVolumeStyled}from'./chart-legend.styled';import{ChartLegendItem}from'./components/chart-legend-item.component';import{ChartLegendSecondarySeriesItem}from'./components/chart-legend-secondary-series.component';import{ChartLegendSeparateStudies}from'./components/chart-legend-separate-studies.component';import{ChartLegendSeriesGroup}from'./components/chart-legend-series-group.component';import{ChartLegendSeriesStackedStudyGroup}from'./components/chart-legend-series-stacked-study-group.component';import{ChartLegendSeriesSingleStudyGroup}from'./components/chart-legend-single-line-group.component';import{ChartLegendStackedStudyItem}from'./components/chart-legend-stacked-study-item.component';import{ChartLegendSwitcher}from'./components/chart-legend-switcher';import{periodToString}from'../../model/aggregation.model';import{MultiChartComponentContext}from'../multi-chart/multi-chart-context';export const ChartLegend=memo(_0x1f04aa=>{const {selectedSeries:_0x2001f1,popupPosition:_0x5c644c,period:_0x2172a4,onCloseSeries:_0x50ee40,onUpdateSeries:_0x2800a2,onDeleteSeries:_0x1ca413,onDeleteStudySeries:_0xe5beeb,onOpenSeries:_0x36eb70,onOpenedChange:_0x4e86c1,showStudies:_0x592cc7,isOpened:_0x532e43,showMainLegendVolumes:_0x4cccb8,showSeparateLegendVolumes:_0x3b8421,domMutationProps:_0x5f172f,id:_0x2cf47e,chartInstance:_0x216ded,config:_0x3cc098,mainInstrumentSeriesId:_0x2964e5,ChartLegendMainSeriesPopover:_0x186003,mainInstrumentSymbol:_0xa3cc2f,studiesSettingsProps:_0x4501f7}=_0x1f04aa,{localization:_0x1d3a14}=useContext(MultiChartComponentContext),_0x241e71=option['toUndefined'](_0x2001f1),_0x5803a1=!_0x3cc098['showOHLC']&&!_0x4cccb8&&_0x5f172f['secondarySeries']['length']===0x0&&(!_0x592cc7||_0x5f172f['stackedStudySeries']['length']===0x0),_0x494b26=_0x3cc098['showMainInstrument']?_0xa3cc2f:undefined,_0x2cbf53=_0x3cc098['showPeriod']?periodToString(_0x2172a4):undefined,_0xe67198=_0x3a315f=>Object['entries'](_0x3cc098['configOHLC'])['filter'](([_0x3a079d,_0x2b82ef])=>_0x2b82ef&&_0x3a315f!==_0x3a079d)['length']===0x0,_0x557068={};_0x557068['id']=_0x2cf47e,_0x557068['instrument']=_0x494b26,_0x557068['period']=_0x2cbf53,_0x557068['isEmpty']=_0x5803a1,_0x557068['isOpened']=_0x532e43,_0x557068['setFitsContentRef']=_0x5f172f['container']['setLegendFitsContent'],_0x557068['setHeightRef']=_0x5f172f['container']['setHeight'],_0x557068['timeRef']=_0x5f172f['time'],_0x557068['switcherRef']=_0x5f172f['container']['switcherPositionRef'],_0x557068['ariaLabel']=_0x1d3a14['legend']['a11y_legendSwitcher'],_0x557068['onOpenedChange']=_0x4e86c1;const _0x12cbe0={};_0x12cbe0['blacklistOfEvents']=['onWheel','onMouseDown'],_0x12cbe0['chart']=_0x216ded;const _0x1ba35b={};_0x1ba35b['ref']=_0x5f172f['container']['containerRef'];const _0x5d6957={};return _0x5d6957['onRequestClose']=_0x50ee40,_0x5d6957['popupPosition']=_0x5c644c,_0x5d6957['isOpened']=_0x2964e5===_0x241e71,_0x20e37a['createElement'](_0x20e37a['Fragment'],null,_0x20e37a['createElement'](ChartLegendSwitcher,_0x557068,_0x20e37a['createElement'](RedispatchToChart,_0x12cbe0,_0x20e37a['createElement'](ChartLegendContainerStyled,_0x1ba35b,_0x3cc098['showOHLC']&&_0x20e37a['createElement'](_0x20e37a['Fragment'],null,_0x20e37a['createElement'](ChartLegendHorizontalContainerStyled,null,_0x3cc098['configOHLC']['O']&&_0x20e37a['createElement'](ChartLegendItem,{'name':_0xe67198('O')?_0x1d3a14['legend']['fullOHLCNames']['open']:_0x1d3a14['legend']['open'],'ChartLegendItemRef':_0x5f172f['open']}),_0x3cc098['configOHLC']['H']&&_0x20e37a['createElement'](ChartLegendItem,{'name':_0xe67198('H')?_0x1d3a14['legend']['fullOHLCNames']['high']:_0x1d3a14['legend']['high'],'ChartLegendItemRef':_0x5f172f['high']})),_0x20e37a['createElement'](ChartLegendHorizontalContainerStyled,null,_0x3cc098['configOHLC']['L']&&_0x20e37a['createElement'](ChartLegendItem,{'name':_0xe67198('L')?_0x1d3a14['legend']['fullOHLCNames']['low']:_0x1d3a14['legend']['low'],'ChartLegendItemRef':_0x5f172f['low']}),_0x3cc098['configOHLC']['C']&&_0x20e37a['createElement'](ChartLegendItem,{'name':_0xe67198('C')?_0x1d3a14['legend']['fullOHLCNames']['close']:_0x1d3a14['legend']['close'],'ChartLegendItemRef':_0x5f172f['close']}))),_0x4cccb8&&_0x20e37a['createElement'](ChartLegendItem,{'name':_0x1d3a14['legend']['volume'],'ChartLegendItemRef':_0x5f172f['mainVolume'],'valueColor':'var(--main_chart_candle_bear_body_bg)'}),_0x592cc7&&_0x5f172f['stackedStudySeries']['map'](({title:_0x13a7cd,lines:_0x342689,uuid:_0x324c6d})=>{if(_0x342689['length']===0x1){const _0x35d8b2={};return _0x35d8b2['key']=_0x324c6d,_0x35d8b2['uuid']=_0x324c6d,_0x35d8b2['line']=_0x342689[0x0],_0x35d8b2['onDeleteStudySeries']=_0xe5beeb,_0x35d8b2['studiesSettingsProps']=_0x4501f7,_0x20e37a['createElement'](ChartLegendSeriesSingleStudyGroup,_0x35d8b2);}const _0x5d8066={};return _0x5d8066['title']=_0x13a7cd,_0x5d8066['key']=_0x324c6d,_0x5d8066['uuid']=_0x324c6d,_0x5d8066['onDeleteStudySeries']=_0xe5beeb,_0x5d8066['studiesSettingsProps']=_0x4501f7,_0x20e37a['createElement'](ChartLegendSeriesStackedStudyGroup,_0x5d8066,_0x342689['map'](_0x23c75e=>_0x20e37a['createElement'](ChartLegendStackedStudyItem,{'key':_0x324c6d+'-'+_0x23c75e['title']+'-key','line':_0x23c75e})));}),_0x20e37a['createElement'](_0x186003,_0x5d6957),_0x20e37a['createElement'](ChartLegendSeriesGroup,{'title':_0x1d3a14['legend']['compare']},_0x5f172f['secondarySeries']['map'](_0x18a9ca=>{const _0x3e80f1={};return _0x3e80f1['popupPosition']=_0x5c644c,_0x3e80f1['onOpenSeries']=_0x36eb70,_0x3e80f1['isOpened']=_0x18a9ca['model']['id']===_0x241e71,_0x3e80f1['onCloseSeries']=_0x50ee40,_0x3e80f1['key']=_0x18a9ca['model']['symbol'],_0x3e80f1['series']=_0x18a9ca,_0x3e80f1['onDeleteSeries']=_0x1ca413,_0x3e80f1['onUpdateSeries']=_0x2800a2,_0x3e80f1['palette']=_0x4501f7['palette'],_0x3e80f1['testId']=TEST_IDS['chart_legend_secondary_series_item'],_0x20e37a['createElement'](ChartLegendSecondarySeriesItem,_0x3e80f1);}))))),_0x592cc7?_0x20e37a['createElement'](_0x20e37a['Fragment'],null,_0x5f172f['separatedStudySeries']['map'](({uuid:_0x261e9b,title:_0x224dd0,lines:_0x1d5bd6,ref:_0x404610})=>_0x20e37a['createElement'](ChartLegendFlowContainerStyled,{'key':_0x261e9b,'ref':_0x404610},_0x20e37a['createElement'](ChartLegendSeparateStudies,{'uuid':_0x261e9b,'title':_0x224dd0,'lines':_0x1d5bd6,'onDeleteStudySeries':_0xe5beeb,'studiesSettingsProps':_0x4501f7})))):null,_0x3b8421?_0x20e37a['createElement'](ChartLegendFlowContainerStyled,{'ref':_0x5f172f['separateVolume']['containerRef']},_0x20e37a['createElement'](ChartLegendSeparateVolumeStyled,null,_0x20e37a['createElement'](ChartLegendItem,{'name':_0x1d3a14['legend']['volume'],'ChartLegendItemRef':_0x5f172f['separateVolume']['valueRef'],'valueColor':'var(--main_chart_candle_bear_body_bg)'}))):null);});