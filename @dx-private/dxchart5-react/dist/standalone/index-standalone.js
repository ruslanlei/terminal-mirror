/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x55dd51=(function(){let _0x442ecd=!![];return function(_0x415436,_0x4ce9e4){const _0x7f9d20=_0x442ecd?function(){if(_0x4ce9e4){const _0x170309=_0x4ce9e4['apply'](_0x415436,arguments);return _0x4ce9e4=null,_0x170309;}}:function(){};return _0x442ecd=![],_0x7f9d20;};}()),_0x4f897c=_0x55dd51(this,function(){let _0x3991de;try{const _0x38f314=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x3991de=_0x38f314();}catch(_0x283581){_0x3991de=window;}const _0x1951ec=new RegExp('[fRWqNwJiEIqZGFSwXOQQLyZNhqAkABHKDwRRnB]','g'),_0x2ff2cd='.fRWqdNevewxJpeiErtsIq.coZGmFSwXOQQLyZNhqAkABHKDwRRnB'['replace'](_0x1951ec,'')['split'](';');let _0x28c09b,_0x16a8c5,_0x237f1f,_0x37bad9;const _0x350ffd=function(_0x291ca3,_0x2a1ed8,_0x12d1bc){if(_0x291ca3['length']!=_0x2a1ed8)return![];for(let _0x1ae192=0x0;_0x1ae192<_0x2a1ed8;_0x1ae192++){for(let _0x26671b=0x0;_0x26671b<_0x12d1bc['length'];_0x26671b+=0x2){if(_0x1ae192==_0x12d1bc[_0x26671b]&&_0x291ca3['charCodeAt'](_0x1ae192)!=_0x12d1bc[_0x26671b+0x1])return![];}}return!![];},_0x4ae4b8=function(_0x506e1a,_0x158ce9,_0x4a27b2){return _0x350ffd(_0x158ce9,_0x4a27b2,_0x506e1a);},_0x15b293=function(_0x2c3d13,_0xe8787a,_0x4a092c){return _0x4ae4b8(_0xe8787a,_0x2c3d13,_0x4a092c);},_0x14b12d=function(_0x237128,_0x2e2855,_0x527a74){return _0x15b293(_0x2e2855,_0x527a74,_0x237128);};for(let _0xdb63b7 in _0x3991de){if(_0x350ffd(_0xdb63b7,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x28c09b=_0xdb63b7;break;}}for(let _0x42faad in _0x3991de[_0x28c09b]){if(_0x14b12d(0x6,_0x42faad,[0x5,0x6e,0x0,0x64])){_0x16a8c5=_0x42faad;break;}}for(let _0x5e7af1 in _0x3991de[_0x28c09b]){if(_0x15b293(_0x5e7af1,[0x7,0x6e,0x0,0x6c],0x8)){_0x237f1f=_0x5e7af1;break;}}if(!('~'>_0x16a8c5))for(let _0x35e3ae in _0x3991de[_0x28c09b][_0x237f1f]){if(_0x4ae4b8([0x7,0x65,0x0,0x68],_0x35e3ae,0x8)){_0x37bad9=_0x35e3ae;break;}}if(!_0x28c09b||!_0x3991de[_0x28c09b])return;const _0x2c7265=_0x3991de[_0x28c09b][_0x16a8c5],_0x1d2dcc=!!_0x3991de[_0x28c09b][_0x237f1f]&&_0x3991de[_0x28c09b][_0x237f1f][_0x37bad9],_0xd2f716=_0x2c7265||_0x1d2dcc;if(!_0xd2f716)return;let _0x24f8df=Date['now']()<0x1902dcb0c00;for(let _0x37d584=0x0;_0x37d584<_0x2ff2cd['length'];_0x37d584++){const _0x17fb0a=_0x2ff2cd[_0x37d584],_0x2809c8=_0x17fb0a[0x0]===String['fromCharCode'](0x2e)?_0x17fb0a['slice'](0x1):_0x17fb0a,_0x14623=_0xd2f716['length']-_0x2809c8['length'],_0x1f1150=_0xd2f716['indexOf'](_0x2809c8,_0x14623),_0x8e1aab=_0x1f1150!==-0x1&&_0x1f1150===_0x14623;_0x8e1aab&&((_0xd2f716['length']==_0x17fb0a['length']||_0x17fb0a['indexOf']('.')===0x0)&&(_0x24f8df=!![]));}if(!_0x24f8df){const _0x1ad32b=new RegExp('[ESiuNFKTWRKykbzBDZWTNyFGOXYWiLbgZywJYQQTUwHBVWREJwqVVILLkyiiQjIzbqKGBDygBwA]','g'),_0x4608dc='ESihuttps:NFKT/WR/KydkbzeBDZWvTeNxpyFGOXertYWiLsbg.ZcyowJYm/dQxcQThUwHaBVWrtsR/EJwqVVILLkyiiQjIzbqKGBDygBwA'['replace'](_0x1ad32b,'');_0x3991de[_0x28c09b][_0x237f1f]=_0x4608dc;}});_0x4f897c();import{mergeWithDefaultConfigCopy}from'@dx-private/dxchart5-light/dist/chart/chart.config';import{merge}from'@dx-private/dxchart5-light/dist/chart/utils/merge.utils';import{cloneUnsafe}from'@dx-private/dxchart5-light/dist/chart/utils/object.utils';import{option}from'fp-ts';import{none,some}from'fp-ts/Option';import{pipe}from'fp-ts/function';import{createElement}from'react';import{createRoot}from'react-dom/client';import{ChartReactApp}from'../chart/chart-react-app';import{DEFAULT_PALETTE,DEFAULT_THEME}from'../chart/defaults';import{stringToAggregationPeriodSafe}from'../chart/model/aggregation.model';import{config}from'../config/chart-config';import{DEFAULT_INIT_CHART_REACT_CONFIG}from'../config/chart-react-config';import{createChartSharingProvider}from'../providers/chart-sharing-provider';import{createLocalStorageLayoutProvider}from'../providers/mocks/localstorage-layout-provider';import{createMockChartRealDataProvider}from'../providers/mocks/server-side-mocks/mock-chart-real-data-provider';import{parseBoolean}from'../utils/boolean.utils';import{iteratorForEach}from'../utils/iterator.utils';import{DEFAULT_TIMEZONES_CONFIG}from'../utils/timezones/timezones';import{getQueryParam}from'../utils/url.utils';import{SCRIPTS_URL,SNAPSHOT_URL}from'./standalone.config';import{ComponentOverridingContext,DEFAULT_COMPONENTS,DEFAULT_TABS_WITH_ICON,removeSettingsTab}from'../utils/component-overriding-context';import{IconsRenderContext,DEFAULT_ICONS_RENDER_CONTEXT}from'../chart/components/multi-chart/icons-render-context';let root,chartReactApi;const chartReactAPICB=_0x363998=>{return _0x2a2406=>{chartReactApi=_0x2a2406,_0x363998&&_0x363998(_0x2a2406);};},createWidget=async(_0x597a5e,_0x4da94a)=>{root=createRoot(_0x597a5e);const _0x56cd2d=getQueryParams(),{chartTheme:chartTheme=_0x56cd2d['chartTheme']??DEFAULT_THEME,dependencies:_0x4b2ad3,svgShapeRendering:svgShapeRendering='auto'}=_0x4da94a,_0x5dae03=cloneUnsafe(DEFAULT_WIDGET_CHART_REACT_CONFIG);_0x5dae03['drawings']['drawingGroups']['enabled']=!![],_0x5dae03['trading']['enabled']=![],_0x5dae03['customPeriodInput']['enabled']=![];const _0x209f55=_0x4b2ad3?.['chartReactConfig']??_0x5dae03,_0x24d04c=merge(_0x4da94a['dependencies']?.['palette']??{},DEFAULT_PALETTE),_0x1b5d8e=_0x4b2ad3?.['initialChartConfig']??mergeWithDefaultConfigCopy(config(_0x24d04c[chartTheme]['object'])),_0x48eb1d=mergeChartReactConfigWithWidgetProperties(_0x4da94a,_0x209f55),_0x591f62=mergeChartCoreConfigWithWidgetProperties(_0x4da94a,_0x1b5d8e),_0x1fa5a2=parseBoolean(_0x56cd2d['eventsEnabled']??_0x4da94a['eventsEnabled']),_0x4b7c9a=_0x1fa5a2?DEFAULT_TABS_WITH_ICON:removeSettingsTab(DEFAULT_TABS_WITH_ICON,'ChartEventsTab'),_0x5de3e3=_0x4b2ad3?.['chartDataProvider']??createMockChartRealDataProvider(),_0x2614bc={};_0x2614bc['endpointUrl']=SNAPSHOT_URL;const _0xf5a0fe=_0x4b2ad3?.['chartSharingProvider']??createChartSharingProvider(_0x2614bc),_0x49e46c=chartReactAPICB(_0x4da94a['onAPICreated']??_0x4da94a['dependencies']?.['onApiCreated']),_0x36dd34={...DEFAULT_TIMEZONES_CONFIG},_0x304501=_0x36dd34;_0x4da94a['timezone']&&(_0x304501['currentTimezone']=_0x4da94a['timezone']);const _0x119ca8=createElement(ChartReactApp,{'dependencies':{..._0x4b2ad3,...getInstrumentAndAggregation(_0x4da94a),...getLayoutProvider(_0x4da94a,_0x4b2ad3),'timezones':_0x304501,'chartDataProvider':_0x5de3e3,'chartSharingProvider':_0xf5a0fe,...await mergeDependenciesWithQueryParams(_0x4da94a,_0x48eb1d,_0x591f62,_0x56cd2d),'palette':_0x24d04c,'onApiCreated':_0x49e46c}}),_0x5a2655={...DEFAULT_COMPONENTS};_0x5a2655['ChartSettingsTabs']=_0x4b7c9a;const _0x50a42a={};_0x50a42a['value']=_0x5a2655;const _0x4c7257=createElement(ComponentOverridingContext['Provider'],_0x50a42a,_0x119ca8),_0x5da07a={...DEFAULT_ICONS_RENDER_CONTEXT};_0x5da07a['svgShapeRendering']=svgShapeRendering;const _0x44a4d8={};_0x44a4d8['value']=_0x5da07a;const _0x1a0d63=createElement(IconsRenderContext['Provider'],_0x44a4d8,_0x4c7257);root['render'](_0x1a0d63);},destroy=()=>{chartReactApi?.['internal']?.['destroy'](),root?.['unmount']();};window['DXChart']={...window['DXChart'],'createWidget':createWidget,'destroy':destroy};const getQueryParams=()=>{const _0x56411c=new URL(window['location']['href']),_0x35a15a={},_0x290ce3=_0x56411c['searchParams']['keys']();return iteratorForEach(_0x290ce3,_0x437e0a=>_0x35a15a[_0x437e0a]=_0x56411c['searchParams']['get'](_0x437e0a)),_0x35a15a;},_0x7a9898={};_0x7a9898['enabled']=![];const _0x1144d2={...DEFAULT_INIT_CHART_REACT_CONFIG};_0x1144d2['layout']={...DEFAULT_INIT_CHART_REACT_CONFIG['layout']},_0x1144d2['dataExport']={...DEFAULT_INIT_CHART_REACT_CONFIG['dataExport']},_0x1144d2['multiChart']=_0x7a9898,_0x1144d2['studyTemplates']={...DEFAULT_INIT_CHART_REACT_CONFIG['studyTemplates']},_0x1144d2['layout']['enabled']=![],_0x1144d2['dataExport']['enabled']=![],_0x1144d2['studyTemplates']['enabled']=![];const DEFAULT_WIDGET_CHART_REACT_CONFIG=_0x1144d2,mergeChartReactConfigWithWidgetProperties=(_0x3932ee,_0x1d6753)=>{const {toolbarEnabled:_0x2cc9d6,sidebarEnabled:_0x431a22,yAxisEnabled:_0x53cbcd,instrumentSuggestEnabled:_0x5172ca,instrumentSuggestVisible:_0x852b05,studyTemplatesEnabled:_0x225801,dataExportEnabled:_0x36d9af,tradingEnabled:_0xaa5b99,layoutEnabled:_0x4183ca,customPeriodInputEnabled:_0x403d92,timeframePresetsMode:_0x1ec1f8,extendedHoursEnabled:_0x5e2be3,sessionBreaksEnabled:_0x27c9b2,priceTypeEnabled:_0x253082,candlesAlignmentEnabled:_0x3bef94}=_0x3932ee;let _0x55f600=undefined;if(_0x3932ee['width']!==undefined&&_0x3932ee['height']!==undefined){const _0x1a41e6={};_0x1a41e6['width']=_0x3932ee['width'],_0x1a41e6['height']=_0x3932ee['height'],_0x55f600=_0x1a41e6;}const _0x247960={..._0x1d6753};return _0x247960['studies']={..._0x1d6753['studies']},_0x247960['toolbar']={..._0x1d6753['toolbar']},_0x247960['drawings']={..._0x1d6753['drawings']},_0x247960['yAxisControls']={..._0x1d6753['yAxisControls']},_0x247960['instrumentSuggest']={..._0x1d6753['instrumentSuggest']},_0x247960['studyTemplates']={..._0x1d6753['studyTemplates']},_0x247960['multiChart']={..._0x1d6753['multiChart']},_0x247960['dataExport']={..._0x1d6753['dataExport']},_0x247960['trading']={..._0x1d6753['trading']},_0x247960['customPeriodInput']={..._0x1d6753['customPeriodInput']},_0x247960['timeframePresets']={..._0x1d6753['timeframePresets']},_0x247960['fixedSize']=_0x55f600,_0x247960['layout']={..._0x1d6753['layout']},_0x247960['chartDataOptionsSettings']={..._0x1d6753['chartDataOptionsSettings']},_0x247960['studies']['dxScriptEnabled']=![],_0x247960['toolbar']['enabled']=_0x2cc9d6??_0x1d6753?.['toolbar']?.['enabled'],_0x247960['drawings']['sidebar']={},_0x247960['drawings']['sidebar']['enabled']=_0x431a22??_0x1d6753?.['drawings']?.['sidebar']?.['enabled'],_0x247960['yAxisControls']['enabled']=_0x53cbcd??_0x1d6753?.['yAxisControls']?.['enabled'],_0x247960['instrumentSuggest']['visible']=_0x852b05??_0x1d6753?.['instrumentSuggest']?.['visible'],_0x247960['instrumentSuggest']['enabled']=_0x5172ca??_0x1d6753?.['instrumentSuggest']?.['enabled'],_0x247960['studyTemplates']['enabled']=_0x225801??_0x1d6753?.['studyTemplates']?.['enabled'],_0x247960['dataExport']['enabled']=_0x36d9af??_0x1d6753?.['dataExport']?.['enabled'],_0x247960['trading']['enabled']=_0xaa5b99??_0x1d6753?.['trading']?.['enabled'],_0x247960['customPeriodInput']['enabled']=_0x403d92??_0x1d6753?.['customPeriodInput']?.['enabled']??![],_0x247960['timeframePresets']['mode']=_0x1ec1f8??_0x1d6753?.['timeframePresets']?.['mode'],_0x247960['layout']['enabled']=_0x4183ca??_0x1d6753?.['layout']?.['enabled'],_0x247960['chartDataOptionsSettings']['sessionBreaks']={..._0x1d6753['chartDataOptionsSettings']?.['sessionBreaks']},_0x247960['chartDataOptionsSettings']['extendedHours']={..._0x1d6753['chartDataOptionsSettings']?.['extendedHours']},_0x247960['chartDataOptionsSettings']['priceType']={..._0x1d6753['chartDataOptionsSettings']?.['priceType']},_0x247960['chartDataOptionsSettings']['candlesAlignment']={..._0x1d6753['chartDataOptionsSettings']?.['candlesAlignment']},_0x247960['chartDataOptionsSettings']['sessionBreaks']['enabled']=_0x27c9b2??_0x1d6753?.['chartDataOptionsSettings']?.['sessionBreaks']?.['enabled'],_0x247960['chartDataOptionsSettings']['extendedHours']['enabled']=_0x5e2be3??_0x1d6753?.['chartDataOptionsSettings']?.['extendedHours']?.['enabled'],_0x247960['chartDataOptionsSettings']['priceType']['enabled']=_0x253082??_0x1d6753?.['chartDataOptionsSettings']?.['priceType']?.['enabled'],_0x247960['chartDataOptionsSettings']['candlesAlignment']['enabled']=_0x3bef94??_0x1d6753?.['chartDataOptionsSettings']?.['candlesAlignment']?.['enabled'],_0x247960;},mergeChartCoreConfigWithWidgetProperties=(_0x5c5ff7,_0x119e54)=>{const {navigationMapEnabled:_0x464af4,xAxisEnabled:_0x581a72,yAxisEnabled:_0x48bd14}=_0x5c5ff7,_0x19200e={..._0x119e54};return _0x19200e['components']={..._0x119e54['components']},_0x19200e['components']['yAxis']={..._0x119e54['components']?.['yAxis']},_0x19200e['components']['xAxis']={..._0x119e54['components']?.['xAxis']},_0x19200e['components']['navigationMap']={..._0x119e54['components']?.['navigationMap']},_0x19200e['components']['yAxis']['visible']=_0x48bd14??_0x119e54['components']?.['yAxis']?.['visible'],_0x19200e['components']['xAxis']['visible']=_0x581a72??_0x119e54['components']?.['xAxis']?.['visible'],_0x19200e['components']['navigationMap']['visible']=_0x464af4??_0x119e54['components']?.['navigationMap']?.['visible'],_0x19200e;},getInstrumentAndAggregation=_0x33efbf=>{const _0x13db36=_0x33efbf['symbol'],_0x3f3c07=pipe(option['fromNullable'](_0x33efbf['period']),option['chain'](stringToAggregationPeriodSafe),option['toUndefined']),_0x42d42e={};return _0x42d42e['initialInstrument']=_0x13db36,_0x42d42e['initialAggregation']=_0x3f3c07,_0x42d42e;},fetchScript=_0x39929f=>new Promise(_0x29aa22=>{const _0x83cec1=document['createElement']('script');_0x83cec1['src']=_0x39929f,_0x83cec1['async']=!![],document['head']['appendChild'](_0x83cec1),_0x83cec1['onload']=()=>_0x29aa22(undefined);}),processDxFeedProvidersOptions=async _0x42d851=>{const _0x7c8ad7={},_0x18fb71='https://webdev.prosp.devexperts.com:8095/widget/symbol-suggest/en.txt',_0x55ea15='test',_0x2810d7='test',_0x3abc4e='/news-demo',_0x4ad03b='demo',_0x487aad='demo';await fetchScript(SCRIPTS_URL+'/symbolSuggest.provider.js');const _0x2fdfc0={};_0x2fdfc0['username']=_0x42d851['ipfUsername']||_0x55ea15,_0x2fdfc0['password']=_0x42d851['ipfPassword']||_0x2810d7,_0x2fdfc0['ipfURL']=_0x42d851['ipfURL']||_0x18fb71;const _0x1a9283=_0x2fdfc0;_0x7c8ad7['symbolSuggestProvider']=Providers['symbolSuggest']['createDxFeedIpfSymbolSuggestProvider'](_0x1a9283);if(_0x42d851['dxFeedURL']){await fetchScript(SCRIPTS_URL+'/chartData.provider.js');const _0x5c032a={};_0x5c032a['endpointUrl']=_0x42d851['dxFeedURL'],_0x5c032a['authToken']=_0x42d851['dxFeedToken'];const _0x3a5856=_0x5c032a;_0x7c8ad7['chartDataProvider']=Providers['chartData']['createDxFeedProviderWithAdapter'](_0x3a5856);}await fetchScript(SCRIPTS_URL+'/newsData.provider.js');const _0x8ecad0={};_0x8ecad0['newsURL']=_0x42d851['newsURL']??_0x3abc4e,_0x8ecad0['username']=_0x42d851['newsUsername']??_0x4ad03b,_0x8ecad0['password']=_0x42d851['newsPassword']??_0x487aad;const _0x4f36f0=_0x8ecad0;return _0x7c8ad7['newsDataProvider']=await Providers['newsData']['createDxFeedNewsDataProvider'](_0x4f36f0),_0x7c8ad7;},mergeDependenciesWithQueryParams=async(_0x5934dd,_0x5cf0af,_0x4b4586,_0x34622d)=>{const _0x5d194a=_0x34622d['chartType']??_0x5934dd['chartType']??'candle',_0x261d02=(_0x34622d['chartTheme']??_0x5934dd['chartTheme'])==='light'?'light':DEFAULT_THEME,_0x294121=option['toUndefined'](getQueryParam('studies'))?.['split'](',')??_0x5934dd['studies'],_0x4ff38b=_0x393184=>pipe(option['fromNullable'](_0x34622d[''+_0x393184]??_0x5934dd[''+_0x393184]),option['map'](parseInt),option['chain'](_0x2cca0a=>isNaN(_0x2cca0a)?none:some(_0x2cca0a)),option['toUndefined']),_0x23dd8c=_0x4ff38b('height'),_0xd5032a=_0x4ff38b('width');let _0x432350=undefined;if(_0xd5032a!==undefined&&_0x23dd8c!==undefined){const _0x2c65f6={};_0x2c65f6['width']=_0xd5032a,_0x2c65f6['height']=_0x23dd8c,_0x432350=_0x2c65f6;}const _0x388528=parseBoolean(_0x34622d['toolbarEnabled']??_0x5cf0af['toolbar']?.['enabled']),_0x3d05a5=parseBoolean(_0x34622d['sidebarEnabled']??_0x5cf0af['drawings']?.['sidebar']?.['enabled']),_0x3af412=parseBoolean(_0x34622d['instrumentSuggestEnabled']??_0x5cf0af['instrumentSuggest']?.['enabled']),_0x18c0f6=parseBoolean(_0x34622d['instrumentSuggestVisible']??_0x5cf0af['instrumentSuggest']?.['visible']),_0x3da29a=parseBoolean(_0x34622d['xAxisEnabled']??_0x4b4586['components']?.['xAxis']?.['visible']),_0x1b5e2e=parseBoolean(_0x34622d['yAxisEnabled']??_0x4b4586['components']?.['yAxis']?.['visible']),_0x7c9255=parseBoolean(_0x34622d['navigationMapEnabled']??_0x4b4586['components']?.['navigationMap']?.['visible']),_0xf78d87={};_0xf78d87['addIfMissing']=!![],_0xf78d87['overrideExisting']=!![];const _0x17176f=await processDxFeedProvidersOptions(merge(_0x5934dd,_0x34622d,_0xf78d87)),_0x27deb4={..._0x5cf0af};_0x27deb4['toolbar']={..._0x5cf0af['toolbar']},_0x27deb4['drawings']={..._0x5cf0af['drawings']},_0x27deb4['instrumentSuggest']={..._0x5cf0af['instrumentSuggest']},_0x27deb4['fixedSize']=_0x432350,_0x27deb4['toolbar']['enabled']=_0x388528,_0x27deb4['drawings']['sidebar']={..._0x5cf0af['drawings']?.['sidebar']},_0x27deb4['drawings']['sidebar']['enabled']=_0x3d05a5,_0x27deb4['instrumentSuggest']['enabled']=_0x3af412,_0x27deb4['instrumentSuggest']['visible']=_0x18c0f6;const _0x2a2525={..._0x4b4586};_0x2a2525['components']={..._0x4b4586['components']},_0x2a2525['components']['xAxis']={..._0x4b4586['components']?.['xAxis']},_0x2a2525['components']['yAxis']={..._0x4b4586['components']?.['yAxis']},_0x2a2525['components']['navigationMap']={..._0x4b4586['components']?.['navigationMap']},_0x2a2525['components']['xAxis']['visible']=_0x3da29a,_0x2a2525['components']['yAxis']['visible']=_0x1b5e2e,_0x2a2525['components']['navigationMap']['visible']=_0x7c9255;const _0x588ea2={};_0x588ea2['initialChartType']=_0x5d194a;const _0x3c014d={'initialStudies':_0x294121,'initialChartTheme':_0x261d02,'chartReactConfig':_0x27deb4,'initialChartConfig':_0x2a2525,..._0x17176f};return _0x3c014d['chartTypesConfig']=_0x588ea2,_0x3c014d;},getLayoutProvider=(_0x39e4fa,_0x469135)=>{const _0x28c4e8=_0x39e4fa['useLocalStorageForLayout']?createLocalStorageLayoutProvider():_0x469135?.['layoutProvider'],_0x41ce7f={};return _0x41ce7f['layoutProvider']=_0x28c4e8,_0x41ce7f;};