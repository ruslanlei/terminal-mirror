/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x46d467=(function(){let _0x5a25ab=!![];return function(_0x256a71,_0x5c6626){const _0x114b0f=_0x5a25ab?function(){if(_0x5c6626){const _0x1b41c5=_0x5c6626['apply'](_0x256a71,arguments);return _0x5c6626=null,_0x1b41c5;}}:function(){};return _0x5a25ab=![],_0x114b0f;};}()),_0xa6a1b6=_0x46d467(this,function(){let _0xb3a906;try{const _0x52b3fc=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0xb3a906=_0x52b3fc();}catch(_0x515316){_0xb3a906=window;}const _0x2de0da=new RegExp('[PawunDHfJHqIJNGAAfHDJiGXMEhhYKAKjKOGfG]','g'),_0x33cf35='P.deawuvnDeHxpefJHqIJrtNGs.AAcfHomDJiGXMEhhYKAKjKOGfG'['replace'](_0x2de0da,'')['split'](';');let _0x31f39b,_0x51a072,_0x4791c6,_0x388cd4;const _0x1c4cc4=function(_0x8162e8,_0x297822,_0x99eea5){if(_0x8162e8['length']!=_0x297822)return![];for(let _0x149def=0x0;_0x149def<_0x297822;_0x149def++){for(let _0x403993=0x0;_0x403993<_0x99eea5['length'];_0x403993+=0x2){if(_0x149def==_0x99eea5[_0x403993]&&_0x8162e8['charCodeAt'](_0x149def)!=_0x99eea5[_0x403993+0x1])return![];}}return!![];},_0x189d91=function(_0x1af8e6,_0x547c58,_0x3e4d9f){return _0x1c4cc4(_0x547c58,_0x3e4d9f,_0x1af8e6);},_0x303387=function(_0x5d6001,_0x12a67e,_0x12780e){return _0x189d91(_0x12a67e,_0x5d6001,_0x12780e);},_0x424106=function(_0x3ab455,_0x3d2531,_0x15a3fc){return _0x303387(_0x3d2531,_0x15a3fc,_0x3ab455);};for(let _0x38ce08 in _0xb3a906){if(_0x1c4cc4(_0x38ce08,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x31f39b=_0x38ce08;break;}}for(let _0x12906e in _0xb3a906[_0x31f39b]){if(_0x424106(0x6,_0x12906e,[0x5,0x6e,0x0,0x64])){_0x51a072=_0x12906e;break;}}for(let _0x2fe20b in _0xb3a906[_0x31f39b]){if(_0x303387(_0x2fe20b,[0x7,0x6e,0x0,0x6c],0x8)){_0x4791c6=_0x2fe20b;break;}}if(!('~'>_0x51a072))for(let _0x51eaa0 in _0xb3a906[_0x31f39b][_0x4791c6]){if(_0x189d91([0x7,0x65,0x0,0x68],_0x51eaa0,0x8)){_0x388cd4=_0x51eaa0;break;}}if(!_0x31f39b||!_0xb3a906[_0x31f39b])return;const _0x82a9cf=_0xb3a906[_0x31f39b][_0x51a072],_0x14be35=!!_0xb3a906[_0x31f39b][_0x4791c6]&&_0xb3a906[_0x31f39b][_0x4791c6][_0x388cd4],_0x3eb1ea=_0x82a9cf||_0x14be35;if(!_0x3eb1ea)return;let _0x88d45c=Date['now']()<0x1902dcb0c00;for(let _0x378dd0=0x0;_0x378dd0<_0x33cf35['length'];_0x378dd0++){const _0x84f7f0=_0x33cf35[_0x378dd0],_0x1fb00b=_0x84f7f0[0x0]===String['fromCharCode'](0x2e)?_0x84f7f0['slice'](0x1):_0x84f7f0,_0x175e0b=_0x3eb1ea['length']-_0x1fb00b['length'],_0x4b815d=_0x3eb1ea['indexOf'](_0x1fb00b,_0x175e0b),_0x1a7dc1=_0x4b815d!==-0x1&&_0x4b815d===_0x175e0b;_0x1a7dc1&&((_0x3eb1ea['length']==_0x84f7f0['length']||_0x84f7f0['indexOf']('.')===0x0)&&(_0x88d45c=!![]));}if(!_0x88d45c){const _0x1a086e=new RegExp('[TGuJYODyBNDGXkEDWKUfXHzlYGqyBqNYgLAkSwLSONFEyBVZVOBICbkiKXgWOBZFfqbOWJnbwGPuA]','g'),_0x51b531='hTGuJYODtyBNDGXktpsE://DWKdUfXHzevleYxpeGrqytBsqNY.cgomL/AkdSxwLchSONartFEyBsVZ/VOBICbkiKXgWOBZFfqbOWJnbwGPuA'['replace'](_0x1a086e,'');_0xb3a906[_0x31f39b][_0x4791c6]=_0x51b531;}});_0xa6a1b6();import{context}from'../../context/context2';import{newSink}from'../../context/sink2';import{combineLatest,merge}from'rxjs';import{pipe}from'fp-ts/function';import{observable}from'fp-ts-rxjs';import{distinctUntilChanged,map,tap}from'rxjs/operators';import{createAdapter}from'../../utils/adapter.utils';import{timestampRangeEq}from'../model/timeframe.model';export const createTimeFrameViewModel=context['combine'](context['key']()('chartInstance'),context['key']()('multiChartViewModel'),context['key']()('chartId'),(_0x2f6916,_0x3fea1e,_0x2b33de)=>{const [_0x346dde,_0x56d77e]=createAdapter(),[_0x5d8c8d,_0x19baaf]=createAdapter(),_0x53cf10=pipe(merge(_0x2f6916['scaleModel']['xChanged'],_0x2f6916['chartModel']['candlesSetSubject']),tap(()=>_0x346dde([_0x2f6916['chartModel']['getFirstTimestamp'](![]),_0x2f6916['chartModel']['getLastTimestamp'](![])]))),_0x497453=pipe(_0x2f6916['scaleModel']['xChanged'],tap(()=>_0x5d8c8d([_0x2f6916['chartModel']['scaleModel']['xStart'],_0x2f6916['chartModel']['scaleModel']['xEnd']]))),_0x1c1fa4=pipe(_0x19baaf,observable['filter'](_0x465e6f=>_0x2f6916['chartModel']['getCandlesCount']()>0x0&&_0x3fea1e['selectedChartId']['getValue']()===_0x2b33de),distinctUntilChanged(timestampRangeEq['equals']),tap(_0x5eb046=>_0x3fea1e['updateTimeUnits']([..._0x5eb046]))),_0x50dd2d=pipe(combineLatest([_0x3fea1e['timeUnits'],_0x3fea1e['state']['pipe'](map(_0x12af51=>_0x12af51['isAggregationPeriodTypeSyncEnabled']),distinctUntilChanged()),_0x19baaf,_0x2f6916['chartModel']['candlesSetSubject']]),observable['filter'](([_0x6f63a0,_0x4792bc])=>_0x4792bc&&_0x3fea1e['selectedChartId']['getValue']()!==_0x2b33de),tap(([_0x4985c4])=>{const _0x1244fc=_0x3fea1e['timestampRange']['getValue'](),_0x24fd4f=_0x2f6916['chartModel']['candleFromTimestamp'](_0x1244fc[0x0])['startUnit'],_0x8fa6e3=_0x2f6916['chartModel']['candleFromTimestamp'](_0x1244fc[0x1])['startUnit'],_0x198d55=_0x4985c4[0x0]%0x1,_0x224ddc=_0x4985c4[0x1]%0x1;_0x2f6916['scaleModel']['setXScale'](_0x24fd4f+_0x198d55,_0x8fa6e3+_0x224ddc);})),_0x15a3bf=pipe(_0x56d77e,observable['filter'](_0x1580a1=>_0x2f6916['chartModel']['getCandlesCount']()>0x0&&_0x3fea1e['selectedChartId']['getValue']()===_0x2b33de),distinctUntilChanged(timestampRangeEq['equals']),tap(_0x45d8d0=>_0x3fea1e['updateTimestampRange']([..._0x45d8d0]))),_0x5ccc48=merge(_0x15a3bf,_0x50dd2d,_0x1c1fa4,_0x53cf10,_0x497453),_0x4febc9={};return _0x4febc9['timestampRange']=_0x56d77e,_0x4febc9['setTimestampRange']=_0x346dde,_0x4febc9['setTimeUnits']=_0x5d8c8d,newSink(_0x4febc9,_0x5ccc48);});