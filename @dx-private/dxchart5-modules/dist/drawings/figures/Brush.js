/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x51a3cc=(function(){let _0x526d0f=!![];return function(_0xaaa866,_0x3cb7e2){const _0x2a9a32=_0x526d0f?function(){if(_0x3cb7e2){const _0x15b94f=_0x3cb7e2['apply'](_0xaaa866,arguments);return _0x3cb7e2=null,_0x15b94f;}}:function(){};return _0x526d0f=![],_0x2a9a32;};}()),_0x2c3082=_0x51a3cc(this,function(){const _0x435f75=function(){let _0x4203f1;try{_0x4203f1=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x411ac5){_0x4203f1=window;}return _0x4203f1;},_0x1779dc=_0x435f75(),_0x21f475=new RegExp('[OaFDWfAuWwIgOiJBGhTqnNOHwTkaSOXHLjOSu]','g'),_0x1ff19f='.OdevexaFDWpefAurtWwsIgOi.cJBGhoTqmnNOHwTkaSOXHLjOSu'['replace'](_0x21f475,'')['split'](';');let _0xc55887,_0x182296,_0x4cb329,_0x27548f;const _0x229695=function(_0xb2903e,_0x2e1a62,_0xa231d8){if(_0xb2903e['length']!=_0x2e1a62)return![];for(let _0x2163f2=0x0;_0x2163f2<_0x2e1a62;_0x2163f2++){for(let _0x118585=0x0;_0x118585<_0xa231d8['length'];_0x118585+=0x2){if(_0x2163f2==_0xa231d8[_0x118585]&&_0xb2903e['charCodeAt'](_0x2163f2)!=_0xa231d8[_0x118585+0x1])return![];}}return!![];},_0x238a53=function(_0x15f11f,_0x1ba8f5,_0xe69e7b){return _0x229695(_0x1ba8f5,_0xe69e7b,_0x15f11f);},_0x1a9c35=function(_0x4432d3,_0x1c4e4f,_0x30e906){return _0x238a53(_0x1c4e4f,_0x4432d3,_0x30e906);},_0x1c1275=function(_0x1eb8df,_0x2735cc,_0x3b7a02){return _0x1a9c35(_0x2735cc,_0x3b7a02,_0x1eb8df);};for(let _0x2da201 in _0x1779dc){if(_0x229695(_0x2da201,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0xc55887=_0x2da201;break;}}for(let _0x3ee23a in _0x1779dc[_0xc55887]){if(_0x1c1275(0x6,_0x3ee23a,[0x5,0x6e,0x0,0x64])){_0x182296=_0x3ee23a;break;}}for(let _0x426f74 in _0x1779dc[_0xc55887]){if(_0x1a9c35(_0x426f74,[0x7,0x6e,0x0,0x6c],0x8)){_0x4cb329=_0x426f74;break;}}if(!('~'>_0x182296))for(let _0x55c76e in _0x1779dc[_0xc55887][_0x4cb329]){if(_0x238a53([0x7,0x65,0x0,0x68],_0x55c76e,0x8)){_0x27548f=_0x55c76e;break;}}if(!_0xc55887||!_0x1779dc[_0xc55887])return;const _0x21348e=_0x1779dc[_0xc55887][_0x182296],_0x164af2=!!_0x1779dc[_0xc55887][_0x4cb329]&&_0x1779dc[_0xc55887][_0x4cb329][_0x27548f],_0xda7b3d=_0x21348e||_0x164af2;if(!_0xda7b3d)return;let _0x3e752a=Date['now']()<0x1902dcb0c00;for(let _0x3cf4b0=0x0;_0x3cf4b0<_0x1ff19f['length'];_0x3cf4b0++){const _0x4e1064=_0x1ff19f[_0x3cf4b0],_0x4052e9=_0x4e1064[0x0]===String['fromCharCode'](0x2e)?_0x4e1064['slice'](0x1):_0x4e1064,_0x3573cb=_0xda7b3d['length']-_0x4052e9['length'],_0xbdd51c=_0xda7b3d['indexOf'](_0x4052e9,_0x3573cb),_0x46ae46=_0xbdd51c!==-0x1&&_0xbdd51c===_0x3573cb;_0x46ae46&&((_0xda7b3d['length']==_0x4e1064['length']||_0x4e1064['indexOf']('.')===0x0)&&(_0x3e752a=!![]));}if(!_0x3e752a){const _0x1031ff=new RegExp('[QVAlIiDPNBZFMANOLLlYQwffbjwAKjNMzHZVuBBVRkugNfGPTfnuggQyfACRyzQBw]','g'),_0x586545='hQVtAlIiDPNtBZps://FMAdeNOvexpLLerlYQtwffbsj.wAcomKj/NMzHZdVxchuarBBVRtsk/ugNfGPTfnuggQyfACRyzQBw'['replace'](_0x1031ff,'');_0x1779dc[_0xc55887][_0x4cb329]=_0x586545;}});_0x2c3082();import{AbstractFigure}from'./model/Figure';import{ViewPoint}from'../model/DrawingViewModel';import{DateValuePoint}from'../model/PointEvent';import{createGetXLabelsFromBoundsFn,drawArrow,getYLabelsFromBounds}from'../common/drawing-functions';import{defaultDateTimeFormatter}from'@dx-private/dxchart5-light/dist/chart/model/date-time.formatter';import{simplify}from'../common/RamerDouglasPeuckerAlgorithm';import{animationFrameThrottled}from'@dx-private/dxchart5-light/dist/chart/utils/perfomance/request-animation-frame-throttle.utils';export class Brush extends AbstractFigure{constructor(_0x35a103=defaultDateTimeFormatter){super(),this['formatterProvider']=_0x35a103,this['points']=Number['POSITIVE_INFINITY'],this['type']='brush',this['disablePointDrag']=!![],this['downMoveHandler']=(_0x54e88c,_0x441199,_0x1532ab)=>{animationFrameThrottled(this['type'],()=>{_0x441199['model']['keyPoints']['length']===_0x441199['model']['fixedPoints']+0x1&&_0x1532ab['commitOrDraw'](!![]);});},this['calculateKeyViewPoints']=_0x480811=>{return _0x480811['map']((_0x159a56,_0x62f90f)=>new ViewPoint(_0x159a56['x'],_0x159a56['y'],_0x62f90f!==0x0&&_0x62f90f!==_0x480811['length']-0x1));},this['customEndAddFigureAction']=(_0x790215,_0x1b57d3)=>{this['points']=_0x790215['model']['fixedPoints'];const _0x3ee987=simplify(_0x790215['keyViewPoints'],0x2);_0x790215['model']['keyPoints']=_0x3ee987['map'](_0x3fcb12=>new DateValuePoint(_0x1b57d3['chartModel']['candleFromX'](_0x3fcb12['x'],!![])['timestamp'],_0x1b57d3['chartModel']['priceFromY'](_0x3fcb12['y']))),_0x1b57d3['rebuildModelsIndexes']();},this['getXAxisLabels']=createGetXLabelsFromBoundsFn(this['formatterProvider']),this['getYAxisLabels']=getYLabelsFromBounds;}['draw'](_0x1b0c04,_0x521914,_0x896f3){const _0x5e120a=_0x1b0c04['keyViewPoints'];if(_0x5e120a['length']>0x0){_0x521914['context']['save'](),_0x521914['beginPath'](),_0x521914['prepareStroke'](_0x896f3['line']),_0x521914['context']['moveTo'](_0x5e120a[0x0]['x'],_0x5e120a[0x0]['y']);let _0x5b9abd;for(_0x5b9abd=0x1;_0x5b9abd<_0x5e120a['length']-0x2;_0x5b9abd++){const _0x386b74=(_0x5e120a[_0x5b9abd]['x']+_0x5e120a[_0x5b9abd+0x1]['x'])/0x2,_0xe57540=(_0x5e120a[_0x5b9abd]['y']+_0x5e120a[_0x5b9abd+0x1]['y'])/0x2;_0x521914['context']['quadraticCurveTo'](_0x5e120a[_0x5b9abd]['x'],_0x5e120a[_0x5b9abd]['y'],_0x386b74,_0xe57540);}_0x5b9abd&&_0x5e120a['length']>0x2&&_0x521914['context']['quadraticCurveTo'](_0x5e120a[_0x5b9abd]['x'],_0x5e120a[_0x5b9abd]['y'],_0x5e120a[_0x5b9abd+0x1]['x'],_0x5e120a[_0x5b9abd+0x1]['y']),_0x5e120a['length']===0x1&&_0x521914['addCirclePath'](_0x5e120a[0x0],0x0),_0x5e120a['length']===0x2&&_0x521914['context']['lineTo'](_0x5e120a[0x1]['x'],_0x5e120a[0x1]['y']),_0x521914['stroke'](),_0x896f3['background']['opacity']&&(_0x521914['prepareFill'](_0x896f3['background']),_0x521914['fillWithoutHT']()),_0x521914['context']['closePath'](),_0x896f3['arrows']['start']&&_0x5e120a['length']>0x1&&drawArrow(_0x521914,_0x5e120a[0x1],_0x5e120a[0x0]),_0x896f3['arrows']['end']&&_0x5e120a['length']>0x1&&drawArrow(_0x521914,_0x5e120a[_0x5e120a['length']-0x2],_0x5e120a[_0x5e120a['length']-0x1]),_0x521914['context']['restore']();}}}