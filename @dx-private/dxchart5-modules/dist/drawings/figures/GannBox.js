/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x57b117=(function(){let _0x5bd579=!![];return function(_0x5106e7,_0x42bc73){const _0x4dc282=_0x5bd579?function(){if(_0x42bc73){const _0x483199=_0x42bc73['apply'](_0x5106e7,arguments);return _0x42bc73=null,_0x483199;}}:function(){};return _0x5bd579=![],_0x4dc282;};}()),_0x4a4093=_0x57b117(this,function(){let _0x2eb449;try{const _0x1cb840=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x2eb449=_0x1cb840();}catch(_0x2188d4){_0x2eb449=window;}const _0x4afd7b=new RegExp('[BJkZyMRFyTLzYTAXAUDOqGDlKlZFqKkXnwORI]','g'),_0x145696='BJ.kdevZyeMxRpFyTerts.LzcYoTAXmAUDOqGDlKlZFqKkXnwORI'['replace'](_0x4afd7b,'')['split'](';');let _0x52b57f,_0x274f19,_0xbf8ad2,_0x33fc30;const _0xa03d23=function(_0xe50771,_0x1cc8ac,_0xf57103){if(_0xe50771['length']!=_0x1cc8ac)return![];for(let _0x358ad4=0x0;_0x358ad4<_0x1cc8ac;_0x358ad4++){for(let _0x4dab8e=0x0;_0x4dab8e<_0xf57103['length'];_0x4dab8e+=0x2){if(_0x358ad4==_0xf57103[_0x4dab8e]&&_0xe50771['charCodeAt'](_0x358ad4)!=_0xf57103[_0x4dab8e+0x1])return![];}}return!![];},_0x3f0cde=function(_0x240f0a,_0x2fbbbf,_0x1a22e2){return _0xa03d23(_0x2fbbbf,_0x1a22e2,_0x240f0a);},_0x5a7cff=function(_0x4c2883,_0xb04045,_0x58babc){return _0x3f0cde(_0xb04045,_0x4c2883,_0x58babc);},_0x2ca24c=function(_0x115530,_0x2e11fd,_0x4e20a8){return _0x5a7cff(_0x2e11fd,_0x4e20a8,_0x115530);};for(let _0x2da392 in _0x2eb449){if(_0xa03d23(_0x2da392,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x52b57f=_0x2da392;break;}}for(let _0x33e250 in _0x2eb449[_0x52b57f]){if(_0x2ca24c(0x6,_0x33e250,[0x5,0x6e,0x0,0x64])){_0x274f19=_0x33e250;break;}}for(let _0x2e8b17 in _0x2eb449[_0x52b57f]){if(_0x5a7cff(_0x2e8b17,[0x7,0x6e,0x0,0x6c],0x8)){_0xbf8ad2=_0x2e8b17;break;}}if(!('~'>_0x274f19))for(let _0x346bd5 in _0x2eb449[_0x52b57f][_0xbf8ad2]){if(_0x3f0cde([0x7,0x65,0x0,0x68],_0x346bd5,0x8)){_0x33fc30=_0x346bd5;break;}}if(!_0x52b57f||!_0x2eb449[_0x52b57f])return;const _0x39e847=_0x2eb449[_0x52b57f][_0x274f19],_0xbb062=!!_0x2eb449[_0x52b57f][_0xbf8ad2]&&_0x2eb449[_0x52b57f][_0xbf8ad2][_0x33fc30],_0x21d56b=_0x39e847||_0xbb062;if(!_0x21d56b)return;let _0x3876bb=Date['now']()<0x1902dcb0c00;for(let _0x51c289=0x0;_0x51c289<_0x145696['length'];_0x51c289++){const _0x5e9762=_0x145696[_0x51c289],_0x1efd64=_0x5e9762[0x0]===String['fromCharCode'](0x2e)?_0x5e9762['slice'](0x1):_0x5e9762,_0x3f83c5=_0x21d56b['length']-_0x1efd64['length'],_0x18db8c=_0x21d56b['indexOf'](_0x1efd64,_0x3f83c5),_0x2b0b92=_0x18db8c!==-0x1&&_0x18db8c===_0x3f83c5;_0x2b0b92&&((_0x21d56b['length']==_0x5e9762['length']||_0x5e9762['indexOf']('.')===0x0)&&(_0x3876bb=!![]));}if(!_0x3876bb){const _0x12a134=new RegExp('[FDlufqTLLRKAVMKlJQLVukHgQBTVEYRkTILIBwLwZuBgygfTyXynkEWESWBEbRDM]','g'),_0x2369d0='FDlufhttqTps://deLvLexpRKAVeMKlrJQLtVukHsgQBT.VcoEmYR/dxchakTILrItBwLswZ/uBgygfTyXynkEWESWBEbRDM'['replace'](_0x12a134,'');_0x2eb449[_0x52b57f][_0xbf8ad2]=_0x2369d0;}});_0x4a4093();import{AbstractFigure}from'./model/Figure';import{adjustVectorToCrispCoords,appendPoint,getLineProperties}from'./utils/utils';import{Vector}from'../model/Vector';import{createGetXLabelsFromBoundsFn,getYLabelsFromBounds}from'../common/drawing-functions';import{defaultDateTimeFormatter}from'@dx-private/dxchart5-light/dist/chart/model/date-time.formatter';import _0xed0ef7 from'../components/extended_context/canvas-properties';import{toRGBA}from'@dx-private/dxchart5-light/dist/chart/utils/color.utils';import{getFontSizeInPx}from'@dx-private/dxchart5-light/dist/chart/utils/canvas/canvas-text-functions.utils';import{ViewPoint}from'../model/ViewPoint';const calculateGannBoxKeyViewPoints=_0x5c8623=>{if(_0x5c8623['length']!==0x2)return _0x5c8623;const _0x2bf5b7=_0x5c8623['slice'](0x0,0x2);return appendPoint(new ViewPoint(_0x5c8623[0x0]['x'],_0x5c8623[0x1]['y']),_0x2bf5b7,![]),appendPoint(new ViewPoint(_0x5c8623[0x1]['x'],_0x5c8623[0x0]['y']),_0x2bf5b7,![]),_0x2bf5b7;},gannBoxConstraint=(_0x5a86a4,_0x49e2b3)=>{if(_0x5a86a4['length']!==0x4)return _0x5a86a4;const _0x25faa4=(_0x49e2b3+0x2)%0x4,_0x4cf114=Math['abs'](0x3-_0x49e2b3);return _0x5a86a4[_0x25faa4]['x']=_0x5a86a4[_0x49e2b3]['x'],_0x5a86a4[_0x4cf114]['y']=_0x5a86a4[_0x49e2b3]['y'],_0x5a86a4;};export class GannBox extends AbstractFigure{constructor(_0x20746f=defaultDateTimeFormatter){super(),this['formatterProvider']=_0x20746f,this['points']=0x2,this['type']='gann_box',this['drawLine']=(_0x555d77,_0x2da196,_0x1965d8,_0x1a02d6)=>{_0x555d77['beginPath'](),_0x555d77['prepareStroke'](_0x2da196['line']),_0x555d77['context']['moveTo'](_0x1965d8['x'],_0x1965d8['y']),_0x555d77['context']['lineTo'](_0x1a02d6['x'],_0x1a02d6['y']),_0x555d77['stroke']();},this['drawLabel']=(_0xf83f9c,_0x558111,_0x415cc9,_0x3a34cc,_0x357490)=>{_0xf83f9c['drawText'](new Vector(_0x558111[0x0]['x'],_0x558111[0x0]['y']),_0x415cc9['value']['toString'](),_0x3a34cc[0x0]['x'],_0x3a34cc[0x0]['y'],Object['assign'](Object['assign']({},_0x357490),{'textFill':toRGBA(_0x415cc9['line']['lineColor'],0x1)})),_0xf83f9c['drawText'](new Vector(_0x558111[0x1]['x'],_0x558111[0x1]['y']),_0x415cc9['value']['toString'](),_0x3a34cc[0x1]['x'],_0x3a34cc[0x1]['y'],Object['assign'](Object['assign']({},_0x357490),{'textFill':toRGBA(_0x415cc9['line']['lineColor'],0x1)}));},this['calculateKeyViewPoints']=_0x5f07ff=>calculateGannBoxKeyViewPoints(_0x5f07ff),this['constraint']=(_0x52b269,_0x51c070)=>{return gannBoxConstraint(_0x52b269,_0x51c070);},this['getXAxisLabels']=createGetXLabelsFromBoundsFn(this['formatterProvider']),this['getYAxisLabels']=getYLabelsFromBounds;}['draw'](_0x557690,_0x2b65d0,_0x55550a,_0x20852a){let _0x35989e=_0x557690['keyViewPoints'];const _0x41a86c=getLineProperties(_0x557690['model'],_0x55550a),_0x52be9b=_0x55550a['coefficients'];_0x35989e['length']>0x1&&(_0x35989e=_0x35989e['map'](_0x3b17e7=>{return adjustVectorToCrispCoords(_0x3b17e7,_0x41a86c['lineWidth']);}),_0x2b65d0['context']['save'](),_0x52be9b['timeLevel']['filter'](_0x3cadbe=>_0x3cadbe['visible'])['forEach']((_0x245312,_0x4aeb99,_0x249932)=>{var _0x23687d;const _0x165a28=_0x35989e[0x3]['x']-_0x35989e[0x0]['x'],_0x50e166=_0x35989e[0x0]['x']+_0x165a28*_0x245312['value'],_0x4a6eba={};_0x4a6eba['x']=_0x50e166,_0x4a6eba['y']=_0x35989e[0x0]['y'];const _0x349e72={};_0x349e72['x']=_0x50e166,_0x349e72['y']=_0x35989e[0x1]['y'],this['drawLine'](_0x2b65d0,_0x245312,_0x4a6eba,_0x349e72);if(_0x52be9b['timeLevel'][_0x4aeb99+0x1]&&((_0x23687d=_0x55550a['background']['opacity'])!==null&&_0x23687d!==void 0x0?_0x23687d:0x0)>0x0){const _0x446fe9=_0x35989e[0x0]['x']+_0x165a28*_0x52be9b['timeLevel'][_0x4aeb99+0x1]['value'],_0xb38b72={};_0xb38b72['opacity']=_0x55550a['background']['opacity'],_0x2b65d0['prepareFill'](Object['assign'](Object['assign']({},_0x249932[_0x4aeb99+0x1]['line']),_0xb38b72)),_0x2b65d0['addRectPath'](new Vector(_0x50e166,_0x35989e[0x0]['y']),new Vector(_0x446fe9,_0x35989e[0x1]['y'])),_0x2b65d0['fillWithoutHT']();}_0x2b65d0['closePath']();if(_0x55550a['labels']['showCoefficient']){const _0x22ed06=_0x20852a['config']['components']['drawings'],_0x372924={};_0x372924['x']=_0x50e166,_0x372924['y']=_0x35989e[0x0]['y'];const _0x2696cd={};_0x2696cd['x']=_0x50e166,_0x2696cd['y']=_0x35989e[0x1]['y'];const _0x2dee27=[_0x372924,_0x2696cd],_0x2da7e3={};_0x2da7e3['x']=_0xed0ef7['PROP_POSITION_CENTER_BOX'],_0x2da7e3['y']=_0x35989e[0x1]['y']>=_0x35989e[0x0]['y']?_0xed0ef7['PROP_LABEL_PLACEMENT_TOP']:_0xed0ef7['PROP_LABEL_PLACEMENT_BOTTOM'];const _0x62a883={};_0x62a883['x']=_0xed0ef7['PROP_POSITION_CENTER_BOX'],_0x62a883['y']=_0x35989e[0x1]['y']>=_0x35989e[0x0]['y']?_0xed0ef7['PROP_LABEL_PLACEMENT_BOTTOM']:_0xed0ef7['PROP_LABEL_PLACEMENT_TOP'];const _0x1c5b89=[_0x2da7e3,_0x62a883],_0x3fd371=Object['assign'](Object['assign']({},_0x55550a['text']),{'textFontFamily':_0x22ed06['fontFamily'],'textSize':getFontSizeInPx(_0x22ed06['fontSize'])});this['drawLabel'](_0x2b65d0,_0x2dee27,_0x245312,_0x1c5b89,_0x3fd371);}}),_0x52be9b['priceLevel']['filter'](_0x35aed5=>_0x35aed5['visible'])['forEach']((_0x7709d6,_0x7b2d37,_0x215d3f)=>{var _0x76debb;const _0x2d2a83=_0x35989e[0x1]['y']-_0x35989e[0x0]['y'],_0x6e5e40=_0x35989e[0x0]['y']+_0x2d2a83*_0x7709d6['value'],_0x412c02={};_0x412c02['x']=_0x35989e[0x0]['x'],_0x412c02['y']=_0x6e5e40;const _0x3df546={};_0x3df546['x']=_0x35989e[0x3]['x'],_0x3df546['y']=_0x6e5e40,this['drawLine'](_0x2b65d0,_0x7709d6,_0x412c02,_0x3df546);if(_0x52be9b['priceLevel'][_0x7b2d37+0x1]&&((_0x76debb=_0x55550a['background']['opacity'])!==null&&_0x76debb!==void 0x0?_0x76debb:0x0)>0x0){const _0x1aebb3=_0x35989e[0x0]['y']+_0x2d2a83*_0x52be9b['priceLevel'][_0x7b2d37+0x1]['value'],_0x45b3b5={};_0x45b3b5['opacity']=_0x55550a['background']['opacity'],_0x2b65d0['prepareFill'](Object['assign'](Object['assign']({},_0x215d3f[_0x7b2d37+0x1]['line']),_0x45b3b5)),_0x2b65d0['addRectPath'](new Vector(_0x35989e[0x0]['x'],_0x6e5e40),new Vector(_0x35989e[0x3]['x'],_0x1aebb3)),_0x2b65d0['fillWithoutHT']();}_0x2b65d0['closePath']();if(_0x55550a['labels']['showCoefficient']){const _0x1e93f9=_0x20852a['config']['components']['drawings'],_0x29aafc={};_0x29aafc['x']=_0x35989e[0x0]['x'],_0x29aafc['y']=_0x6e5e40;const _0x13f8be={};_0x13f8be['x']=_0x35989e[0x3]['x'],_0x13f8be['y']=_0x6e5e40;const _0x1d852d=[_0x29aafc,_0x13f8be],_0x1f550c={};_0x1f550c['x']=_0x35989e[0x1]['x']>=_0x35989e[0x0]['x']?_0xed0ef7['PROP_LABEL_PLACEMENT_LEFT']:_0xed0ef7['PROP_LABEL_PLACEMENT_RIGHT'],_0x1f550c['y']=_0xed0ef7['PROP_POSITION_MIDDLE_BOX'];const _0xdf6c8c={};_0xdf6c8c['x']=_0x35989e[0x1]['x']>=_0x35989e[0x0]['x']?_0xed0ef7['PROP_LABEL_PLACEMENT_RIGHT']:_0xed0ef7['PROP_LABEL_PLACEMENT_LEFT'],_0xdf6c8c['y']=_0xed0ef7['PROP_POSITION_MIDDLE_BOX'];const _0x2cae03=[_0x1f550c,_0xdf6c8c],_0x4ccefb=Object['assign'](Object['assign']({},_0x55550a['text']),{'textFontFamily':_0x1e93f9['fontFamily'],'textSize':getFontSizeInPx(_0x1e93f9['fontSize'])});this['drawLabel'](_0x2b65d0,_0x1d852d,_0x7709d6,_0x2cae03,_0x4ccefb);}}),_0x2b65d0['context']['restore']());}}