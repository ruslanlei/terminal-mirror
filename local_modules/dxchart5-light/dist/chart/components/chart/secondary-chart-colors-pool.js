/*
 * Copyright (C) 2002 - 2023 Devexperts LLC
 * This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
 * If a copy of the MPL was not distributed with this file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
import{cloneUnsafe as l}from"../../utils/object.utils";export class SecondaryChartColorsPool{constructor(o){this.config=o,this.secondaryChartColorsPool=this.createColorPool(this.config.colors.secondaryChartTheme),this.usedChartColors={}}isEmpty(){return Object.keys(this.secondaryChartColorsPool).length===Object.keys(this.usedChartColors).length}createColorPool(o){return o.reduce((e,s,r)=>(e[`color${r}`]=Object.assign(Object.assign({},l(this.config.colors)),{lineTheme:Object.assign({},s.lineTheme),areaTheme:Object.assign({},s.areaTheme)}),e),{})}takeColorFromPool(o){if(this.isEmpty()){console.error("limit of candle series");return}return this.usedChartColors=Object.assign(Object.assign({},this.usedChartColors),{[o]:Object.keys(this.secondaryChartColorsPool).filter(e=>!Object.values(this.usedChartColors).includes(e))[0]}),this.secondaryChartColorsPool[this.usedChartColors[o]]}addColorToPool(o){this.usedChartColors[o]&&delete this.usedChartColors[o]}updateColorConfig(o,e){var s,r;const t=this.secondaryChartColorsPool[this.usedChartColors[o]];if(t){const a=e;this.secondaryChartColorsPool[this.usedChartColors[o]]=Object.assign(Object.assign({},e),{lineTheme:Object.assign(t.lineTheme,(s=a.lineTheme)!==null&&s!==void 0?s:{}),areaTheme:Object.assign(t.areaTheme,(r=a.areaTheme)!==null&&r!==void 0?r:{})})}}}
