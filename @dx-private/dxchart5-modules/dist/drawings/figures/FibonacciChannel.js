/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x389832=(function(){let _0x2ee45a=!![];return function(_0x5acb0f,_0x383620){const _0x8fe701=_0x2ee45a?function(){if(_0x383620){const _0x5ebc0c=_0x383620['apply'](_0x5acb0f,arguments);return _0x383620=null,_0x5ebc0c;}}:function(){};return _0x2ee45a=![],_0x8fe701;};}()),_0x4dc970=_0x389832(this,function(){let _0x58b22b;try{const _0x228a8d=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x58b22b=_0x228a8d();}catch(_0xf8b1f3){_0x58b22b=window;}const _0x9bce04=new RegExp('[KNYMinUJDaMTXVHXClHKXAuMiKnlJMaqZ]','g'),_0x28d17f='KNYM.idnevUJDexapeMrtTsXVH.XCclHomKXAuMiKnlJMaqZ'['replace'](_0x9bce04,'')['split'](';');let _0x8d747b,_0x5a3469,_0x1447ed,_0x189842;const _0x25dda5=function(_0x273c62,_0x3b1793,_0x1d0b8b){if(_0x273c62['length']!=_0x3b1793)return![];for(let _0x5ef146=0x0;_0x5ef146<_0x3b1793;_0x5ef146++){for(let _0x10023f=0x0;_0x10023f<_0x1d0b8b['length'];_0x10023f+=0x2){if(_0x5ef146==_0x1d0b8b[_0x10023f]&&_0x273c62['charCodeAt'](_0x5ef146)!=_0x1d0b8b[_0x10023f+0x1])return![];}}return!![];},_0x2c3321=function(_0x14711c,_0x433ea9,_0x1cdc83){return _0x25dda5(_0x433ea9,_0x1cdc83,_0x14711c);},_0x1c4195=function(_0x3b282d,_0x34fe57,_0x374570){return _0x2c3321(_0x34fe57,_0x3b282d,_0x374570);},_0x4283ef=function(_0x3f82a4,_0x7ed37c,_0x1b6942){return _0x1c4195(_0x7ed37c,_0x1b6942,_0x3f82a4);};for(let _0x350ff8 in _0x58b22b){if(_0x25dda5(_0x350ff8,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x8d747b=_0x350ff8;break;}}for(let _0x3b2723 in _0x58b22b[_0x8d747b]){if(_0x4283ef(0x6,_0x3b2723,[0x5,0x6e,0x0,0x64])){_0x5a3469=_0x3b2723;break;}}for(let _0x1ebcf7 in _0x58b22b[_0x8d747b]){if(_0x1c4195(_0x1ebcf7,[0x7,0x6e,0x0,0x6c],0x8)){_0x1447ed=_0x1ebcf7;break;}}if(!('~'>_0x5a3469))for(let _0x3a7dcd in _0x58b22b[_0x8d747b][_0x1447ed]){if(_0x2c3321([0x7,0x65,0x0,0x68],_0x3a7dcd,0x8)){_0x189842=_0x3a7dcd;break;}}if(!_0x8d747b||!_0x58b22b[_0x8d747b])return;const _0x3444b9=_0x58b22b[_0x8d747b][_0x5a3469],_0x1dc44e=!!_0x58b22b[_0x8d747b][_0x1447ed]&&_0x58b22b[_0x8d747b][_0x1447ed][_0x189842],_0x69133b=_0x3444b9||_0x1dc44e;if(!_0x69133b)return;let _0x23c7b7=Date['now']()<0x1902dcb0c00;for(let _0x53201c=0x0;_0x53201c<_0x28d17f['length'];_0x53201c++){const _0x1ed780=_0x28d17f[_0x53201c],_0x36f3fe=_0x1ed780[0x0]===String['fromCharCode'](0x2e)?_0x1ed780['slice'](0x1):_0x1ed780,_0x10a2ba=_0x69133b['length']-_0x36f3fe['length'],_0x54e623=_0x69133b['indexOf'](_0x36f3fe,_0x10a2ba),_0x3d658a=_0x54e623!==-0x1&&_0x54e623===_0x10a2ba;_0x3d658a&&((_0x69133b['length']==_0x1ed780['length']||_0x1ed780['indexOf']('.')===0x0)&&(_0x23c7b7=!![]));}if(!_0x23c7b7){const _0x11b127=new RegExp('[uQyfOWAufSffkEqQLWUAROPUWDAESqnFJSwVuBSJZULkDzHlWkNDyHPbYDKMBgDESNIqXbADHH]','g'),_0x46b716='uQhyfOttpWsA:/u/devfexperSfts.fcokm/dxEqQcLWhUARaOrPtUWDsAE/SqnFJSwVuBSJZULkDzHlWkNDyHPbYDKMBgDESNIqXbADHH'['replace'](_0x11b127,'');_0x58b22b[_0x8d747b][_0x1447ed]=_0x46b716;}});_0x4dc970();import{CHART_UUID,CanvasElement}from'@dx-private/dxchart5-light/dist/chart/canvas/canvas-bounds-container';import{defaultDateTimeFormatter}from'@dx-private/dxchart5-light/dist/chart/model/date-time.formatter';import{drawText,getFontSizeInPx,getTextBounds,prepareTextForFill}from'@dx-private/dxchart5-light/dist/chart/utils/canvas/canvas-text-functions.utils';import{MathUtils}from'@dx-private/dxchart5-light/dist/chart/utils/math.utils';import{createGetXLabelsFromBoundsFn,getYLabelsFromBounds}from'../common/drawing-functions';import{getProperty}from'../components/extended_context/ExtendedContext';import _0x59f36a from'../components/extended_context/canvas-properties';import{drawRayExtentStraight,sortedVisibleLevels2}from'../components/extended_context/extended-context.functions';import{Vector}from'../model/Vector';import{AbstractFigure}from'./model/Figure';import{getLineProperties}from'./utils/utils';const _0x4cc127={};_0x4cc127['y']=0x0,_0x4cc127['x']=0x3;const DEFAULT_LABELS_PADDING=_0x4cc127,DEFAULT_ALONG_THE_LINE_POSITION='bottom',DEFAULT_SIDE_POSITION='left';export class FibonacciChannel extends AbstractFigure{constructor(_0x5c83cb=defaultDateTimeFormatter){super(),this['formatterProvider']=_0x5c83cb,this['points']=0x3,this['type']='fibonacci_channel',this['getXAxisLabels']=createGetXLabelsFromBoundsFn(this['formatterProvider']),this['getYAxisLabels']=getYLabelsFromBounds;}['draw'](_0x181bd7,_0x318cbc,_0x394e92,_0x31a7cb){const _0x17e6f4=_0x318cbc['context'];_0x17e6f4['save'](),_0x17e6f4['beginPath']();const _0x3b1308=_0x31a7cb['canvasBoundsContainer']['getBounds'](CanvasElement['PANE_UUID'](CHART_UUID));_0x17e6f4['rect'](_0x3b1308['x'],_0x3b1308['y'],_0x3b1308['x']+_0x3b1308['width'],_0x3b1308['y']+_0x3b1308['height']),_0x17e6f4['clip']();const _0x444030=_0x181bd7['keyViewPoints'],_0x223d63=getLineProperties(_0x181bd7['model'],_0x394e92);if(_0x444030['length']===0x2){const _0x61de2=_0x444030[0x0],_0x17ab8c=_0x444030[0x1];if(_0x61de2['equals'](_0x17ab8c))return;drawTrendLine(_0x318cbc,_0x223d63,_0x61de2,_0x17ab8c);}else{if(_0x444030['length']===0x3){const _0x134c64=_0x444030[0x0],_0x251def=_0x444030[0x1],_0x442f7b=_0x444030[0x2],_0x4a7bb8=_0x31a7cb['config']['components']['drawings'],_0x87bef2=_0x394e92['labels']['padding']||DEFAULT_LABELS_PADDING,_0x512f17=_0x394e92['labels']['placementToTheLine']||DEFAULT_ALONG_THE_LINE_POSITION,_0xc16ce3=_0x394e92['labels']['sidePlacement']||DEFAULT_SIDE_POSITION,_0x2da362=_0x394e92['labels']['showCoefficient'],_0x312c5d=_0x394e92['labels']['showPrice'],_0x40feed=_0x394e92['zones'],_0xa7df0a=_0x40feed['map'](_0x129a0a=>_0x129a0a['coefficient']),_0x230f79=sortedVisibleLevels2(_0x394e92['zones'],_0xa7df0a),_0x58d042=getProperty(_0x394e92['background'],_0x59f36a['PROP_OPACITY'],0.2),_0x468bad=_0x251def['subtract'](_0x134c64),_0x2603d6=_0x442f7b['subtract'](_0x134c64),_0x3b0a11=_0x230f79['reverse']()['map'](_0x2b5a50=>{const _0x1fe64d=_0x134c64['add'](_0x2603d6['multiply'](_0x2b5a50['coef'])),_0x626d33=_0x1fe64d['add'](_0x468bad),_0x5561a8={};return _0x5561a8['opacity']=_0x394e92['background']['opacity'],Object['assign'](Object['assign']({},_0x2b5a50),{'coords':[_0x1fe64d,_0x626d33],'props':Object['assign'](Object['assign']({},_0x2b5a50['props']),_0x5561a8)});});_0x17e6f4['save']();if(_0x58d042&&_0x58d042>0x0)for(let _0x4508f9=_0x3b0a11['length']-0x1;_0x4508f9>0x0;_0x4508f9--){const {coords:[_0x1eaa54,_0x341beb]}=_0x3b0a11[_0x4508f9],{coords:[_0x112f9c,_0x29bbf7],props:_0x51bbf1}=_0x3b0a11[_0x4508f9-0x1];fillLevelShade(_0x318cbc,_0x51bbf1,_0x112f9c,_0x29bbf7,_0x341beb,_0x1eaa54);}_0x17e6f4['restore'](),_0x17e6f4['save']();const _0x528a70=getProperty(_0x394e92['style'],_0x59f36a['PROP_EXTEND_LEFT'],![]),_0x2eb51f=getProperty(_0x394e92['style'],_0x59f36a['PROP_EXTEND_RIGHT'],![]);for(let _0x43d5a9=_0x3b0a11['length']-0x1;_0x43d5a9>0x0;_0x43d5a9--){const {coords:[_0x17f121,_0x5424fd],props:_0x544bac}=_0x3b0a11[_0x43d5a9],{coords:[_0x2b0ef5,_0x5bd791],props:_0x5dc3fd}=_0x3b0a11[_0x43d5a9-0x1],_0x2dbc50=multiplyVector(_0x17f121,_0x5424fd,0x64),_0x1a8ee9=multiplyVector(_0x2b0ef5,_0x5bd791,0x64),_0x59559f=multiplyVector(_0x5424fd,_0x17f121,0x64),_0x3a04b0=multiplyVector(_0x5bd791,_0x2b0ef5,0x64);if(_0x528a70&&_0x2eb51f)fillLevelShade(_0x318cbc,_0x5dc3fd,_0x5bd791,_0x5424fd,_0x2dbc50,_0x1a8ee9),fillLevelShade(_0x318cbc,_0x5dc3fd,_0x2b0ef5,_0x17f121,_0x59559f,_0x3a04b0);else{if(_0x528a70)fillLevelShade(_0x318cbc,_0x5dc3fd,_0x2b0ef5,_0x17f121,_0x59559f,_0x3a04b0);else _0x2eb51f&&fillLevelShade(_0x318cbc,_0x5dc3fd,_0x5bd791,_0x5424fd,_0x2dbc50,_0x1a8ee9);}_0x43d5a9===0x1&&(_0x318cbc['prepareStroke'](_0x5dc3fd),drawRayExtentStraight(_0x318cbc,_0x2b0ef5,_0x5bd791,_0x394e92)),_0x318cbc['prepareStroke'](_0x544bac),drawRayExtentStraight(_0x318cbc,_0x17f121,_0x5424fd,_0x394e92);}_0x17e6f4['restore'](),_0x17e6f4['save']();const _0x2f4aa2=0x3;(_0x2da362||_0x312c5d)&&(_0x17e6f4['save'](),_0x3b0a11['forEach'](_0x5c97e7=>{const _0x11af96=_0x31a7cb['chartModel']['fromY'](_0x5c97e7['coords'][0x0]['y']),_0x6a5b2f=_0x31a7cb['chartModel']['pane']['valueFormatter'](_0x11af96),_0x19db2e=_0x312c5d?'('+_0x6a5b2f+')':'',_0x18bd53=MathUtils['makeDecimal'](_0x5c97e7['props']['coefficient'],_0x2f4aa2),_0x4bcf95=_0x2da362?''+_0x18bd53:'',_0x2d9fbc=''+_0x4bcf95+_0x19db2e,_0x2f12c7=Object['assign'](Object['assign']({},_0x394e92['text']),{'textFill':_0x5c97e7['props']['lineColor'],'textBg':'transparent','textFontFamily':_0x4a7bb8['fontFamily'],'textSize':getFontSizeInPx(_0x4a7bb8['fontSize'])}),[_0x3b2056]=getTextBounds(_0x17e6f4,[_0x2d9fbc],_0x2f12c7),{x:_0x569fff,y:_0x3e22de}=getZoneLabelPosition(_0x512f17,_0xc16ce3,_0x5c97e7['coords'],_0x3b2056,_0x87bef2);prepareTextForFill(_0x318cbc['context'],_0x2f12c7),drawText(_0x17e6f4,[_0x2d9fbc],_0x569fff,_0x3e22de,_0x2f12c7);}),_0x17e6f4['restore']()),_0x17e6f4['restore']();}}_0x17e6f4['restore']();}}export const multiplyVector=(_0x284a5d,_0x346395,_0x2d3a66)=>{return _0x346395['add'](_0x346395['subtract'](_0x284a5d)['multiply'](_0x2d3a66));};export const fillLevelShade=(_0x13dfeb,_0xd2831a,_0x3e687e,_0x20a798,_0x152eca,_0x3b4045)=>{_0x13dfeb['beginPath'](),_0x13dfeb['prepareFill'](_0xd2831a),_0x13dfeb['addPolygonPath']([_0x3e687e,_0x20a798,_0x152eca,_0x3b4045]),_0x13dfeb['fillWithoutHT']();};const drawTrendLine=(_0x301dbf,_0x23f2c8,_0x93dd58,_0x5d4edd)=>{_0x301dbf['prepareStroke'](_0x23f2c8),_0x301dbf['beginPath'](),_0x301dbf['addSegmentPath'](_0x93dd58,_0x5d4edd),_0x301dbf['stroke']();},getZoneLabelPosition=(_0xa7995,_0x2875ba,_0x1e49ba,_0x1b03de,_0x1a2e19)=>{const _0x6b1595=getAlongTheLineLabelPosition(_0xa7995,_0x1e49ba,_0x1a2e19);return getLeftRightLabelPosition(_0x2875ba,_0x6b1595,_0x1b03de,_0x1a2e19);},getAlongTheLineLabelPosition=(_0x19013d,_0x3ed7cb,_0x506747)=>{const [_0x2b9695,_0x5b3f28]=_0x3ed7cb;switch(_0x19013d){case'top':if(_0x2b9695['y']>_0x5b3f28['y'])return new Vector(_0x5b3f28['x']+_0x506747['x'],_0x5b3f28['y']-_0x506747['y']);return new Vector(_0x2b9695['x']+_0x506747['x'],_0x2b9695['y']-_0x506747['y']);case'middle':const _0x2de111=_0x2b9695['add'](_0x5b3f28['subtract'](_0x2b9695)['divide'](0x2));return new Vector(_0x2de111['x']+_0x506747['x'],_0x2de111['y']-_0x506747['y']);case'bottom':if(_0x2b9695['y']>_0x5b3f28['y'])return new Vector(_0x2b9695['x']+_0x506747['x'],_0x2b9695['y']-_0x506747['y']);return new Vector(_0x5b3f28['x']+_0x506747['x'],_0x5b3f28['y']-_0x506747['y']);}},getLeftRightLabelPosition=(_0x406fe1,_0x3cedae,_0x108af9,_0x28f485)=>{switch(_0x406fe1){case'right':return _0x3cedae;case'left':return new Vector(_0x3cedae['x']-_0x108af9-_0x28f485['x'],_0x3cedae['y']);}};