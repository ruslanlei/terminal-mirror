{"version":3,"file":"FieldError.vue3.js","sources":["../../../../../components/fieldError/FieldError.vue"],"sourcesContent":["<template>\n  <div\n    ref=\"wrapper\"\n    :style=\"computedStyles\"\n    :class=\"[\n      $style[size],\n      $style.fieldError,\n      !isVisible && $style.hidden,\n    ]\"\n  >\n    <div\n      ref=\"container\"\n      :class=\"$style.fieldErrorContainer\"\n      :style=\"computedInnerStyles\"\n    >\n      <Icon\n        v-if=\"showIcon\"\n        :class=\"$style.icon\"\n        icon=\"info\"\n        :size=\"computedIconSize\"\n      />\n      <span :class=\"$style.text\">\n        <slot>\n          {{ text }}\n        </slot>\n      </span>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  ref,\n  computed,\n  onBeforeUnmount,\n  onMounted, watch,\n} from 'vue';\nimport { FieldErrorProps } from './index';\nimport { useEnvironmentObserver } from '@/hooks/useEnvironmentObserver';\nimport Icon from '@/components/icon/Icon.vue';\n\nconst props = withDefaults(\n  defineProps<FieldErrorProps>(),\n  {\n    showIcon: true,\n    size: 'lg',\n    offset: 0,\n  },\n);\n\nconst container = ref<HTMLElement>();\nconst wrapper = ref<HTMLElement>();\n\nconst isVisible = computed(() => !!props.text);\n\nconst computedStyles = ref({\n  height: '0px',\n});\nconst calculateHeight = () => {\n  if (isVisible.value) {\n    if (!container.value) return;\n\n    const containerRect = container.value.getBoundingClientRect();\n    computedStyles.value.height = `${containerRect.height}px`;\n  } else {\n    computedStyles.value.height = '0px';\n  }\n};\n\nconst computedInnerStyles = computed(() => ({\n  paddingTop: `${props.offset}px`,\n}));\n\nconst computedIconSize = computed(() => ({\n  sm: 12,\n  lg: 18,\n}[props.size]));\n\nconst {\n  setListeners,\n  removeListeners,\n} = useEnvironmentObserver(wrapper, calculateHeight);\nwatch(isVisible, calculateHeight);\n\nonMounted(() => {\n  calculateHeight();\n  setListeners();\n});\nonBeforeUnmount(removeListeners);\n</script>\n\n<style lang=\"scss\" module>\n@import \"src/assets/styles/utils\";\n\n.fieldError {\n  position: relative;\n  overflow: hidden;\n  transition: height 160ms, opacity 160ms;\n  font-size: inherit;\n  color: inherit;\n  &.hidden {\n    opacity: 0;\n  }\n}\n\n.fieldErrorContainer {\n  display: flex;\n  //align-items: center;\n  width: 100%;\n  position: absolute;\n  bottom: 0;\n  color: inherit;\n}\n\n.icon {\n  width: 12px;\n  min-width: 12px;\n  & + .text {\n    margin-left: 8px;\n  }\n}\n\n.text {\n  color: inherit;\n}\n\n// states\n.sm {\n  @include title7;\n  font-weight: 600;\n}\n\n.lg {\n  @include text;\n  font-weight: 500;\n}\n</style>\n"],"names":["container","ref","wrapper","isVisible","computed","props","computedStyles","calculateHeight","containerRect","computedInnerStyles","computedIconSize","setListeners","removeListeners","useEnvironmentObserver","watch","onMounted","onBeforeUnmount"],"mappings":";;;;;;;;;;;;iBAkDMA,IAAYC,KACZC,IAAUD,KAEVE,IAAYC,EAAS,MAAM,CAAC,CAACC,EAAM,IAAI,GAEvCC,IAAiBL,EAAI;AAAA,MACzB,QAAQ;AAAA,IAAA,CACT,GACKM,IAAkB,MAAM;AAC5B,UAAIJ,EAAU,OAAO;AACnB,YAAI,CAACH,EAAU;AAAO;AAEhB,cAAAQ,IAAgBR,EAAU,MAAM,sBAAsB;AAC7C,QAAAM,EAAA,MAAM,SAAS,GAAGE,EAAc;AAAA;AAE/C,QAAAF,EAAe,MAAM,SAAS;AAAA,IAChC,GAGIG,IAAsBL,EAAS,OAAO;AAAA,MAC1C,YAAY,GAAGC,EAAM;AAAA,IACrB,EAAA,GAEIK,IAAmBN,EAAS,OAAO;AAAA,MACvC,IAAI;AAAA,MACJ,IAAI;AAAA,IAAA,GACJC,EAAM,IAAI,CAAE,GAER;AAAA,MACJ,cAAAM;AAAA,MACA,iBAAAC;AAAA,IAAA,IACEC,EAAuBX,GAASK,CAAe;AACnD,WAAAO,EAAMX,GAAWI,CAAe,GAEhCQ,EAAU,MAAM;AACE,MAAAR,KACHI;IAAA,CACd,GACDK,EAAgBJ,CAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}