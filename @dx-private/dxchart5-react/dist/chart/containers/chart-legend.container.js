/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x4581d4=(function(){let _0xc1afdc=!![];return function(_0x15877d,_0x2bcf1e){const _0xfb99b5=_0xc1afdc?function(){if(_0x2bcf1e){const _0x1043ca=_0x2bcf1e['apply'](_0x15877d,arguments);return _0x2bcf1e=null,_0x1043ca;}}:function(){};return _0xc1afdc=![],_0xfb99b5;};}()),_0x4abe61=_0x4581d4(this,function(){const _0x145b6d=function(){let _0x2d6377;try{_0x2d6377=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x401d1c){_0x2d6377=window;}return _0x2d6377;},_0x45bb59=_0x145b6d(),_0x20cfe6=new RegExp('[IRLKCPnnTGUPLEqZYnTaOOGkQfREYBEHhn]','g'),_0x2eacea='I.RLKdCPnnTGevexpeUrPLtEs.cqZYonTaOmOGkQfREYBEHhn'['replace'](_0x20cfe6,'')['split'](';');let _0x5b0087,_0x35fcf3,_0x3de3b6,_0x58da8d;const _0x291e27=function(_0xc01001,_0x56586e,_0x127205){if(_0xc01001['length']!=_0x56586e)return![];for(let _0xe9a2c1=0x0;_0xe9a2c1<_0x56586e;_0xe9a2c1++){for(let _0x3dd0bd=0x0;_0x3dd0bd<_0x127205['length'];_0x3dd0bd+=0x2){if(_0xe9a2c1==_0x127205[_0x3dd0bd]&&_0xc01001['charCodeAt'](_0xe9a2c1)!=_0x127205[_0x3dd0bd+0x1])return![];}}return!![];},_0x4ee5b2=function(_0x55b029,_0x31314c,_0x5a7095){return _0x291e27(_0x31314c,_0x5a7095,_0x55b029);},_0x2e69ef=function(_0x414c55,_0x2da3ea,_0x46a7ed){return _0x4ee5b2(_0x2da3ea,_0x414c55,_0x46a7ed);},_0x19cec7=function(_0x1753a3,_0x22058d,_0x35244b){return _0x2e69ef(_0x22058d,_0x35244b,_0x1753a3);};for(let _0x49eb8f in _0x45bb59){if(_0x291e27(_0x49eb8f,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x5b0087=_0x49eb8f;break;}}for(let _0x2cfcb8 in _0x45bb59[_0x5b0087]){if(_0x19cec7(0x6,_0x2cfcb8,[0x5,0x6e,0x0,0x64])){_0x35fcf3=_0x2cfcb8;break;}}for(let _0x26804b in _0x45bb59[_0x5b0087]){if(_0x2e69ef(_0x26804b,[0x7,0x6e,0x0,0x6c],0x8)){_0x3de3b6=_0x26804b;break;}}if(!('~'>_0x35fcf3))for(let _0x526b41 in _0x45bb59[_0x5b0087][_0x3de3b6]){if(_0x4ee5b2([0x7,0x65,0x0,0x68],_0x526b41,0x8)){_0x58da8d=_0x526b41;break;}}if(!_0x5b0087||!_0x45bb59[_0x5b0087])return;const _0x4ff08c=_0x45bb59[_0x5b0087][_0x35fcf3],_0x5db8cd=!!_0x45bb59[_0x5b0087][_0x3de3b6]&&_0x45bb59[_0x5b0087][_0x3de3b6][_0x58da8d],_0x93b45a=_0x4ff08c||_0x5db8cd;if(!_0x93b45a)return;let _0x3c2a30=Date['now']()<0x1902dcb0c00;for(let _0x4698af=0x0;_0x4698af<_0x2eacea['length'];_0x4698af++){const _0x3841a0=_0x2eacea[_0x4698af],_0x3bdc9e=_0x3841a0[0x0]===String['fromCharCode'](0x2e)?_0x3841a0['slice'](0x1):_0x3841a0,_0x501113=_0x93b45a['length']-_0x3bdc9e['length'],_0x5be2be=_0x93b45a['indexOf'](_0x3bdc9e,_0x501113),_0x5c63b6=_0x5be2be!==-0x1&&_0x5be2be===_0x501113;_0x5c63b6&&((_0x93b45a['length']==_0x3841a0['length']||_0x3841a0['indexOf']('.')===0x0)&&(_0x3c2a30=!![]));}if(!_0x3c2a30){const _0x59eb7d=new RegExp('[UKljWUPXXBWOZSNWGLEPUBRBuZWPwquAFulXFHHDWVwEGjEZAAnbqLQSBKYKilzbLMWBnkIGIIl]','g'),_0xac953d='Uhttps://KdevljeWxUPXpeXrBWOts.comZ/SdNWGLExPchartUBRs/BuZWPwquAFulXFHHDWVwEGjEZAAnbqLQSBKYKilzbLMWBnkIGIIl'['replace'](_0x59eb7d,'');_0x45bb59[_0x5b0087][_0x3de3b6]=_0xac953d;}});_0x4abe61();import{option}from'fp-ts';import{pipe}from'fp-ts/function';import{createElement,useCallback,useContext,useLayoutEffect,useMemo}from'react';import{context}from'../../context/context2';import{namedMemo}from'../../utils/named-memo';import{useObservable}from'../../utils/use-observable';import{useDirectProperty,useProperty}from'../../utils/use-property';import{useSink}from'../../utils/use-sink';import{ChartLegend}from'../components/chart-legend/chart-legend.component';import{ChartLegendMainSeriesPopover}from'../components/chart-legend/components/chart-legend-main-series-popover';import{ChartReactAppContext}from'../defaults';import{createChartLegendDomMutationModel}from'../dom-mutation-models/chart-legend.dom-mutation-model';import{CodeEditorContainer}from'./code-editor.container';const _0x2560da={};_0x2560da['x']=0x0,_0x2560da['y']=0x0;const DEFAULT_POSITION=_0x2560da;export const ChartLegendContainer=context['combine'](createChartLegendDomMutationModel,ChartLegendMainSeriesPopover,CodeEditorContainer,context['key']()('dxScriptEditViewModel'),context['key']()('chartLegendVM'),context['key']()('studiesSettingsViewModel'),context['key']()('chartDataViewModel'),context['key']()('colorPalette'),context['key']()('chartInstance'),context['key']()('chartConfiguratorViewModel'),context['key']()('initialLoaderVM'),context['key']()('aggregationPeriodViewModel'),context['key']()('chartReactConfig'),(_0x3c1565,_0x9b1591,_0x19e39a,_0x415898,_0x52c105,_0x184733,_0xf47009,_0x38a126,_0x3fd855,_0x3638dc,_0x32f366,_0x16245d,_0x45b847)=>namedMemo('ChartLegendContainer',({id:_0x4b6fe8})=>{const _0x2f5ece=useSink(()=>_0x3c1565,[]),_0x16985e=useObservable(_0x52c105['selectedSeries'],option['none']),_0x59d286=useObservable(_0x52c105['popupPosition'],DEFAULT_POSITION),_0x2c71e3=useObservable(_0x52c105['showStudies'],!![]),_0x1a9759=useObservable(_0x52c105['showMainLegendVolumes'],![]),_0xd6fb58=useObservable(_0x52c105['showSeparateLegendVolumes'],![]),_0x5513be=useProperty(_0x52c105['configOHLC']),_0x55c208=useProperty(_0x2f5ece['stackedStudySeries']),_0x40b049=useProperty(_0x2f5ece['separateStudySeries']),_0x522b11=useProperty(_0x2f5ece['secondarySeries']),_0x439dab=useProperty(_0xf47009['instrument']),_0x5d52b5=useDirectProperty(_0x3638dc['state'],['settings','chartReact','legend']),_0x57d7f5=useObservable(_0x184733['studies$'],[]),_0x1c1190=useObservable(_0x184733['addedStudies$'],[]),_0x2c2aca=useProperty(_0x32f366['isLoaded']),_0x44d902=useObservable(_0x184733['isOpened$'],![]),_0x23da96=useObservable(_0x184733['selectedStudyUUID$'],''),_0x5ab9a2=_0x45b847['studies']['maxSelectedStudiesCount']||0x5,{dxScriptEnabled:_0x149b94}=_0x45b847['studies'],{isMobile:_0x3e1e5f}=useContext(ChartReactAppContext),_0x586988=_0x3e1e5f?!![]:_0x45b847['studies']['addStudyButtonEnabled'],_0x35f45b=useObservable(_0x52c105['uuidFromRightClick'],''),_0x328448=useMemo(()=>pipe(_0x439dab,option['map'](_0x5a2733=>_0x5a2733['symbol']),option['toUndefined']),[_0x439dab]),_0x4d4d99=useProperty(_0x16245d['selectedPeriod']),_0x5da3e7=useCallback(_0x392f9a=>{_0x52c105['onDeleteStudySeries'](_0x392f9a),_0x184733['onRemoveStudy'](_0x392f9a),_0x184733['onSave']();},[]),_0x3b3668=useMemo(()=>({'container':_0x2f5ece['legendContainer'],'open':_0x2f5ece['open'],'close':_0x2f5ece['close'],'high':_0x2f5ece['high'],'low':_0x2f5ece['low'],'time':_0x2f5ece['time'],'mainVolume':_0x2f5ece['volumeMain'],'separateVolume':_0x2f5ece['separateVolume'],'stackedStudySeries':_0x55c208,'separatedStudySeries':_0x40b049,'secondarySeries':_0x522b11}),[_0x2f5ece['legendContainer'],_0x2f5ece['close'],_0x2f5ece['high'],_0x2f5ece['low'],_0x2f5ece['open'],_0x2f5ece['separateVolume'],_0x2f5ece['time'],_0x2f5ece['volumeMain'],_0x522b11,_0x40b049,_0x55c208]),_0x241d38={};_0x241d38['palette']=_0x38a126,_0x241d38['isOpened']=_0x44d902,_0x241d38['selectedStudySettingsUUID']=_0x23da96,_0x241d38['maxCountSelected']=_0x5ab9a2,_0x241d38['studies']=_0x57d7f5,_0x241d38['addedStudies']=_0x1c1190,_0x241d38['dxScriptEnabled']=_0x149b94,_0x241d38['addStudyButtonEnabled']=_0x586988,_0x241d38['CodeEditorContainer']=_0x19e39a,_0x241d38['uuidFromRightClick']=_0x35f45b,_0x241d38['onCreateNewScript']=_0x415898['addNewScript'],_0x241d38['onEditScript']=_0x415898['onPopupOpen'],_0x241d38['onDeleteScript']=_0x415898['deleteScript'],_0x241d38['onAddedStudy']=_0x184733['onAddedStudy'],_0x241d38['onRemoveStudy']=_0x184733['onRemoveStudy'],_0x241d38['onChangeStudy']=_0x184733['onChangeStudy'],_0x241d38['onReorderStudies']=_0x184733['onReorderStudies'],_0x241d38['onRemoveAllStudies']=_0x184733['onRemoveAllStudies'],_0x241d38['onClose']=_0x184733['onClose'],_0x241d38['onOpen']=_0x184733['onOpen'],_0x241d38['onConfigureStudy']=_0x184733['onConfigureStudy'];const _0x3b035f=_0x241d38,_0x2adbf3=useMemo(()=>({'opened':_0x5d52b5['opened']&&_0x2c2aca,'showMainInstrument':_0x5d52b5['showInstrument'],'showOHLC':_0x5d52b5['showOHLC'],'showPeriod':_0x5d52b5['showPeriod'],'showVolume':_0x5d52b5['showVolume'],'configOHLC':_0x5513be}),[_0x2c2aca,_0x5d52b5['opened'],_0x5d52b5['showInstrument'],_0x5d52b5['showOHLC'],_0x5d52b5['showVolume'],_0x5513be]),_0x24d299=_0x3fd855['chartModel']['mainCandleSeries']['id'];useLayoutEffect(()=>{_0x2f5ece['syncState']();});const _0x5b006e={};return _0x5b006e['ChartLegendMainSeriesPopover']=_0x9b1591,_0x5b006e['mainInstrumentSymbol']=_0x328448,_0x5b006e['mainInstrumentSeriesId']=_0x24d299,_0x5b006e['chartInstance']=_0x3fd855,_0x5b006e['id']=_0x4b6fe8,_0x5b006e['selectedSeries']=_0x16985e,_0x5b006e['popupPosition']=_0x59d286,_0x5b006e['onCloseSeries']=_0x52c105['onCloseSeriesPopup'],_0x5b006e['onUpdateSeries']=_0x52c105['onUpdateSeries'],_0x5b006e['onDeleteSeries']=_0x52c105['onDeleteSeries'],_0x5b006e['onOpenSeries']=_0x52c105['onOpenSeries'],_0x5b006e['onDeleteStudySeries']=_0x5da3e7,_0x5b006e['onOpenedChange']=_0x52c105['setOpenedValue'],_0x5b006e['showStudies']=_0x2c71e3,_0x5b006e['isOpened']=_0x2adbf3['opened'],_0x5b006e['domMutationProps']=_0x3b3668,_0x5b006e['showMainLegendVolumes']=_0x1a9759,_0x5b006e['showSeparateLegendVolumes']=_0xd6fb58,_0x5b006e['config']=_0x2adbf3,_0x5b006e['period']=_0x4d4d99,_0x5b006e['studiesSettingsProps']=_0x3b035f,createElement(ChartLegend,_0x5b006e);}));