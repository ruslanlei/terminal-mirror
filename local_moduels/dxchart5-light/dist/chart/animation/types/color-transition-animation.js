/*
 * Copyright (C) 2002 - 2023 Devexperts LLC
 * This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
 * If a copy of the MPL was not distributed with this file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
import{Animation as l}from"./animation";import*as e from"color";export class ColorTransitionAnimation extends l{constructor(r,t,o=()=>{}){super(r,o),this.colorConfigs=t,t.forEach(i=>{i.rgbStartColor=e.rgb(i.startColor),i.rgbEndColor=e.rgb(i.endColor),i.currentAnimationColor=i.type==="appearing"?i.rgbStartColor:i.rgbEndColor})}tick(){super.tick(),this.animationInProgress&&this.colorConfigs.forEach(r=>{const t=1-this.animationTimeLeft/this.animationTime;!r.rgbStartColor||!r.rgbEndColor||(r.type==="fading"?r.currentAnimationColor=this.calculateTransitionColor(r.rgbEndColor,r.rgbStartColor,t):r.type==="appearing"&&(r.currentAnimationColor=this.calculateTransitionColor(r.rgbStartColor,r.rgbEndColor,t)))})}getColor(r){var t,o;return(o=(t=this.colorConfigs[r].currentAnimationColor)===null||t===void 0?void 0:t.toString())!==null&&o!==void 0?o:"#FFFFFF"}revert(){this.animationTimeLeft=Math.max(this.animationTime-this.animationTimeLeft,1),this.colorConfigs.forEach(r=>{r.type==="fading"?r.type="appearing":r.type="fading"})}moveToLastTick(){this.animationTimeLeft=1}calculateTransitionColor(r,t,o){const i=r.red()-(r.red()-t.red())*o,a=r.green()-(r.green()-t.green())*o,n=r.blue()-(r.blue()-t.blue())*o;return e.rgb(i,a,n)}}
