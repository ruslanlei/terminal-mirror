/*
 * Copyright (C) 2002 - 2023 Devexperts LLC
 * This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
 * If a copy of the MPL was not distributed with this file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
import{isFunction2 as p}from"./utils";export const defaultDateTimeFormatter=()=>t=>t.toString(),dateTimeFormatterFactory=(t,n)=>{var u;const i="date.get"+(n((u=t.timezone)!==null&&u!==void 0?u:"")?"":"UTC"),r={YYYY:e("FullYear"),YY:e("FullYear")+" % 100",MMM:s("shortMonths","Month"),MMMM:c(s("shortMonths","Month")),M:"1+"+e("Month"),d:e("Date"),H:e("Hours"),m:e("Minutes"),s:e("Seconds"),sss:e("Milliseconds"),EEE:s("shortDays","Day"),SSS:"this.addTwoZeros("+e("Milliseconds")+")",T:"date.getTime()"};["s","m","H","d","M"].forEach(function(o){r[o+o]="this.addZero("+r[o]+")"});const h=new RegExp(Object.keys(r).sort().reverse().join("|"),"g");function e(o){return i+o+"()"}function s(o,l){return"this."+o+"["+e(l)+"]"}function c(o){return o+".toUpperCase()"}function d(o){return"' + ("+r[o]+") + '"}return function(o){var l;const f={shortDays:m(t),shortMonths:M(t),addZero(a){return a<10?"0"+a:a},addTwoZeros(a){return(a<100?"0":"")+(a<10?"0":"")+a},tzDate:n((l=t.timezone)!==null&&l!==void 0?l:"")||function(a){return a instanceof Date?a:new Date(+a)}};return new Function("date","date=this.tzDate(date); return '"+o.replace(h,d)+"'").bind(f)}};export function makeFixedTimezoneConverter(t){const n=t("T");return function(u){return new Date(+n(u))}}function m(t){var n;return(n=t.shortDays)!==null&&n!==void 0?n:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}function M(t){var n;return(n=t.shortMonths)!==null&&n!==void 0?n:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}export const recalculateXFormatter=(t,n,u)=>{if(t){if(typeof t=="string")return u(t);if(Array.isArray(t)){const i=t.filter(r=>{if(r.showWhen){const h=[];return r.showWhen.periodLessThen&&h.push(()=>{var e,s;return n<((s=(e=r.showWhen)===null||e===void 0?void 0:e.periodLessThen)!==null&&s!==void 0?s:0)}),r.showWhen.periodMoreThen&&h.push(()=>{var e,s;return n>=((s=(e=r.showWhen)===null||e===void 0?void 0:e.periodMoreThen)!==null&&s!==void 0?s:0)}),h.every(e=>e())}else return!0});if(i.length>0){const r=i[0];if(r.format)return u(r.format);if(r.customFormatter)return r.customFormatter}}}return defaultDateTimeFormatter()};export function createTimeFormatter(t,n,u){const i=n[t.type];let r;if(p(i))r=i;else if(typeof i=="string")r=u(i);else throw new Error(`Format missing in xAxis.labels.formats for '${t.type}' type label`);return r}
