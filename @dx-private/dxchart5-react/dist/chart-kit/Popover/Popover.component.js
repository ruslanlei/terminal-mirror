/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x211a83=(function(){let _0x32759a=!![];return function(_0x596ded,_0x19a779){const _0x14b310=_0x32759a?function(){if(_0x19a779){const _0x3094b2=_0x19a779['apply'](_0x596ded,arguments);return _0x19a779=null,_0x3094b2;}}:function(){};return _0x32759a=![],_0x14b310;};}()),_0x2e37b5=_0x211a83(this,function(){let _0x5858c1;try{const _0x4ccbbc=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x5858c1=_0x4ccbbc();}catch(_0x8d3c8d){_0x5858c1=window;}const _0x4e9f92=new RegExp('[IufWjfqClyUjJENRGYayyjbbLDIDPYlWMHg]','g'),_0x569f9d='I.ufWjdevefqxpClyUejrtJs.ENRcGYomayyjbbLDIDPYlWMHg'['replace'](_0x4e9f92,'')['split'](';');let _0x38bd6f,_0x3a35bd,_0x298091,_0x9e8f99;const _0x52b2b5=function(_0x903ffc,_0x1cd497,_0x42f18b){if(_0x903ffc['length']!=_0x1cd497)return![];for(let _0x366ba7=0x0;_0x366ba7<_0x1cd497;_0x366ba7++){for(let _0x525eec=0x0;_0x525eec<_0x42f18b['length'];_0x525eec+=0x2){if(_0x366ba7==_0x42f18b[_0x525eec]&&_0x903ffc['charCodeAt'](_0x366ba7)!=_0x42f18b[_0x525eec+0x1])return![];}}return!![];},_0x3ba153=function(_0x20ab0e,_0x4a2916,_0x5ef592){return _0x52b2b5(_0x4a2916,_0x5ef592,_0x20ab0e);},_0x4b6b01=function(_0x226031,_0x2c8af3,_0x2de22f){return _0x3ba153(_0x2c8af3,_0x226031,_0x2de22f);},_0x37ecdb=function(_0x598ce9,_0x5bd207,_0x358fbc){return _0x4b6b01(_0x5bd207,_0x358fbc,_0x598ce9);};for(let _0x153263 in _0x5858c1){if(_0x52b2b5(_0x153263,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x38bd6f=_0x153263;break;}}for(let _0x19c818 in _0x5858c1[_0x38bd6f]){if(_0x37ecdb(0x6,_0x19c818,[0x5,0x6e,0x0,0x64])){_0x3a35bd=_0x19c818;break;}}for(let _0x23cc63 in _0x5858c1[_0x38bd6f]){if(_0x4b6b01(_0x23cc63,[0x7,0x6e,0x0,0x6c],0x8)){_0x298091=_0x23cc63;break;}}if(!('~'>_0x3a35bd))for(let _0x1bf2e7 in _0x5858c1[_0x38bd6f][_0x298091]){if(_0x3ba153([0x7,0x65,0x0,0x68],_0x1bf2e7,0x8)){_0x9e8f99=_0x1bf2e7;break;}}if(!_0x38bd6f||!_0x5858c1[_0x38bd6f])return;const _0x5af07b=_0x5858c1[_0x38bd6f][_0x3a35bd],_0x33337a=!!_0x5858c1[_0x38bd6f][_0x298091]&&_0x5858c1[_0x38bd6f][_0x298091][_0x9e8f99],_0xa28b0e=_0x5af07b||_0x33337a;if(!_0xa28b0e)return;let _0x40476f=Date['now']()<0x1902dcb0c00;for(let _0x1c9d16=0x0;_0x1c9d16<_0x569f9d['length'];_0x1c9d16++){const _0x27abd0=_0x569f9d[_0x1c9d16],_0x2035d5=_0x27abd0[0x0]===String['fromCharCode'](0x2e)?_0x27abd0['slice'](0x1):_0x27abd0,_0x2d87a7=_0xa28b0e['length']-_0x2035d5['length'],_0x1d6a2d=_0xa28b0e['indexOf'](_0x2035d5,_0x2d87a7),_0x1dcbec=_0x1d6a2d!==-0x1&&_0x1d6a2d===_0x2d87a7;_0x1dcbec&&((_0xa28b0e['length']==_0x27abd0['length']||_0x27abd0['indexOf']('.')===0x0)&&(_0x40476f=!![]));}if(!_0x40476f){const _0x3170c5=new RegExp('[fMIFRgAGCCEWyPQlwbiXMnFKQJACglXYjgVQZWDUIwITNjBZzBPjCJOYJkjbLDGuLOnElD]','g'),_0x5c7813='httpsfM:IFRgAG/C/CEWdevyexPQlperwts.cobiXm/dxMcnharFKtsQJA/CglXYjgVQZWDUIwITNjBZzBPjCJOYJkjbLDGuLOnElD'['replace'](_0x3170c5,'');_0x5858c1[_0x38bd6f][_0x298091]=_0x5c7813;}});_0x2e37b5();import{uuid}from'@dx-private/dxchart5-light/dist/chart/utils/uuid.utils';import _0x121a2b,{memo,useCallback,useContext,useEffect,useLayoutEffect,useRef,useState}from'react';import _0x4847e5 from'react-dom';import{useResizeObserver}from'../../utils/use-resize-observer';import{focusNextActiveElement,focusPreviousActiveElement}from'../accessibility/a11y-functions';import{focusOnRefElement}from'../accessibility/focus-on-ref-element';import{useAppendTo}from'../hooks/use-append-to.hook';import{PopupStackContext}from'../PopupStack/PopupStack';import{calculatePopoverPlacement,compareCoordinates}from'./Popover.model';import{PopoverUI}from'./PopoverUI.component';export const Popover=memo(_0x30611c=>{const {position:position='bottom',align:align='start',appendTo:_0x24fcc7,opened:_0x150504,closeOnClickAway:closeOnClickAway=!![],anchorRef:anchorRef=_0x121a2b['createRef'](),selectorRef:_0x1e2ffe,parentEventTarget:_0x2d1011,keyboardMode:keyboardMode=![],className:_0x1b649b,testId:_0x4d31bd,children:_0x3cc43a,draggable:_0x180d7e,draggableHandlerClass:_0x59b093,customPosition:_0x54ac2e,onRequestClose:_0x5b266e,onTabPress:_0x2f354e,updatePopoverCustomPosition:_0x27bdc4,updatePopoverSize:_0x284ff0,style:_0x445b52,customBounds:_0x35efcd,..._0x4266aa}=_0x30611c,_0x4673ae=useAppendTo(_0x24fcc7),_0x2afb6d=useContext(PopupStackContext),_0x38c4bb=useRef(uuid()),_0xa2e7df=useRef(keyboardMode);useEffect(()=>{_0xa2e7df['current']=keyboardMode;},[keyboardMode]);const _0x18ae43=useRef(![]),_0x35ed8b=useRef(null),_0x4be7c7={};_0x4be7c7['x']=0x0,_0x4be7c7['y']=0x0;const [_0x1e7e80,_0x4212eb]=useState(_0x4be7c7),_0x555973=useRef(document['createElement']('div')),_0x4de0ba=useCallback(()=>{if(_0x54ac2e){_0x4212eb({'y':Math['round'](_0x54ac2e['y']),'x':Math['round'](_0x54ac2e['x'])});return;}if(!anchorRef['current']||!_0x35ed8b['current'])return;const _0x1c21bc=getAnchorProperties(anchorRef['current'],_0x4673ae),_0x53aeb5=getPopoverSize(_0x35ed8b),_0x3c520c=_0x35efcd??getContainerProperties(_0x4673ae),_0x1257e4={};_0x1257e4['position']=position,_0x1257e4['align']=align,_0x1257e4['anchorPosition']=_0x1c21bc,_0x1257e4['popoverSize']=_0x53aeb5,_0x1257e4['parentContainer']=_0x3c520c;const _0x55adae=calculatePopoverPlacement(_0x1257e4);_0x4212eb({'y':Math['round'](_0x55adae['y']),'x':Math['round'](_0x55adae['x'])});},[anchorRef,_0x54ac2e,_0x4673ae,position,align]),_0x24fce2=useCallback(()=>{if(!_0x150504)return;_0x18ae43['current']&&_0x4de0ba();},[_0x150504,_0x4de0ba]),_0x39f20e=useCallback(_0x347143=>_0x5b266e?.(_0x347143),[_0x5b266e]),_0x2bb869=useCallback(_0x3fc58c=>_0x27bdc4?.(_0x3fc58c),[]),_0x33268d=useCallback(_0xcb94db=>{const _0x4cf8c2=_0x39527b=>{_0xa2e7df['current']&&(_0x39527b['preventDefault'](),_0x39f20e(_0x39527b),focusOnRefElement(_0x1e2ffe??anchorRef),setTimeout(()=>_0x39527b['shiftKey']?focusPreviousActiveElement():focusNextActiveElement()));};_0x2f354e?_0x2f354e?.(_0xcb94db):_0x4cf8c2(_0xcb94db);},[_0x2f354e,_0x39f20e]),_0x4ebce9=useCallback(_0x59b801=>{closeOnClickAway&&!anchorRef['current']?.['contains'](_0x59b801['target'])&&!_0x35ed8b['current']?.['contains'](_0x59b801['target'])&&_0x39f20e(_0x59b801);},[_0x39f20e,closeOnClickAway,anchorRef]),_0x42bf8=useCallback(()=>{_0x35ed8b['current']&&_0x24fce2();},[_0x24fce2]),[_0x1d6e7c,_0x2b0a38]=useState(_0x54ac2e??null);_0x54ac2e&&_0x1d6e7c&&!compareCoordinates(_0x54ac2e,_0x1d6e7c)&&(_0x2b0a38(_0x54ac2e),_0x24fce2());useLayoutEffect(()=>{return anchorRef['current']&&(_0x150504?_0x2afb6d['addPopupToStack'](_0x38c4bb['current'],_0x507575=>{switch(_0x507575['code']){case'Tab':{_0x33268d(_0x507575);break;}case'Escape':{_0x39f20e(_0x507575),focusOnRefElement(_0x1e2ffe??anchorRef);break;}}}):_0xa2e7df['current']&&focusOnRefElement(_0x1e2ffe??anchorRef)),!_0x18ae43['current']&&(_0x18ae43['current']=!![]),()=>{_0x18ae43['current']=![],_0x2afb6d['removePopupFromStack'](_0x38c4bb['current']);};},[_0x150504,_0x2afb6d,anchorRef]),useLayoutEffect(()=>{const _0x20ee41=_0x555973['current'];return _0x150504&&attachElementTo(_0x20ee41,_0x4673ae),()=>{detachElementFromParent(_0x20ee41);};},[_0x150504,_0x4673ae]),useLayoutEffect(()=>{_0x150504&&_0x24fce2();},[_0x150504,_0x24fce2]),useEffect(()=>{if(_0x150504){const _0x39dfd1=getPopoverSize(_0x35ed8b);_0x284ff0?.(_0x39dfd1);}},[_0x150504,_0x284ff0]),useResizeObserver(_0x35ed8b,_0x24fce2),useEffect(()=>{const _0x1cceb8=_0x2d1011||document,_0x36144b=_0x4673ae;if(_0x150504){const _0xcbc253={};_0xcbc253['passive']=![],_0x1cceb8['addEventListener']('touchstart',_0x4ebce9,_0xcbc253),_0x1cceb8['addEventListener']('click',_0x4ebce9);const _0x3f15c0={};_0x3f15c0['capture']=!![],_0x1cceb8['addEventListener']('contextmenu',_0x4ebce9,_0x3f15c0),_0x36144b?.['addEventListener']('resize',_0x42bf8);}return()=>{_0x1cceb8['removeEventListener']('touchstart',_0x4ebce9),_0x1cceb8['removeEventListener']('click',_0x4ebce9),_0x1cceb8['removeEventListener']('contextmenu',_0x4ebce9),_0x36144b?.['removeEventListener']('resize',_0x42bf8);};},[_0x4ebce9,_0x42bf8,_0x150504,_0x2d1011,_0x4673ae]);const _0x56d74e=anchorRef['current']||_0x54ac2e;if(!_0x150504||!_0x56d74e)return null;const _0x25e799={..._0x1e7e80},_0x56828b={'position':_0x25e799,'anchorRef':anchorRef,'className':_0x1b649b,'style':_0x445b52,'testId':_0x4d31bd,'children':_0x3cc43a,'draggable':_0x180d7e,'draggableHandlerClass':_0x59b093,'onDragStop':_0x2bb869,..._0x4266aa},_0x18e69f=_0x56828b,_0xf21ac7={..._0x18e69f};_0xf21ac7['ref']=_0x35ed8b;const _0x17381f=_0x121a2b['createElement'](PopoverUI,_0xf21ac7);return _0x4847e5['createPortal'](_0x17381f,_0x555973['current']);});function getPopoverSize(_0x11397a){const _0x34ecd5=_0x4847e5['findDOMNode'](_0x11397a['current']);if(_0x34ecd5 instanceof HTMLElement){const _0x111702=window['getComputedStyle'](_0x34ecd5),_0x156acf=parseFloat(_0x111702['marginTop'])+parseFloat(_0x111702['marginBottom']),_0x4e8a9b=parseFloat(_0x111702['marginLeft'])+parseFloat(_0x111702['marginRight']),_0x5c526e={};return _0x5c526e['height']=_0x34ecd5['offsetHeight']+_0x156acf,_0x5c526e['width']=_0x34ecd5['offsetWidth']+_0x4e8a9b,_0x5c526e;}const _0x3c49a7={};return _0x3c49a7['height']=0x0,_0x3c49a7['width']=0x0,_0x3c49a7;}function getAnchorProperties(_0x38715f,_0xa361bc){const _0x7c78c2=_0x38715f['getBoundingClientRect'](),_0x58a934=_0xa361bc['getBoundingClientRect'](),_0x56bd18={};return _0x56bd18['left']=_0x7c78c2['left']-_0x58a934['left'],_0x56bd18['top']=_0x7c78c2['top']-_0x58a934['top'],_0x56bd18['height']=_0x7c78c2['height'],_0x56bd18['width']=_0x7c78c2['width'],_0x56bd18;}function getContainerProperties(_0xe77370){const _0x3c2253={};return _0x3c2253['top']=_0xe77370['clientTop'],_0x3c2253['left']=_0xe77370['clientLeft'],_0x3c2253['width']=_0xe77370['clientWidth'],_0x3c2253['height']=_0xe77370['clientHeight'],_0x3c2253;}function attachElementTo(_0x409ea3,_0x276785){const _0x25d3bd=_0x276785;_0x25d3bd['appendChild'](_0x409ea3);}function detachElementFromParent(_0x13c81e){const _0x51f1ef=_0x4847e5['findDOMNode'](_0x13c81e),_0x4f348c=_0x51f1ef&&_0x51f1ef['parentElement'];_0x4f348c&&_0x4f348c['removeChild'](_0x13c81e);}