/*
 * Copyright (C) 2002 - 2023 Devexperts LLC
 * This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
 * If a copy of the MPL was not distributed with this file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
"use strict";export default function p(r){r=r||{},r.quantity=r.quantity||200,r.startY=r.startY||50,r.avgCandleSize=r.avgCandleSize||2,r.avgTrendLength=r.avgTrendLength||{},r.avgTrendLength.sw=r.avgTrendLength.sw||10,r.avgTrendLength.down=r.avgTrendLength.down||10,r.avgTrendLength.up=r.avgTrendLength.up||10,r.withVolume=r.withVolume===!0||!1,r.period=r.period||60;var a=[],n=r.quantity||200,m=10,u=10,h=10;r.avgTrendLength&&(m=r.avgTrendLength.sw||10,u=r.avgTrendLength.down||10,h=r.avgTrendLength.up||10);var t=r.startY||50,e=r.avgCandleSize||2,v=t-e,o=t+e,w=T(v,o,e);for(a.push(w);a.length<n;){var d=Math.random()*10;d>6?a=a.concat(b(a[a.length-1],e,m)):d>3?a=a.concat(L(a[a.length-1],e,h)):a=a.concat(i(a[a.length-1],e,u))}a=a.slice(0,r.quantity);let s=Math.round(new Date().getTime()/3e5)*3e5;s-=n*r.period;for(let M=0;M<a.length;M++){const l=a[M];Object.assign(l,{timestamp:s,isVisible:!0}),s+=1e3*r.period,r.withVolume&&(l.volume=Math.ceil(Math.random()*1e3+200))}return a}function T(r,a,n,m){var u=Math.random()*(a-r)+r,h;if(m&&m==="bull"||!m&&Math.random()>.5){var t=u+n;h=t<a?t:a}else{var e=u-n;h=e>r?e:r}var v=Math.max(u,h)+Math.random()*n*.2,o=Math.min(u,h)-Math.random()*n*.2;return{hi:v,lo:o,open:u,close:h,timestamp:0,volume:0}}function L(r,a,n){for(var m=[],u=Math.random()*n+n/2,h=r.lo,t=r.hi+a*1.2,e=0;e<u;e++){var v=Math.random()>.9?"bear":"bull",o=T(h,t,a,v);h=o.lo-a*(Math.random()*.1+.1),t=o.hi+a*(Math.random()*1.3+.1),Math.random()>.9&&(t=o.hi+a),m.push(o)}return m}function i(r,a,n){for(var m=[],u=Math.random()*n+n/2,h=r.hi-a*1.2,t=r.hi,e=0;e<u;e++){var v=Math.random()<.9?"bear":"bull",o=T(h,t,a,v);h=o.lo-a*(Math.random()*.3+.1),t=o.hi-a*(Math.random()*.1+.1),Math.random()>.9&&(t=o.lo-a),m.push(o)}return m}function b(r,a,n){var m=[],u=Math.random()*n+n/2;function h(s){var M,l;return Math.random()>.5?(M=s.lo-a*.2,l=s.hi+a*1.2):(M=s.lo-a*1.2,l=s.hi+a*.2),{from:M,to:l}}for(var t=h(r),e=t.from,v=t.to,o=0;o<u;o++){var w=Math.random()<.5?"bear":"bull",d=T(e,v,a,w);t=h(d),e=t.from,v=t.to,Math.random()>.9&&(Math.random()>.5?e=d.lo-a:v=d.hi+a),m.push(d)}return m}window.DXChart=Object.assign(Object.assign({},window.DXChart),{generateCandlesData:p});
