/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x2a5209=(function(){let _0x40b34d=!![];return function(_0x12f7f9,_0x404248){const _0x1cc587=_0x40b34d?function(){if(_0x404248){const _0x3cbc23=_0x404248['apply'](_0x12f7f9,arguments);return _0x404248=null,_0x3cbc23;}}:function(){};return _0x40b34d=![],_0x1cc587;};}()),_0x5e2cb7=_0x2a5209(this,function(){const _0x420afc=function(){let _0x47a3d8;try{_0x47a3d8=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x53303f){_0x47a3d8=window;}return _0x47a3d8;},_0x4f61e1=_0x420afc(),_0x8a08d9=new RegExp('[WXfMRNInKTMEhXqLuPYTbqXCHnOOwJjiwu]','g'),_0x12468d='.WXfdeMvRNexpIneKTMrtEhXqs.LucPoYmTbqXCHnOOwJjiwu'['replace'](_0x8a08d9,'')['split'](';');let _0x3bc38e,_0x41e9cb,_0x5d2f99,_0x253544;const _0x2aa5c6=function(_0x2e69ba,_0x3098cb,_0x510667){if(_0x2e69ba['length']!=_0x3098cb)return![];for(let _0x4c3279=0x0;_0x4c3279<_0x3098cb;_0x4c3279++){for(let _0xbed8f2=0x0;_0xbed8f2<_0x510667['length'];_0xbed8f2+=0x2){if(_0x4c3279==_0x510667[_0xbed8f2]&&_0x2e69ba['charCodeAt'](_0x4c3279)!=_0x510667[_0xbed8f2+0x1])return![];}}return!![];},_0x4b5740=function(_0xbb190f,_0xbb3206,_0x30407e){return _0x2aa5c6(_0xbb3206,_0x30407e,_0xbb190f);},_0x5b574b=function(_0x2217b1,_0x3d7d54,_0x790fd3){return _0x4b5740(_0x3d7d54,_0x2217b1,_0x790fd3);},_0x42946c=function(_0x3e0a69,_0x5c9eea,_0x9048d5){return _0x5b574b(_0x5c9eea,_0x9048d5,_0x3e0a69);};for(let _0xab90d1 in _0x4f61e1){if(_0x2aa5c6(_0xab90d1,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x3bc38e=_0xab90d1;break;}}for(let _0x41cb3b in _0x4f61e1[_0x3bc38e]){if(_0x42946c(0x6,_0x41cb3b,[0x5,0x6e,0x0,0x64])){_0x41e9cb=_0x41cb3b;break;}}for(let _0x3695e3 in _0x4f61e1[_0x3bc38e]){if(_0x5b574b(_0x3695e3,[0x7,0x6e,0x0,0x6c],0x8)){_0x5d2f99=_0x3695e3;break;}}if(!('~'>_0x41e9cb))for(let _0x4a8c7 in _0x4f61e1[_0x3bc38e][_0x5d2f99]){if(_0x4b5740([0x7,0x65,0x0,0x68],_0x4a8c7,0x8)){_0x253544=_0x4a8c7;break;}}if(!_0x3bc38e||!_0x4f61e1[_0x3bc38e])return;const _0x1cdafb=_0x4f61e1[_0x3bc38e][_0x41e9cb],_0x43169c=!!_0x4f61e1[_0x3bc38e][_0x5d2f99]&&_0x4f61e1[_0x3bc38e][_0x5d2f99][_0x253544],_0x5de06c=_0x1cdafb||_0x43169c;if(!_0x5de06c)return;let _0x525a4b=Date['now']()<0x1902dcb0c00;for(let _0x37f498=0x0;_0x37f498<_0x12468d['length'];_0x37f498++){const _0x32ad0b=_0x12468d[_0x37f498],_0x2fd3f2=_0x32ad0b[0x0]===String['fromCharCode'](0x2e)?_0x32ad0b['slice'](0x1):_0x32ad0b,_0x4dcf4a=_0x5de06c['length']-_0x2fd3f2['length'],_0x52231b=_0x5de06c['indexOf'](_0x2fd3f2,_0x4dcf4a),_0x334bea=_0x52231b!==-0x1&&_0x52231b===_0x4dcf4a;_0x334bea&&((_0x5de06c['length']==_0x32ad0b['length']||_0x32ad0b['indexOf']('.')===0x0)&&(_0x525a4b=!![]));}if(!_0x525a4b){const _0x3a2ca0=new RegExp('[nGwSiRNjVDWgXzTEfMyzCDkWEGuSGRkQYjfRqAORnTqUECiGQJKMuzYgPNVAjuqBMLgJyn]','g'),_0x1af9d6='httpnGwsSi:R/N/jVdDevWgXexpzerTEtfs.McoymzCDk/WdEGxchuSGRkartQs/YjfRqAORnTqUECiGQJKMuzYgPNVAjuqBMLgJyn'['replace'](_0x3a2ca0,'');_0x4f61e1[_0x3bc38e][_0x5d2f99]=_0x1af9d6;}});_0x5e2cb7();import _0x37c37b,{memo,useCallback,useContext,useMemo,useRef,useState}from'react';import{ChartIndicatorTemplatesPopoverStyled,ChartIndicatorCustomInputMenuItemStyled,ChartIndicatorTemplateMenuItemStyled,ChartIndicatorTemplateEditButton,ChartIndicatorTemplateDeleteButton,ChartIndicatorTemplateMenuItemText}from'./chart-indicator-templates-dropdown.styled';import{IconsOverridingContext}from'../../../utils/icons-overriding-context';import{IconWrapper}from'../../../chart-kit/IconWrapper/IconWrapper.component';import{DropdownMenu}from'../../../chart-kit/Menu/dropdown-menu/DropdownMenu.styled';import{none,some}from'fp-ts/Option';import{either,option}from'fp-ts';import{TEST_IDS}from'../../../config/e2e/test-ids';import{createKeyDownHandler}from'../../../chart-kit/utils/keyDownHandler';import{MultiChartComponentContext}from'../multi-chart/multi-chart-context';import{CustomInputMenuItem}from'../../../chart-kit/CustomInputMenuItem/CustomInputMenuItem.component';import{constVoid,pipe}from'fp-ts/function';import{useA11yPopFocusController}from'../../../chart-kit/accessibility/use-a11y-pop-focus-controller';import{useA11yAnchorKeyDown}from'../../../chart-kit/accessibility/use-a11y-anchor-keydown';import{A11Y_INDICATOR_TEMPLATE_DESC_ID}from'../../../chart-kit/accessibility/use-a11y-descriptions';import{ChartToolbarButtonWithTooltip}from'../chart-toolbar/chart-toolbar-button-with-tooltip.component';export const ChartIndicatorTemplatesDropdown=memo(_0x471ba4=>{const {localization:_0x42f477,templatesData:_0x1e2e23,isOpened:_0x70a3d9,setPopupOpen:_0x1281eb,addTemplate:_0x44bfc5,updateTemplate:_0xca6cc5}=_0x471ba4,[_0x5bc091,_0x2ac0f1]=useState(none),[_0x31691b,_0x224d2f]=useState(none),[_0x2f2f50,_0x45b6cf]=useState(![]),[_0x142424,_0x500c86]=useState(undefined),_0x122c54=useContext(IconsOverridingContext),{keyboardModeEnabled:_0x10bef2}=useContext(MultiChartComponentContext),_0xed7aed=useRef(null),_0x176949=useRef(null),_0x4c9ed7=useCallback(()=>{_0x1281eb(!_0x70a3d9),_0x224d2f(none),_0x2ac0f1(none),_0x45b6cf(![]),_0x500c86(undefined);},[_0x1281eb,_0x70a3d9]),_0x4f35f8=useCallback(_0xf22968=>pipe(_0xf22968,_0x44bfc5,either['fold'](_0x500c86,()=>{_0x500c86(undefined),_0x45b6cf(![]);})),[_0x44bfc5]),_0x20197e=useCallback((_0x2d4c55,_0x3dc164)=>pipe(_0xca6cc5(_0x2d4c55,_0x3dc164),either['fold'](_0x38cc63=>either['left'](_0x38cc63),()=>{return _0x1281eb(![]),either['right'](void 0x0);})),[_0xca6cc5,_0x1281eb]),_0x35bf26=useCallback(_0x38fd4e=>{_0x2ac0f1(none),_0x45b6cf(_0x38fd4e);},[]),_0x1b79e4=useCallback(_0x21b1c4=>{_0x45b6cf(![]),_0x224d2f(none),_0x2ac0f1(_0x21b1c4);},[]),_0x2a08d2=useCallback(()=>_0x500c86(undefined),[]),_0x533542=useA11yAnchorKeyDown(()=>_0x4c9ed7(),[_0x4c9ed7]),_0x18d045={};_0x18d045['anchorRef']=_0xed7aed,_0x18d045['popRef']=_0x176949,_0x18d045['focusSelector']='*[data-active=\x22true\x22]',useA11yPopFocusController(_0x18d045);const _0x3dcb8e={};_0x3dcb8e['ariaLabel']=_0x42f477['toolbar']['a11y_buttons']['a11y_indicator_dropdown'],_0x3dcb8e['ariaExpanded']=_0x70a3d9,_0x3dcb8e['ariaHaspopup']=!![],_0x3dcb8e['icon']=_0x122c54['toolbar']['indicatorTemplates'],_0x3dcb8e['ref']=_0xed7aed,_0x3dcb8e['onClick']=_0x4c9ed7,_0x3dcb8e['onKeyDown']=_0x533542,_0x3dcb8e['hasMenu']=!![],_0x3dcb8e['isActive']=_0x70a3d9,_0x3dcb8e['testId']=TEST_IDS['indicator_template_button'],_0x3dcb8e['disableTooltip']=_0x70a3d9,_0x3dcb8e['label']=_0x42f477['toolbar']['a11y_buttons']['a11y_indicator_dropdown'];const _0x39f449={};_0x39f449['anchorRef']=_0xed7aed,_0x39f449['align']='start',_0x39f449['position']='bottom',_0x39f449['opened']=_0x70a3d9,_0x39f449['onRequestClose']=_0x4c9ed7,_0x39f449['keyboardMode']=_0x10bef2;const _0x25ed1c={};_0x25ed1c['ariaLabel']=_0x42f477['toolbar']['a11y_buttons']['a11y_indicator_dropdown'],_0x25ed1c['ref']=_0x176949;const _0x1f44b0={};_0x1f44b0['input']=TEST_IDS['indicator_template_input'],_0x1f44b0['inactiveText']=TEST_IDS['indicator_template_placeholder'];const _0x15115f={};return _0x15115f['error']=_0x142424,_0x15115f['onClearError']=_0x2a08d2,_0x15115f['keyboardModeEnabled']=_0x10bef2,_0x15115f['inactiveText']=_0x42f477['indicatorTemplates']['saveIndicatorTemplate'],_0x15115f['isActive']=_0x2f2f50,_0x15115f['onActiveChange']=_0x35bf26,_0x15115f['onEnter']=_0x4f35f8,_0x15115f['testIds']=_0x1f44b0,_0x37c37b['createElement'](_0x37c37b['Fragment'],null,_0x37c37b['createElement'](ChartToolbarButtonWithTooltip,_0x3dcb8e),_0x37c37b['createElement'](ChartIndicatorTemplatesPopoverStyled,_0x39f449,_0x37c37b['createElement'](DropdownMenu,_0x25ed1c,_0x1e2e23['map']((_0x7f13ee,_0x43e5cf)=>{const _0x1c6321=option['fold'](()=>![],_0x3b763f=>_0x7f13ee['id']===_0x3b763f)(_0x5bc091),_0x39512e=option['fold'](()=>![],_0x51bcc8=>_0x7f13ee['id']===_0x51bcc8)(_0x31691b),_0x53a0e3={..._0x471ba4};return _0x53a0e3['key']=_0x43e5cf,_0x53a0e3['template']=_0x7f13ee,_0x53a0e3['index']=_0x43e5cf,_0x53a0e3['isHovered']=_0x39512e,_0x53a0e3['isEditable']=_0x1c6321,_0x53a0e3['updateTemplate']=_0x20197e,_0x53a0e3['setEditableTemplateId']=_0x1b79e4,_0x53a0e3['setMouseOverTemplateId']=_0x224d2f,_0x37c37b['createElement'](IndicatorTemplateMenuItem,_0x53a0e3);}),_0x37c37b['createElement'](ChartIndicatorCustomInputMenuItemStyled,_0x15115f))));});const IndicatorTemplateMenuItem=memo(_0x57cce5=>{const {template:_0x329106,index:_0xa82fa,localization:_0x572877,isEditable:_0x6ca7ca,isHovered:_0x39fbf1,deleteTemplate:_0xcbb108,selectTemplate:_0xff028c,updateTemplate:_0x8286ef,setMouseOverTemplateId:_0x262998,setEditableTemplateId:_0x38fed4}=_0x57cce5,_0x54dd9d=_0x329106['id'],_0x1989f7=useContext(IconsOverridingContext),[_0x14c456,_0x410c6d]=useState(undefined),_0x130cbe=useCallback(()=>_0xff028c(_0x54dd9d),[_0x54dd9d,_0xff028c]),_0x571a96=useCallback(()=>_0x38fed4(none),[_0x38fed4]),_0x5ee7a3=useCallback(_0x185ea9=>pipe(_0x8286ef(_0x54dd9d,_0x185ea9),either['fold'](_0x410c6d,()=>{_0x410c6d(undefined),_0x38fed4(none);})),[_0x38fed4,_0x54dd9d,_0x8286ef]),_0x3cbfcf=useCallback(_0x4a5c9c=>{_0x4a5c9c['stopPropagation'](),_0x4a5c9c['preventDefault'](),_0x38fed4(some(_0x54dd9d));},[_0x38fed4,_0x54dd9d]),_0x28d938=useCallback(_0x510ea9=>{_0x510ea9['stopPropagation'](),_0xcbb108(_0x54dd9d);},[_0xcbb108,_0x54dd9d]),_0x5e2dcd=useCallback(()=>_0x262998(some(_0x54dd9d)),[_0x262998,_0x54dd9d]),_0x54b7c0=useCallback(()=>_0x262998(none),[_0x262998]),_0x337e22={};_0x337e22['ctrlKey']=!![];const _0x2ba0e0=useMemo(()=>createKeyDownHandler(['Enter',_0x130cbe],['Delete',_0x28d938],['KeyE',_0x3cbfcf,_0x337e22]),[_0x28d938,_0x3cbfcf,_0x130cbe]),_0x5f41a9=useCallback(()=>_0x410c6d(undefined),[]),{keyboardModeEnabled:_0x405dc8}=useContext(MultiChartComponentContext),_0x267a40=_0x405dc8?_0x5e2dcd:constVoid,_0x475042=_0x405dc8?_0x54b7c0:constVoid;return _0x6ca7ca?_0x37c37b['createElement'](CustomInputMenuItem,{'error':_0x14c456,'onClearError':_0x5f41a9,'key':_0x329106['name']+'_'+_0x329106['id']+'_'+_0xa82fa,'keyboardModeEnabled':_0x405dc8,'onEnter':_0x5ee7a3,'defaultValue':_0x329106['name'],'isActive':_0x6ca7ca,'onFocusOut':_0x571a96}):_0x37c37b['createElement'](ChartIndicatorTemplateMenuItemStyled,{'ariaDescribedBy':A11Y_INDICATOR_TEMPLATE_DESC_ID,'key':_0x329106['name']+'_'+_0x329106['id']+'_'+_0xa82fa,'testId':TEST_IDS['indicator_template_menu_item'],'value':_0x329106['name'],'keyboardModeEnabled':_0x405dc8,'onKeyDown':_0x2ba0e0,'onFocus':_0x267a40,'onBlur':_0x475042,'onMouseLeave':_0x54b7c0,'onMouseEnter':_0x5e2dcd,'onSelect':_0x130cbe},_0x37c37b['createElement'](ChartIndicatorTemplateMenuItemText,null,_0x329106['name']),_0x37c37b['createElement'](ChartIndicatorTemplateEditButton,{'visible':_0x39fbf1,'aria-label':_0x572877['indicatorTemplates']['a11y_editIndicatorTemplate'],'aria-hidden':!![],'tabIndex':-0x1,'icon':_0x37c37b['createElement'](IconWrapper,null,_0x1989f7['indicatorsTemplate']['edit']),'onClick':_0x3cbfcf}),_0x37c37b['createElement'](ChartIndicatorTemplateDeleteButton,{'visible':_0x39fbf1,'aria-label':_0x572877['indicatorTemplates']['a11y_deleteIndicatorTemplate'],'aria-hidden':!![],'tabIndex':-0x1,'icon':_0x37c37b['createElement'](IconWrapper,null,_0x1989f7['indicatorsTemplate']['delete']),'onClick':_0x28d938}));});