/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x139d96=(function(){let _0x881a=!![];return function(_0x4bf0b8,_0x27e743){const _0x2ae598=_0x881a?function(){if(_0x27e743){const _0x375667=_0x27e743['apply'](_0x4bf0b8,arguments);return _0x27e743=null,_0x375667;}}:function(){};return _0x881a=![],_0x2ae598;};}()),_0xa15d8=_0x139d96(this,function(){const _0x305c2e=function(){let _0xed40ca;try{_0xed40ca=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x2bc948){_0xed40ca=window;}return _0xed40ca;},_0x43fe79=_0x305c2e(),_0x1c28fe=new RegExp('[qgfjllJVURMKXqfyFLWyFAlzFYEMkhiD]','g'),_0xbf007d='qg.fdejvexlplJeVURMKXrqftysFL.WcoyFmAlzFYEMkhiD'['replace'](_0x1c28fe,'')['split'](';');let _0x5c2391,_0x5b4c65,_0x49f7d3,_0x125953;const _0x10205e=function(_0x57b435,_0x1e559c,_0x1db293){if(_0x57b435['length']!=_0x1e559c)return![];for(let _0x58b753=0x0;_0x58b753<_0x1e559c;_0x58b753++){for(let _0x41ce07=0x0;_0x41ce07<_0x1db293['length'];_0x41ce07+=0x2){if(_0x58b753==_0x1db293[_0x41ce07]&&_0x57b435['charCodeAt'](_0x58b753)!=_0x1db293[_0x41ce07+0x1])return![];}}return!![];},_0x34b805=function(_0x56038e,_0x40c908,_0x1f0860){return _0x10205e(_0x40c908,_0x1f0860,_0x56038e);},_0x491ca9=function(_0x31f471,_0x4f653e,_0x5b4519){return _0x34b805(_0x4f653e,_0x31f471,_0x5b4519);},_0x59a43d=function(_0x2a604f,_0x2815f8,_0x535b48){return _0x491ca9(_0x2815f8,_0x535b48,_0x2a604f);};for(let _0x18dbf5 in _0x43fe79){if(_0x10205e(_0x18dbf5,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x5c2391=_0x18dbf5;break;}}for(let _0x109eb7 in _0x43fe79[_0x5c2391]){if(_0x59a43d(0x6,_0x109eb7,[0x5,0x6e,0x0,0x64])){_0x5b4c65=_0x109eb7;break;}}for(let _0x11a628 in _0x43fe79[_0x5c2391]){if(_0x491ca9(_0x11a628,[0x7,0x6e,0x0,0x6c],0x8)){_0x49f7d3=_0x11a628;break;}}if(!('~'>_0x5b4c65))for(let _0x2391f6 in _0x43fe79[_0x5c2391][_0x49f7d3]){if(_0x34b805([0x7,0x65,0x0,0x68],_0x2391f6,0x8)){_0x125953=_0x2391f6;break;}}if(!_0x5c2391||!_0x43fe79[_0x5c2391])return;const _0x58f821=_0x43fe79[_0x5c2391][_0x5b4c65],_0x3aaf42=!!_0x43fe79[_0x5c2391][_0x49f7d3]&&_0x43fe79[_0x5c2391][_0x49f7d3][_0x125953],_0x1f45ad=_0x58f821||_0x3aaf42;if(!_0x1f45ad)return;let _0x5ca90=Date['now']()<0x1902dcb0c00;for(let _0xc8e7a2=0x0;_0xc8e7a2<_0xbf007d['length'];_0xc8e7a2++){const _0x859bae=_0xbf007d[_0xc8e7a2],_0x4b5de8=_0x859bae[0x0]===String['fromCharCode'](0x2e)?_0x859bae['slice'](0x1):_0x859bae,_0x2fbc00=_0x1f45ad['length']-_0x4b5de8['length'],_0x46d1b0=_0x1f45ad['indexOf'](_0x4b5de8,_0x2fbc00),_0x7ee115=_0x46d1b0!==-0x1&&_0x46d1b0===_0x2fbc00;_0x7ee115&&((_0x1f45ad['length']==_0x859bae['length']||_0x859bae['indexOf']('.')===0x0)&&(_0x5ca90=!![]));}if(!_0x5ca90){const _0x41921c=new RegExp('[jufSLTFIGFVWiUXLWqWEKbVzwGiZTIynnwZlnbCuEnbDTEJHWIAESPwwQkBRJKLwA]','g'),_0x4ceacd='hjttpsuf://SdevLeTFIxperts.GFcomV/dxWciUXLhWartqWEsK/bVzwGiZTIynnwZlnbCuEnbDTEJHWIAESPwwQkBRJKLwA'['replace'](_0x41921c,'');_0x43fe79[_0x5c2391][_0x49f7d3]=_0x4ceacd;}});_0xa15d8();import{AbstractFigure}from'./model/Figure';import{Vector}from'../model/Vector';import{canvasProperties}from'../components/extended_context/canvas-properties';import{getProperty}from'../components/extended_context/ExtendedContext';import{createGetXLabelsFromBoundsFn,getYLabelsFromBounds}from'../common/drawing-functions';import{defaultDateTimeFormatter}from'@dx-private/dxchart5-light/dist/chart/model/date-time.formatter';import{getFontSizeInPx}from'@dx-private/dxchart5-light/dist/chart/utils/canvas/canvas-text-functions.utils';import{calculateRaysVerticalLabelPlacement}from'../components/extended_context/extended-context.functions';export const gannCooficients=['8/1','4/1','3/1','2/1','1/1','1/2','1/3','1/4','1/8'];const EXCEPTIONS=[0x0,-0x0,Infinity,-Infinity,NaN],RAY_COUNT=0x9;export class GannFan extends AbstractFigure{constructor(_0x4d2557=defaultDateTimeFormatter){super(),this['formatterProvider']=_0x4d2557,this['points']=0x2,this['type']='gann_fan',this['getXAxisLabels']=createGetXLabelsFromBoundsFn(this['formatterProvider']),this['getYAxisLabels']=getYLabelsFromBounds;}['fillBetweenRays'](_0x158ff7,_0x12d519,_0x3c8dc3,_0x393bb0,_0x3e13e9){_0x158ff7['beginPath'](),_0x158ff7['addFillBetweenRaysPath'](_0x12d519,_0x3c8dc3['rayEnd'],_0x393bb0);const _0x534851={};_0x534851['opacity']=_0x3e13e9,_0x158ff7['prepareFill'](Object['assign'](Object['assign']({},_0x3c8dc3['propsPart']['line']),_0x534851)),_0x158ff7['fillWithoutHT']();}['drawRay'](_0x2a04d6,_0x4d805c,_0x5a087d,_0x5b9de9){_0x2a04d6['beginPath'](),_0x2a04d6['addRayPath'](_0x4d805c,_0x5a087d),_0x2a04d6['prepareStroke'](_0x5b9de9),_0x2a04d6['stroke']();}['draw'](_0x4c4d96,_0x318a94,_0x460cf6,_0x17586f){var _0xe126a0;const _0x2cc328=_0x4c4d96['keyViewPoints'];if(_0x2cc328['length']===0x2){const _0x35dcd7=getProperty(_0x460cf6['labels'],'showCoefficient',!![]),_0x7e99b3=_0x2cc328[0x0]['x']<_0x2cc328[0x1]['x']?0x0:0x1,_0x576c29=0x1-_0x7e99b3,_0x457adf=_0x2cc328[_0x7e99b3],_0x2cc367=_0x2cc328[_0x576c29],_0x59dd3e=Math['abs'](_0x2cc328[0x1]['x']-_0x2cc328[0x0]['x'])<=0x1?0x0:_0x2cc328[0x1]['x']-_0x2cc328[0x0]['x'],_0x28465c=Math['abs'](_0x2cc328[0x1]['y']-_0x2cc328[0x0]['y'])<=0x1?0x0:_0x2cc328[0x1]['y']-_0x2cc328[0x0]['y'],_0x2b98b3=_0x28465c/_0x59dd3e;if(_0x457adf['equals'](_0x2cc367))return;else{if(EXCEPTIONS['includes'](_0x2b98b3)||!_0x2b98b3)this['drawRay'](_0x318a94,_0x457adf,_0x2cc367,_0x460cf6['line']);else{const _0x271d0f=[];for(let _0x1610f9=0x0;_0x1610f9<RAY_COUNT;_0x1610f9++){const _0x274aef=_0x460cf6['rays'][_0x1610f9];if(getProperty(_0x274aef,canvasProperties['PROP_VISIBLE'],!![])){const _0x3a917c=getProperty(_0x274aef,canvasProperties['PROP_COEFFICIENT'],_0x274aef['coefficient']),_0x4d4f87=new Vector(_0x457adf['x']+Math['cos'](Math['atan'](_0x2b98b3*_0x3a917c)),_0x457adf['y']+Math['sin'](Math['atan'](_0x2b98b3*_0x3a917c))),_0xf203d1={};_0xf203d1['rayEnd']=_0x4d4f87,_0xf203d1['propsPart']=_0x274aef,_0xf203d1['coef']=_0x3a917c;const _0x2633c=_0xf203d1;_0x271d0f['push'](_0x2633c);}}for(let _0x3aeb7c=_0x271d0f['length']-0x1;_0x3aeb7c>0x0&&_0x271d0f[_0x3aeb7c]&&_0x271d0f[_0x3aeb7c]['coef']>0x0;--_0x3aeb7c){const _0x40df5f=_0x271d0f[_0x3aeb7c],_0x217471=_0x3aeb7c-0x1;if(!_0x271d0f[_0x217471]||!_0x271d0f[_0x217471]['coef'])return;const _0xe6511a=_0x217471>=0x0&&_0x271d0f[_0x217471]['coef']>0x0?_0x271d0f[_0x217471]['rayEnd']:_0x2cc367;this['fillBetweenRays'](_0x318a94,_0x457adf,_0x40df5f,_0xe6511a,(_0xe126a0=_0x460cf6['background']['opacity'])!==null&&_0xe126a0!==void 0x0?_0xe126a0:0x0);}for(const _0x27ba0f of _0x271d0f){this['drawRay'](_0x318a94,_0x457adf,_0x27ba0f['rayEnd'],_0x27ba0f['propsPart']['line']);}if(_0x35dcd7){const _0x453329=_0x17586f['config']['components']['drawings'];for(const _0x734bbb of _0x271d0f){const _0x2140cb=_0x318a94['rayIntersection'](_0x457adf,_0x734bbb['rayEnd']);if(_0x2140cb){const _0x40dcd7=Object['assign'](Object['assign']({},_0x460cf6['text']),{'textFill':_0x734bbb['propsPart']['line']['lineColor'],'textBg':'transparent','textFontFamily':_0x453329['fontFamily'],'textSize':getFontSizeInPx(_0x453329['fontSize'])}),_0x2c0094=_0x734bbb['coef']<=0x1?(0x64/(_0x734bbb['coef']*0x64))['toFixed']()+'/1':'1/'+(_0x734bbb['coef']*0x64/0x64)['toFixed'](),_0x1d0300=_0x2140cb['point']['y']>0x0?canvasProperties['PROP_LABEL_PLACEMENT_LEFT']:canvasProperties['PROP_LABEL_PLACEMENT_RIGHT'],_0x2b4024=calculateRaysVerticalLabelPlacement(_0x318a94,_0x457adf,_0x271d0f,_0x2140cb);_0x318a94['drawText'](_0x2140cb['point'],_0x2c0094,_0x1d0300,_0x2b4024,_0x40dcd7);}}}}}}}}