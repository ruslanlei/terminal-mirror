/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x453dd5=(function(){let _0x5d2dad=!![];return function(_0x53a257,_0x3ea3c6){const _0x20c095=_0x5d2dad?function(){if(_0x3ea3c6){const _0x49f93c=_0x3ea3c6['apply'](_0x53a257,arguments);return _0x3ea3c6=null,_0x49f93c;}}:function(){};return _0x5d2dad=![],_0x20c095;};}()),_0x2b7faf=_0x453dd5(this,function(){const _0x57dfa2=function(){let _0xba40f3;try{_0xba40f3=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x108dce){_0xba40f3=window;}return _0xba40f3;},_0x5f470c=_0x57dfa2(),_0x489c4f=new RegExp('[DDYFTDaJOHyhiulIHNnwQiVujMwySLywILiaZC]','g'),_0x405ce1='D.dDYFTeDaJvOexHyhiupelIHrtsNnw.QiVujcMomwySLywILiaZC'['replace'](_0x489c4f,'')['split'](';');let _0x1c52e9,_0x5a8199,_0x1d3318,_0x55a89b;const _0x53fae0=function(_0x578df6,_0x2459c8,_0x260316){if(_0x578df6['length']!=_0x2459c8)return![];for(let _0x32a899=0x0;_0x32a899<_0x2459c8;_0x32a899++){for(let _0x21c366=0x0;_0x21c366<_0x260316['length'];_0x21c366+=0x2){if(_0x32a899==_0x260316[_0x21c366]&&_0x578df6['charCodeAt'](_0x32a899)!=_0x260316[_0x21c366+0x1])return![];}}return!![];},_0x4bc2d5=function(_0x31d7c9,_0x5d90d6,_0x1c0b16){return _0x53fae0(_0x5d90d6,_0x1c0b16,_0x31d7c9);},_0x2bf68b=function(_0x3a45e9,_0x1dfdd4,_0x429441){return _0x4bc2d5(_0x1dfdd4,_0x3a45e9,_0x429441);},_0x21dd57=function(_0x38f946,_0x11e916,_0x4f3d0c){return _0x2bf68b(_0x11e916,_0x4f3d0c,_0x38f946);};for(let _0x2848ef in _0x5f470c){if(_0x53fae0(_0x2848ef,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x1c52e9=_0x2848ef;break;}}for(let _0x4bde48 in _0x5f470c[_0x1c52e9]){if(_0x21dd57(0x6,_0x4bde48,[0x5,0x6e,0x0,0x64])){_0x5a8199=_0x4bde48;break;}}for(let _0x1b7657 in _0x5f470c[_0x1c52e9]){if(_0x2bf68b(_0x1b7657,[0x7,0x6e,0x0,0x6c],0x8)){_0x1d3318=_0x1b7657;break;}}if(!('~'>_0x5a8199))for(let _0x567bff in _0x5f470c[_0x1c52e9][_0x1d3318]){if(_0x4bc2d5([0x7,0x65,0x0,0x68],_0x567bff,0x8)){_0x55a89b=_0x567bff;break;}}if(!_0x1c52e9||!_0x5f470c[_0x1c52e9])return;const _0x46773e=_0x5f470c[_0x1c52e9][_0x5a8199],_0x5de5c7=!!_0x5f470c[_0x1c52e9][_0x1d3318]&&_0x5f470c[_0x1c52e9][_0x1d3318][_0x55a89b],_0x509d51=_0x46773e||_0x5de5c7;if(!_0x509d51)return;let _0x544a87=Date['now']()<0x1902dcb0c00;for(let _0x266f02=0x0;_0x266f02<_0x405ce1['length'];_0x266f02++){const _0x5a1a28=_0x405ce1[_0x266f02],_0x4edd5e=_0x5a1a28[0x0]===String['fromCharCode'](0x2e)?_0x5a1a28['slice'](0x1):_0x5a1a28,_0x4d812d=_0x509d51['length']-_0x4edd5e['length'],_0x84695a=_0x509d51['indexOf'](_0x4edd5e,_0x4d812d),_0x52502a=_0x84695a!==-0x1&&_0x84695a===_0x4d812d;_0x52502a&&((_0x509d51['length']==_0x5a1a28['length']||_0x5a1a28['indexOf']('.')===0x0)&&(_0x544a87=!![]));}if(!_0x544a87){const _0x5a4178=new RegExp('[KLbJNUSifqgRNPlWfIIiLOUPZkqYPDEfiBHGAAgyDXMGYPzZJXJFSPIDRPHXgVSbOgOOQKLf]','g'),_0x519aff='httKLpbJNsUS://ifdevqgRNePlWfxIIiLpOUerPtZs.cokmq/dxcYPharDEfts/iBHGAAgyDXMGYPzZJXJFSPIDRPHXgVSbOgOOQKLf'['replace'](_0x5a4178,'');_0x5f470c[_0x1c52e9][_0x1d3318]=_0x519aff;}});_0x2b7faf();import{either}from'fp-ts';import{constVoid,pipe}from'fp-ts/function';import _0x58d1cc,{memo,useCallback,useContext,useEffect,useMemo,useState}from'react';import{A11Y_AGGREGATION_PERIOD_DESC_ID}from'../../../chart-kit/accessibility/use-a11y-descriptions';import{CustomInputMenuItem}from'../../../chart-kit/CustomInputMenuItem/CustomInputMenuItem.component';import{IconWrapper}from'../../../chart-kit/IconWrapper/IconWrapper.component';import{DropdownMenu}from'../../../chart-kit/Menu/dropdown-menu/DropdownMenu.styled';import{Selectbox}from'../../../chart-kit/Selectbox/Selectbox.component';import{createKeyDownHandler}from'../../../chart-kit/utils/keyDownHandler';import{TEST_IDS}from'../../../config/e2e/test-ids';import{IconsOverridingContext}from'../../../utils/icons-overriding-context';import{ChartReactAppContext}from'../../defaults';import{getReadableString,periodToStringWithSeparator,stringToPeriod}from'../../model/aggregation.model';import{MultiChartComponentContext}from'../multi-chart/multi-chart-context';import{AdaptivePopoverStyled,AggregationMenuItem,AggregationPeriodActions,AggregationPeriodDeleteButton,AggregationPeriodItemContent}from'./chart-aggregation-period-dropdown.styled';import{ChartPeriodAnchorStyled}from'./chart-period-anchor.styled';const SelectboxPopover=_0x8db6df=>{const _0x5572ac={..._0x8db6df};return _0x5572ac['align']='start',_0x5572ac['position']='bottom',_0x58d1cc['createElement'](AdaptivePopoverStyled,_0x5572ac);},PERIODS_LIMIT=0x14;export const ChartAggregationPeriodDropdown=_0x479854=>{const {selectedPeriod:_0x98e13f,onPeriodSelect:_0x3ebb65,allPeriods:_0x483aff,addPeriod:_0x130166,removePeriod:_0x4d48d6}=_0x479854,[_0x4735c7,_0x1a951f]=useState(![]),[_0x848b1d,_0x25604f]=useState(![]),[_0x457781,_0x269c5f]=useState(undefined),{localization:_0x55303b,keyboardModeEnabled:_0x20ff4a}=useContext(MultiChartComponentContext),{config:_0x438946}=useContext(ChartReactAppContext),_0x3d3dd2=_0x483aff['length']>=PERIODS_LIMIT;useEffect(()=>()=>_0x25604f(![]),[_0x4735c7]);const _0x3b89bd=useCallback(_0x264c06=>pipe(_0x264c06,_0x130166,either['fold'](_0x238163=>{return _0x269c5f(_0x238163),void 0x0;},()=>{return _0x1a951f(![]),_0x25604f(![]),_0x269c5f(undefined),void 0x0;})),[_0x130166]),_0x1a9127=useCallback(_0x21b7fd=>{if(typeof _0x21b7fd!=='string')return;const _0x54b9f9=stringToPeriod(_0x21b7fd);_0x3ebb65(_0x54b9f9),_0x1a951f(![]);},[_0x3ebb65]),_0x1188bd=useCallback(()=>_0x269c5f(undefined),[]),_0x3e6301=_0x483aff['map'](_0x55f31a=>{const _0x21cdaf=periodToStringWithSeparator(_0x55f31a),_0x3a5931=periodToStringWithSeparator(_0x98e13f)===_0x21cdaf,_0x2f22b3={};return _0x2f22b3['ariaDescribedBy']=A11Y_AGGREGATION_PERIOD_DESC_ID,_0x2f22b3['testId']=TEST_IDS['chart_aggregation_period_dropdown_item'],_0x2f22b3['key']=_0x21cdaf,_0x2f22b3['period']=_0x55f31a,_0x2f22b3['onRemove']=_0x4d48d6,_0x2f22b3['isActive']=_0x3a5931,_0x58d1cc['createElement'](AggregationPeriodItem,_0x2f22b3);});if(_0x438946['customPeriodInput']['enabled']&&!_0x3d3dd2){const _0x7a476b={};_0x7a476b['input']=TEST_IDS['chart_layout_input'],_0x7a476b['inactiveText']=TEST_IDS['chart_layout_placeholder'];const _0x4e4021={};_0x4e4021['key']='custom',_0x4e4021['onEnter']=_0x3b89bd,_0x4e4021['keyboardModeEnabled']=_0x20ff4a,_0x4e4021['onActiveChange']=_0x25604f,_0x4e4021['isActive']=_0x848b1d,_0x4e4021['error']=_0x457781,_0x4e4021['onClearError']=_0x1188bd,_0x4e4021['inputValidator']=customPeriodInputValidator,_0x4e4021['inactiveText']=_0x55303b['aggregationPeriod']['custom'],_0x4e4021['placeholder']=_0x55303b['aggregationPeriod']['customInputPlaceHolder'],_0x4e4021['testIds']=_0x7a476b,_0x3e6301['push'](_0x58d1cc['createElement'](CustomInputMenuItem,_0x4e4021));}return _0x58d1cc['createElement'](Selectbox,{'keyboardMode':_0x20ff4a,'isOpened':_0x4735c7,'onToggle':_0x1a951f,'value':periodToStringWithSeparator(_0x98e13f),'onValueChange':_0x1a9127,'Popover':SelectboxPopover,'Anchor':ChartPeriodAnchorStyled,'Menu':DropdownMenu,'hasMenu':!![],'testIdAnchor':TEST_IDS['selectbox_period_anchor'],'testIdPopover':TEST_IDS['selectbox_period_popover'],'anchorAriaLabel':_0x55303b['toolbar']['a11y_buttons']['a11y_period_dropdown']},_0x3e6301);};const AggregationPeriodItem=memo(_0x69d820=>{const {period:_0xac103b,isActive:_0x6f05a8,onRemove:_0x291853,onSelect:_0x23fb76,ariaDescribedBy:_0x4de0f9,testId:_0x3e5d3f}=_0x69d820,[_0x3688e2,_0x428a45]=useState(![]),[_0x44ec09,_0x3d024b]=useState(![]),_0x3afd4c=useContext(IconsOverridingContext),{keyboardModeEnabled:_0x35f50d,localization:_0x2d740c}=useContext(MultiChartComponentContext),{isMobile:_0x28ecc9}=useContext(ChartReactAppContext),_0x451487=_0x2d740c['aggregationPeriod']['a11y_deleteAggregationPeriod'],_0x243e47=periodToStringWithSeparator(_0xac103b),_0x15fc09=useCallback(_0xa41aef=>{_0xa41aef['stopPropagation'](),_0x291853(_0xac103b);},[_0x291853,_0xac103b]),_0x4ef887=useMemo(()=>createKeyDownHandler(['Delete',()=>_0x291853(_0xac103b)]),[_0x291853,_0xac103b]),_0x5db13a=useCallback(_0xeab780=>_0xeab780['stopPropagation'](),[]),_0x4f2421=!_0x35f50d&&_0x44ec09||_0x35f50d&&_0x3688e2||_0x28ecc9,_0x52df1c={};return _0x52df1c['onClick']=_0x5db13a,_0x58d1cc['createElement'](AggregationMenuItem,{'ariaDescribedBy':_0x4de0f9,'onFocus':()=>_0x428a45(!![]),'onBlur':()=>_0x428a45(![]),'onMouseOver':()=>_0x3d024b(!![]),'onMouseOut':()=>_0x3d024b(![]),'onSelect':_0x23fb76,'onKeyDown':_0x4ef887,'key':_0x243e47,'value':_0x243e47,'testId':_0x3e5d3f,'keyboardModeEnabled':_0x35f50d,'isActive':_0x6f05a8,'isMobile':_0x28ecc9},_0x58d1cc['createElement'](AggregationPeriodItemContent,{'active':_0x6f05a8},getReadableString(_0xac103b,_0x2d740c['aggregationPeriod'])),_0x58d1cc['createElement'](AggregationPeriodActions,_0x52df1c,_0x58d1cc['createElement'](AggregationPeriodDeleteButton,{'disabled':_0x6f05a8,'aria-label':_0x451487,'aria-hidden':!![],'tabIndex':-0x1,'icon':_0x58d1cc['createElement'](IconWrapper,null,_0x28ecc9?_0x3afd4c['period']['deleteV2']:_0x3afd4c['period']['delete']),'visible':_0x4f2421,'onClick':_0x28ecc9?constVoid:_0x15fc09,'onTouchStart':_0x15fc09})));});function customPeriodInputValidator(_0x5796c8){const _0x3eb4bc=0x4,_0x570768=/[0-9]+/g;return _0x570768['exec'](_0x5796c8),_0x570768['lastIndex']<=_0x3eb4bc;}